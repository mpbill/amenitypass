!function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var e=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},n=g,r=u,i=function(t){return c(u(t))},o=c,s=d,a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function u(t){for(var e,n=[],r=0,i=0,o="";null!=(e=a.exec(t));){var s=e[0],u=e[1],c=e.index;if(o+=t.slice(i,c),i=c+s.length,u)o+=u[1];else{o&&(n.push(o),o="");var l=e[2],f=e[3],h=e[4],d=e[5],g=e[6],y=e[7],m="+"===g||"*"===g,_="?"===g||"*"===g,v=l||"/",b=h||d||(y?".*":"[^"+v+"]+?");n.push({name:f||r++,prefix:l||"",delimiter:v,optional:_,repeat:m,pattern:p(b)})}}return i<t.length&&(o+=t.substr(i)),o&&n.push(o),n}function c(t){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var i="",o=r||{},s=0;s<t.length;s++){var a=t[s];if("string"!=typeof a){var u,c=o[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(e(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(u=encodeURIComponent(c[l]),!n[s].test(u))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');i+=(0===l?a.prefix:a.delimiter)+u}}else{if(u=encodeURIComponent(c),!n[s].test(u))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');i+=a.prefix+u}}else i+=a}return i}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function p(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function d(t,e){for(var n=(e=e||{}).strict,r=!1!==e.end,i="",o=t[t.length-1],s="string"==typeof o&&/\/$/.test(o),a=0;a<t.length;a++){var u=t[a];if("string"==typeof u)i+=l(u);else{var c=l(u.prefix),p=u.pattern;u.repeat&&(p+="(?:"+c+p+")*"),i+=p=u.optional?c?"(?:"+c+"("+p+"))?":"("+p+")?":c+"("+p+")"}}return n||(i=(s?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=r?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+i,h(e))}function g(t,n,r){return e(n=n||[])?r||(r={}):(r=n,n=[]),t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(t,e)}(t,n):e(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(g(t[i],e,n).source);return f(new RegExp("(?:"+r.join("|")+")",h(n)),e)}(t,n,r):function(t,e,n){for(var r=u(t),i=d(r,n),o=0;o<r.length;o++)"string"!=typeof r[o]&&e.push(r[o]);return f(i,e)}(t,n,r)}n.parse=r,n.compile=i,n.tokensToFunction=o,n.tokensToRegExp=s;var y,m="undefined"!=typeof document,_="undefined"!=typeof window,v="undefined"!=typeof history,b="undefined"!=typeof process,w=m&&document.ontouchstart?"touchstart":"click",x=_&&!(!window.history.location&&!window.location);function E(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function I(t,e){if("function"==typeof t)return I.call(this,"*",t);if("function"==typeof e)for(var n=new N(t,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function S(t){if(!t.handled){var e=this._window;(this._hashbang?x&&this._getBase()+e.location.hash.replace("#!",""):x&&e.location.pathname+e.location.search)!==t.canonicalPath&&(this.stop(),t.handled=!1,x&&(e.location.href=t.canonicalPath))}}function C(t,e,n){var r=this.page=n||I,i=r._window,o=r._hashbang,s=r._getBase();"/"===t[0]&&0!==t.indexOf(s)&&(t=s+(o?"#!":"")+t);var a=t.indexOf("?");this.canonicalPath=t;var u=new RegExp("^"+s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=t.replace(u,"")||"/",o&&(this.path=this.path.replace("#!","")||"/"),this.title=m&&i.document.title,this.state=e||{},this.state.path=t,this.querystring=~a?r._decodeURLEncodedURIComponent(t.slice(a+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~a?t.slice(0,a):t),this.params={},this.hash="",!o){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=r._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}function N(t,e,r){this.page=r||O;var i=e||{};i.strict=i.strict||r._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=n(this.path,this.keys=[],i)}E.prototype.configure=function(t){var e=t||{};this._window=e.window||_&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&_,this._click=!1!==e.click&&m,this._hashbang=!!e.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):_&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(w,this.clickHandler,!1):m&&n.document.removeEventListener(w,this.clickHandler,!1),this._hashbang&&_&&!v?n.addEventListener("hashchange",this._onpopstate,!1):_&&n.removeEventListener("hashchange",this._onpopstate,!1)},E.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},E.prototype._getBase=function(){var t=this._base;if(t)return t;var e=_&&this._window&&this._window.location;return _&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},E.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},E.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var n;if(this._running=!0,x){var r=this._window.location;n=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(n,null,!0,e.dispatch)}},E.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(w,this.clickHandler,!1),_&&t.removeEventListener("popstate",this._onpopstate,!1),_&&t.removeEventListener("hashchange",this._onpopstate,!1)}},E.prototype.show=function(t,e,n,r){var i=new C(t,e,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,!1!==n&&this.dispatch(i,o),!1!==i.handled&&!1!==r&&i.pushState(),i},E.prototype.back=function(t,e){var n=this;if(this.len>0){var r=this._window;v&&r.history.back(),this.len--}else t?setTimeout((function(){n.show(t,e)})):setTimeout((function(){n.show(n._getBase(),e)}))},E.prototype.redirect=function(t,e){var n=this;"string"==typeof t&&"string"==typeof e&&I.call(this,t,(function(t){setTimeout((function(){n.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){n.replace(t)}),0)},E.prototype.replace=function(t,e,n,r){var i=new C(t,e,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),!1!==r&&this.dispatch(i,o),i},E.prototype.dispatch=function(t,e){var n=0,r=0,i=this;function o(){var e=i.callbacks[n++];if(t.path===i.current)return e?void e(t,o):S.call(i,t);t.handled=!1}e?function t(){var n=i.exits[r++];if(!n)return o();n(e,t)}():o()},E.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var n=new N(t,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))},E.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){e=n[r];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var i="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var o=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&!(i?e.target.baseVal:e.target)&&(i||this.sameOrigin(e.href))){var s=i?e.href.baseVal:e.pathname+e.search+(e.hash||"");s="/"!==s[0]?"/"+s:s,b&&s.match(/^\/[a-zA-Z]:\//)&&(s=s.replace(/^\/[a-zA-Z]:\//,"/"));var a=s,u=this._getBase();0===s.indexOf(u)&&(s=s.substr(u.length)),this._hashbang&&(s=s.replace("#!","")),(!u||a!==s||x&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(a))}}}}},E.prototype._onpopstate=(y=!1,_?(m&&"complete"===document.readyState?y=!0:window.addEventListener("load",(function(){setTimeout((function(){y=!0}),0)})),function(t){if(y)if(t.state){var e=t.state.path;this.replace(e,t.state)}else if(x){var n=this._window.location;this.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}):function(){}),E.prototype._which=function(t){return null==(t=t||_&&this._window.event).which?t.button:t.which},E.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&x)return new URL(t,e.location.toString());if(m){var n=e.document.createElement("a");return n.href=t,n}},E.prototype.sameOrigin=function(t){if(!t||!x)return!1;var e=this._toURL(t),n=this._window.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&n.port===e.port},E.prototype._samePath=function(t){if(!x)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},E.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},C.prototype.pushState=function(){var t=this.page,e=t._window,n=t._hashbang;t.len++,v&&e.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.save=function(){var t=this.page;v&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},N.prototype.middleware=function(t){var e=this;return function(n,r){if(e.match(n.path,n.params))return t(n,r);r()}},N.prototype.match=function(t,e){var n=this.keys,r=t.indexOf("?"),i=~r?t.slice(0,r):t,o=this.regexp.exec(decodeURIComponent(i));if(!o)return!1;for(var s=1,a=o.length;s<a;++s){var u=n[s-1],c=this.page._decodeURLEncodedURIComponent(o[s]);void 0===c&&hasOwnProperty.call(e,u.name)||(e[u.name]=c)}return!0};var O=function t(){var e=new E;function n(){return I.apply(e,arguments)}return n.callbacks=e.callbacks,n.exits=e.exits,n.base=e.base.bind(e),n.strict=e.strict.bind(e),n.start=e.start.bind(e),n.stop=e.stop.bind(e),n.show=e.show.bind(e),n.back=e.back.bind(e),n.redirect=e.redirect.bind(e),n.replace=e.replace.bind(e),n.dispatch=e.dispatch.bind(e),n.exit=e.exit.bind(e),n.configure=e.configure.bind(e),n.sameOrigin=e.sameOrigin.bind(e),n.clickHandler=e.clickHandler.bind(e),n.create=t,Object.defineProperty(n,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(n,"current",{get:function(){return e.current},set:function(t){e.current=t}}),n.Context=C,n.Route=N,n}(),T=O,L=O;T.default=L;var P="object"==typeof global&&global&&global.Object===Object&&global,R="object"==typeof self&&self&&self.Object===Object&&self,A=P||R||Function("return this")(),M=A.Symbol,D=Object.prototype,k=D.hasOwnProperty,F=D.toString,j=M?M.toStringTag:void 0;var $=Object.prototype.toString;var B=M?M.toStringTag:void 0;function U(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":B&&B in Object(t)?function(t){var e=k.call(t,j),n=t[j];try{t[j]=void 0;var r=!0}catch(t){}var i=F.call(t);return r&&(e?t[j]=n:delete t[j]),i}(t):function(t){return $.call(t)}(t)}function q(t){return null!=t&&"object"==typeof t}function G(t){return"symbol"==typeof t||q(t)&&"[object Symbol]"==U(t)}function z(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var V=Array.isArray,H=M?M.prototype:void 0,Y=H?H.toString:void 0;function X(t){if("string"==typeof t)return t;if(V(t))return z(t,X)+"";if(G(t))return Y?Y.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function W(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var K=/^\s+|\s+$/g,Q=/^[-+]0x[0-9a-f]+$/i,J=/^0b[01]+$/i,Z=/^0o[0-7]+$/i,tt=parseInt;function et(t){if("number"==typeof t)return t;if(G(t))return NaN;if(W(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=W(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(K,"");var n=J.test(t);return n||Z.test(t)?tt(t.slice(2),n?2:8):Q.test(t)?NaN:+t}function nt(t){var e=function(t){return t?(t=et(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),n=e%1;return e==e?n?e-n:e:0}function rt(t){return t}function it(t){if(!W(t))return!1;var e=U(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var ot,st=A["__core-js_shared__"],at=(ot=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||""))?"Symbol(src)_1."+ot:"";var ut=Function.prototype.toString;function ct(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var lt=/^\[object .+?Constructor\]$/,pt=Function.prototype,ft=Object.prototype,ht=pt.toString,dt=ft.hasOwnProperty,gt=RegExp("^"+ht.call(dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(t){return!(!W(t)||function(t){return!!at&&at in t}(t))&&(it(t)?gt:lt).test(ct(t))}function mt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return yt(n)?n:void 0}var _t=mt(A,"WeakMap"),vt=Object.create,bt=function(){function t(){}return function(e){if(!W(e))return{};if(vt)return vt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function wt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var xt=Date.now;var Et=function(){try{var t=mt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),It=function(t){var e=0,n=0;return function(){var r=xt(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Et?function(t,e){return Et(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:rt);function St(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ct(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Nt(t){return t!=t}function Ot(t,e){return!!(null==t?0:t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ct(t,Nt,n)}(t,e,0)>-1}var Tt=/^(?:0|[1-9]\d*)$/;function Lt(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Tt.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t,e,n){"__proto__"==e&&Et?Et(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Rt(t,e){return t===e||t!=t&&e!=e}var At=Object.prototype.hasOwnProperty;function Mt(t,e,n){var r=t[e];At.call(t,e)&&Rt(r,n)&&(void 0!==n||e in t)||Pt(t,e,n)}var Dt=Math.max;function kt(t,e){return It(function(t,e,n){return e=Dt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Dt(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),wt(t,this,a)}}(t,e,rt),t+"")}function Ft(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function jt(t){return null!=t&&Ft(t.length)&&!it(t)}var $t=Object.prototype;function Bt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$t)}function Ut(t){return q(t)&&"[object Arguments]"==U(t)}var qt=Object.prototype,Gt=qt.hasOwnProperty,zt=qt.propertyIsEnumerable,Vt=Ut(function(){return arguments}())?Ut:function(t){return q(t)&&Gt.call(t,"callee")&&!zt.call(t,"callee")};var Ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,Yt=Ht&&"object"==typeof module&&module&&!module.nodeType&&module,Xt=Yt&&Yt.exports===Ht?A.Buffer:void 0,Wt=(Xt?Xt.isBuffer:void 0)||function(){return!1},Kt={};function Qt(t){return function(e){return t(e)}}Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt["[object Arguments]"]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object Boolean]"]=Kt["[object DataView]"]=Kt["[object Date]"]=Kt["[object Error]"]=Kt["[object Function]"]=Kt["[object Map]"]=Kt["[object Number]"]=Kt["[object Object]"]=Kt["[object RegExp]"]=Kt["[object Set]"]=Kt["[object String]"]=Kt["[object WeakMap]"]=!1;var Jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,te=Zt&&Zt.exports===Jt&&P.process,ee=function(){try{var t=Zt&&Zt.require&&Zt.require("util").types;return t||te&&te.binding&&te.binding("util")}catch(t){}}(),ne=ee&&ee.isTypedArray,re=ne?Qt(ne):function(t){return q(t)&&Ft(t.length)&&!!Kt[U(t)]},ie=Object.prototype.hasOwnProperty;function oe(t,e){var n=V(t),r=!n&&Vt(t),i=!n&&!r&&Wt(t),o=!n&&!r&&!i&&re(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var c in t)!e&&!ie.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Lt(c,u))||a.push(c);return a}function se(t,e){return function(n){return t(e(n))}}var ae=se(Object.keys,Object),ue=Object.prototype.hasOwnProperty;function ce(t){return jt(t)?oe(t):function(t){if(!Bt(t))return ae(t);var e=[];for(var n in Object(t))ue.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var le=Object.prototype.hasOwnProperty;function pe(t){if(!W(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Bt(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function fe(t){return jt(t)?oe(t,!0):pe(t)}var he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/;function ge(t,e){if(V(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!G(t))||(de.test(t)||!he.test(t)||null!=e&&t in Object(e))}var ye=mt(Object,"create");var me=Object.prototype.hasOwnProperty;var _e=Object.prototype.hasOwnProperty;function ve(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function be(t,e){for(var n=t.length;n--;)if(Rt(t[n][0],e))return n;return-1}ve.prototype.clear=function(){this.__data__=ye?ye(null):{},this.size=0},ve.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ve.prototype.get=function(t){var e=this.__data__;if(ye){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return me.call(e,t)?e[t]:void 0},ve.prototype.has=function(t){var e=this.__data__;return ye?void 0!==e[t]:_e.call(e,t)},ve.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ye&&void 0===e?"__lodash_hash_undefined__":e,this};var we=Array.prototype.splice;function xe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(t){var e=this.__data__,n=be(e,t);return!(n<0)&&(n==e.length-1?e.pop():we.call(e,n,1),--this.size,!0)},xe.prototype.get=function(t){var e=this.__data__,n=be(e,t);return n<0?void 0:e[n][1]},xe.prototype.has=function(t){return be(this.__data__,t)>-1},xe.prototype.set=function(t,e){var n=this.__data__,r=be(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Ee=mt(A,"Map");function Ie(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Se(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Se.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(Ee||xe),string:new ve}},Se.prototype.delete=function(t){var e=Ie(this,t).delete(t);return this.size-=e?1:0,e},Se.prototype.get=function(t){return Ie(this,t).get(t)},Se.prototype.has=function(t){return Ie(this,t).has(t)},Se.prototype.set=function(t,e){var n=Ie(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Ce(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ce.Cache||Se),n}Ce.Cache=Se;var Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/\\(\\)?/g,Te=function(t){var e=Ce(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ne,(function(t,n,r,i){e.push(r?i.replace(Oe,"$1"):n||t)})),e}));function Le(t){return null==t?"":X(t)}function Pe(t,e){return V(t)?t:ge(t,e)?[t]:Te(Le(t))}function Re(t){if("string"==typeof t||G(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ae(t,e){for(var n=0,r=(e=Pe(e,t)).length;null!=t&&n<r;)t=t[Re(e[n++])];return n&&n==r?t:void 0}function Me(t,e,n){var r=null==t?void 0:Ae(t,e);return void 0===r?n:r}function De(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ke=M?M.isConcatSpreadable:void 0;function Fe(t){return V(t)||Vt(t)||!!(ke&&t&&t[ke])}var je=se(Object.getPrototypeOf,Object),$e=Function.prototype,Be=Object.prototype,Ue=$e.toString,qe=Be.hasOwnProperty,Ge=Ue.call(Object);function ze(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var Ve=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function He(t){return Ve.test(t)}var Ye="[\\ud800-\\udfff]",Xe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",We="\\ud83c[\\udffb-\\udfff]",Ke="[^\\ud800-\\udfff]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ze="(?:"+Xe+"|"+We+")"+"?",tn="[\\ufe0e\\ufe0f]?"+Ze+("(?:\\u200d(?:"+[Ke,Qe,Je].join("|")+")[\\ufe0e\\ufe0f]?"+Ze+")*"),en="(?:"+[Ke+Xe+"?",Xe,Qe,Je,Ye].join("|")+")",nn=RegExp(We+"(?="+We+")|"+en+tn,"g");function rn(t){return He(t)?function(t){return t.match(nn)||[]}(t):function(t){return t.split("")}(t)}var on;on="toUpperCase";function sn(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function an(t){var e=this.__data__=new xe(t);this.size=e.size}an.prototype.clear=function(){this.__data__=new xe,this.size=0},an.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},an.prototype.get=function(t){return this.__data__.get(t)},an.prototype.has=function(t){return this.__data__.has(t)},an.prototype.set=function(t,e){var n=this.__data__;if(n instanceof xe){var r=n.__data__;if(!Ee||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Se(r)}return n.set(t,e),this.size=n.size,this};var un="object"==typeof exports&&exports&&!exports.nodeType&&exports,cn=un&&"object"==typeof module&&module&&!module.nodeType&&module,ln=cn&&cn.exports===un?A.Buffer:void 0,pn=ln?ln.allocUnsafe:void 0;function fn(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function hn(){return[]}var dn=Object.prototype.propertyIsEnumerable,gn=Object.getOwnPropertySymbols,yn=gn?function(t){return null==t?[]:(t=Object(t),fn(gn(t),(function(e){return dn.call(t,e)})))}:hn,mn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)De(e,yn(t)),t=je(t);return e}:hn;function _n(t,e,n){var r=e(t);return V(t)?r:De(r,n(t))}function vn(t){return _n(t,ce,yn)}var bn=mt(A,"DataView"),wn=mt(A,"Promise"),xn=mt(A,"Set"),En=ct(bn),In=ct(Ee),Sn=ct(wn),Cn=ct(xn),Nn=ct(_t),On=U;(bn&&"[object DataView]"!=On(new bn(new ArrayBuffer(1)))||Ee&&"[object Map]"!=On(new Ee)||wn&&"[object Promise]"!=On(wn.resolve())||xn&&"[object Set]"!=On(new xn)||_t&&"[object WeakMap]"!=On(new _t))&&(On=function(t){var e=U(t),n="[object Object]"==e?t.constructor:void 0,r=n?ct(n):"";if(r)switch(r){case En:return"[object DataView]";case In:return"[object Map]";case Sn:return"[object Promise]";case Cn:return"[object Set]";case Nn:return"[object WeakMap]"}return e});var Tn=On,Ln=A.Uint8Array;function Pn(t,e){var n,r,i=e?(n=t.buffer,r=new n.constructor(n.byteLength),new Ln(r).set(new Ln(n)),r):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Se;++e<n;)this.add(t[e])}function An(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Mn(t,e){return t.has(e)}Rn.prototype.add=Rn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(t){return this.__data__.has(t)};function Dn(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,p=!0,f=2&n?new Rn:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var h=t[l],d=e[l];if(r)var g=s?r(d,h,l,e,t,o):r(h,d,l,t,e,o);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!An(e,(function(t,e){if(!Mn(f,e)&&(h===t||i(h,t,n,r,o)))return f.push(e)}))){p=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function kn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var jn=M?M.prototype:void 0,$n=jn?jn.valueOf:void 0;var Bn=Object.prototype.hasOwnProperty;var Un=Object.prototype.hasOwnProperty;function qn(t,e,n,r,i,o){var s=V(t),a=V(e),u=s?"[object Array]":Tn(t),c=a?"[object Array]":Tn(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),p="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Wt(t)){if(!Wt(e))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new an),s||re(t)?Dn(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Ln(t),new Ln(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Rt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=kn;case"[object Set]":var u=1&r;if(a||(a=Fn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Dn(a(t),a(e),r,i,o,s);return s.delete(t),l;case"[object Symbol]":if($n)return $n.call(t)==$n.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var h=l&&Un.call(t,"__wrapped__"),d=p&&Un.call(e,"__wrapped__");if(h||d){var g=h?t.value():t,y=d?e.value():e;return o||(o=new an),i(g,y,n,r,o)}}return!!f&&(o||(o=new an),function(t,e,n,r,i,o){var s=1&n,a=vn(t),u=a.length;if(u!=vn(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:Bn.call(e,l)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var f=!0;o.set(t,e),o.set(e,t);for(var h=s;++c<u;){var d=t[l=a[c]],g=e[l];if(r)var y=s?r(g,d,l,e,t,o):r(d,g,l,t,e,o);if(!(void 0===y?d===g||i(d,g,n,r,o):y)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var m=t.constructor,_=e.constructor;m==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function Gn(t,e,n,r,i){return t===e||(null==t||null==e||!q(t)&&!q(e)?t!=t&&e!=e:qn(t,e,n,r,Gn,i))}function zn(t){return t==t&&!W(t)}function Vn(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Hn(t){var e=function(t){for(var e=ce(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,zn(i)]}return e}(t);return 1==e.length&&e[0][2]?Vn(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var p=new an;if(r)var f=r(c,l,u,t,e,p);if(!(void 0===f?Gn(l,c,3,r,p):f))return!1}}return!0}(n,t,e)}}function Yn(t,e){return null!=t&&e in Object(t)}function Xn(t,e,n){for(var r=-1,i=(e=Pe(e,t)).length,o=!1;++r<i;){var s=Re(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ft(i)&&Lt(s,i)&&(V(t)||Vt(t))}function Wn(t,e){return ge(t)&&zn(e)?Vn(Re(t),e):function(n){var r=Me(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&Xn(t,e,Yn)}(n,t):Gn(e,r,3)}}function Kn(t){return ge(t)?(e=Re(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Ae(e,t)}}(t);var e}function Qn(t){return"function"==typeof t?t:null==t?rt:"object"==typeof t?V(t)?Wn(t[0],t[1]):Hn(t):Kn(t)}var Jn,Zn=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[Jn?s:++r];if(!1===e(i[a],a,i))break}return t};var tr=function(t,e){return function(n,r){if(null==n)return n;if(!jt(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}((function(t,e){return t&&Zn(t,e,ce)})),er=function(){return A.Date.now()},nr=Math.max,rr=Math.min;function ir(t,e,n){var r,i,o,s,a,u,c=0,l=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n)}function d(t){return c=t,a=setTimeout(y,e),l?h(t):s}function g(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-c>=o}function y(){var t=er();if(g(t))return m(t);a=setTimeout(y,function(t){var n=e-(t-u);return p?rr(n,o-(t-c)):n}(t))}function m(t){return a=void 0,f&&r?h(t):(r=i=void 0,s)}function _(){var t=er(),n=g(t);if(r=arguments,i=this,u=t,n){if(void 0===a)return d(u);if(p)return clearTimeout(a),a=setTimeout(y,e),h(u)}return void 0===a&&(a=setTimeout(y,e)),s}return e=et(e)||0,W(n)&&(l=!!n.leading,o=(p="maxWait"in n)?nr(et(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),_.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=i=a=void 0},_.flush=function(){return void 0===a?s:m(er())},_}function or(t,e,n){(void 0!==n&&!Rt(t[e],n)||void 0===n&&!(e in t))&&Pt(t,e,n)}function sr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function ar(t){return function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),i?Pt(n,a,u):Mt(n,a,u)}return n}(t,fe(t))}function ur(t,e,n,r,i,o,s){var a=sr(t,n),u=sr(e,n),c=s.get(u);if(c)or(t,n,c);else{var l,p=o?o(a,u,n+"",t,e,s):void 0,f=void 0===p;if(f){var h=V(u),d=!h&&Wt(u),g=!h&&!d&&re(u);p=u,h||d||g?V(a)?p=a:q(l=a)&&jt(l)?p=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(a):d?(f=!1,p=function(t,e){if(e)return t.slice();var n=t.length,r=pn?pn(n):new t.constructor(n);return t.copy(r),r}(u,!0)):g?(f=!1,p=Pn(u,!0)):p=[]:function(t){if(!q(t)||"[object Object]"!=U(t))return!1;var e=je(t);if(null===e)return!0;var n=qe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ue.call(n)==Ge}(u)||Vt(u)?(p=a,Vt(a)?p=ar(a):W(a)&&!it(a)||(p=function(t){return"function"!=typeof t.constructor||Bt(t)?{}:bt(je(t))}(u))):f=!1}f&&(s.set(u,p),i(p,u,r,o,s),s.delete(u)),or(t,n,p)}}function cr(t,e,n,r,i){t!==e&&Zn(e,(function(o,s){if(i||(i=new an),W(o))ur(t,e,s,n,cr,r,i);else{var a=r?r(sr(t,s),o,s+"",t,e,i):void 0;void 0===a&&(a=o),or(t,s,a)}}),fe)}function lr(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pr(t,e){var n;return(V(t)?St:tr)(t,"function"==typeof(n=e)?n:rt)}function fr(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}var hr=Math.max;var dr,gr=(dr=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:nt(n);return i<0&&(i=hr(r+i,0)),Ct(t,Qn(e),i)},function(t,e,n){var r=Object(t);if(!jt(t)){var i=Qn(e);t=ce(t),e=function(t){return i(r[t],t,r)}}var o=dr(t,e,n);return o>-1?r[i?t[o]:o]:void 0});function yr(t,e){var n=-1,r=jt(t)?Array(t.length):[];return tr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function mr(t,e){return(V(t)?z:yr)(t,Qn(e))}function _r(t,e){return function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=Fe),o||(o=[]);++s<a;){var u=e[s];n>0&&r(u)?n>1?t(u,n-1,r,i,o):De(o,u):i||(o[o.length]=u)}return o}(mr(t,e),1)}var vr=Object.prototype.hasOwnProperty;function br(t,e){return null!=t&&vr.call(t,e)}function wr(t,e){return null!=t&&Xn(t,e,br)}var xr,Er=(xr=function(t,e,n){cr(t,e,n)},kt((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=xr.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!W(n))return!1;var r=typeof e;return!!("number"==r?jt(n)&&Lt(e,n.length):"string"==r&&e in n)&&Rt(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&xr(t,s,n,i)}return t})));function Ir(t,e){return null==(t=function(t,e){return e.length<2?t:Ae(t,ze(e,0,-1))}(t,e=Pe(e,t)))||delete t[Re((n=e,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}function Sr(t,e,n,r){if(!W(t))return t;for(var i=-1,o=(e=Pe(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u=Re(e[i]),c=n;if(i!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=W(l)?l:Lt(e[i+1])?[]:{})}Mt(a,u,c),a=a[u]}return t}function Cr(t,e){if(null==t)return{};var n=z(function(t){return _n(t,fe,mn)}(t),(function(t){return[t]}));return e=Qn(e),function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Ae(t,s);n(a,s)&&Sr(o,Pe(s,t),a)}return o}(t,n,(function(t,n){return e(t,n[0])}))}function Nr(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=G(t),s=void 0!==e,a=null===e,u=e==e,c=G(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function Or(t,e,n){var r=-1;return e=z(e.length?e:[rt],Qt(Qn)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(yr(t,(function(t,n,i){return{criteria:z(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Nr(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Tr(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Lr(t,e,n){return null==t?t:Sr(t,e,n)}var Pr=xn&&1/Fn(new xn([,-0]))[1]==1/0?function(t){return new xn(t)}:function(){};function Rr(t){return t&&t.length?function(t,e,n){var r=-1,i=Ot,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=lr;else if(o>=200){var c=e?null:Pr(t);if(c)return Fn(c);s=!1,i=Mn,u=new Rn}else u=e?[]:a;t:for(;++r<o;){var l=t[r],p=e?e(l):l;if(l=n||0!==l?l:0,s&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue t;e&&u.push(p),a.push(l)}else i(u,p,n)||(u!==a&&u.push(p),a.push(l))}return a}(t):[]}var Ar=0;function Mr(t,e){return null==t||Ir(t,e)}function Dr(){}function kr(t){return t()}function Fr(){return Object.create(null)}function jr(t){t.forEach(kr)}function $r(t){return"function"==typeof t}function Br(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function Ur(t,...e){if(null==t)return Dr;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qr(t,e,n){t.$$.on_destroy.push(Ur(e,n))}function Gr(t,e){t.appendChild(e)}function zr(t,e,n){t.insertBefore(e,n||null)}function Vr(t){t.parentNode.removeChild(t)}function Hr(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Yr(t){return document.createElement(t)}function Xr(t){return document.createTextNode(t)}function Wr(){return Xr(" ")}function Kr(){return Xr("")}function Qr(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Jr(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Zr(t,e){e=""+e,t.data!==e&&(t.data=e)}function ti(t,e,n){t.classList[n?"add":"remove"](e)}class ei{constructor(t,e=null){this.e=Yr("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)zr(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(Vr)}}let ni;function ri(t){ni=t}function ii(t){(function(){if(!ni)throw new Error("Function called outside component initialization");return ni})().$$.on_mount.push(t)}const oi=[],si=[],ai=[],ui=[],ci=Promise.resolve();let li=!1;function pi(t){ai.push(t)}function fi(t){ui.push(t)}let hi=!1;const di=new Set;function gi(){if(!hi){hi=!0;do{for(let t=0;t<oi.length;t+=1){const e=oi[t];ri(e),yi(e.$$)}for(oi.length=0;si.length;)si.pop()();for(let t=0;t<ai.length;t+=1){const e=ai[t];di.has(e)||(di.add(e),e())}ai.length=0}while(oi.length);for(;ui.length;)ui.pop()();li=!1,hi=!1,di.clear()}}function yi(t){if(null!==t.fragment){t.update(),jr(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pi)}}const mi=new Set;let _i;function vi(){_i={r:0,c:[],p:_i}}function bi(){_i.r||jr(_i.c),_i=_i.p}function wi(t,e){t&&t.i&&(mi.delete(t),t.i(e))}function xi(t,e,n,r){if(t&&t.o){if(mi.has(t))return;mi.add(t),_i.c.push(()=>{mi.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Ei(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Ii(t){t&&t.c()}function Si(t,e,n){const{fragment:r,on_mount:i,on_destroy:o,after_update:s}=t.$$;r&&r.m(e,n),pi(()=>{const e=i.map(kr).filter($r);o?o.push(...e):jr(e),t.$$.on_mount=[]}),s.forEach(pi)}function Ci(t,e){const n=t.$$;null!==n.fragment&&(jr(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ni(t,e){-1===t.$$.dirty[0]&&(oi.push(t),li||(li=!0,ci.then(gi)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Oi(t,e,n,r,i,o,s=[-1]){const a=ni;ri(t);const u=e.props||{},c=t.$$={fragment:null,ctx:null,props:o,update:Dr,not_equal:i,bound:Fr(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:Fr(),dirty:s};let l=!1;if(c.ctx=n?n(t,u,(e,n,...r)=>{const o=r.length?r[0]:n;return c.ctx&&i(c.ctx[e],c.ctx[e]=o)&&(c.bound[e]&&c.bound[e](o),l&&Ni(t,e)),n}):[],c.update(),l=!0,jr(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);c.fragment&&c.fragment.l(t),t.forEach(Vr)}else c.fragment&&c.fragment.c();e.intro&&wi(t.$$.fragment),Si(t,e.target,e.anchor),gi()}ri(a)}class Ti{$destroy(){Ci(this,1),this.$destroy=Dr}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const Li=[];function Pi(t,e){return{subscribe:Ri(t,e).subscribe}}function Ri(t,e=Dr){let n;const r=[];function i(e){if(Br(t,e)&&(t=e,n)){const e=!Li.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),Li.push(n,t)}if(e){for(let t=0;t<Li.length;t+=2)Li[t][0](Li[t+1]);Li.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,s=Dr){const a=[o,s];return r.push(a),1===r.length&&(n=e(i)||Dr),o(t),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(n(),n=null)}}}}function Ai(t,e,n){const r=!Array.isArray(t),i=r?[t]:t,o=e.length<2;return Pi(n,t=>{let n=!1;const s=[];let a=0,u=Dr;const c=()=>{if(a)return;u();const n=e(r?s[0]:s,t);o?t(n):u=$r(n)?n:Dr},l=i.map((t,e)=>Ur(t,t=>{s[e]=t,a&=~(1<<e),n&&c()},()=>{a|=1<<e}));return n=!0,c(),function(){jr(l),u()}})}const Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Di={RFC3548:Mi,RFC4648:Mi,"RFC4648-HEX":"0123456789ABCDEFGHIJKLMNOPQRSTUV",Crockford:"0123456789ABCDEFGHJKMNPQRSTVWXYZ"};!function(t="Crockford"){const e=Di[t];if(!e)throw new Error("Unknown base32 variant: "+t);function n(t,e){const n=t.indexOf(e);if(-1===n)throw new Error("Invalid character found: "+e);return n}}("Crockford");"undefined"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}()&&"undefined"!=typeof Uint8Array&&function(){try{new Blob([new Uint8Array(100)]).size}catch(t){return!1}}();const ki="geolocation"in navigator;async function Fi(t){try{const t=await navigator.permissions.query({name:"geolocation"});if("prompt"!=t.state)return"granted"===t.state}catch(t){}try{return await function(t){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(e,n,t)})}(t||{enableHighAccuracy:!1}),!0}catch(t){return t.code!==t.PERMISSION_DENIED}}for(var ji=[],$i=[],Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ui=0,qi=Bi.length;Ui<qi;++Ui)ji[Ui]=Bi[Ui],$i[Bi.charCodeAt(Ui)]=Ui;$i["-".charCodeAt(0)]=62,$i["_".charCodeAt(0)]=63;for(var Gi=[],zi=0;zi<256;zi++)Gi[zi]=(zi+256).toString(16).substr(1);const Vi={status:"unstarted",position:null,error:null},Hi=Pi(Vi,t=>{function e(e={}){t(Object.assign(n,e))}let n=Vi;if(!ki)return e({status:"unsupported"});e({status:"requesting"});let r=!1,i=null;return Fi({enableHighAccuracy:!1,maximumAge:1/0,timeout:2e4}).then(t=>{if(!r)return t?void(i=function(t,e,n){const r=navigator.geolocation.watchPosition(t,e,n);return()=>navigator.geolocation.clearWatch(r)}(t=>e({status:"active",position:t,error:null}),t=>e({status:"error",error:t}))):e({status:"unpermitted"})}),()=>{r=!0,i&&i()}});var Yi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Xi(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ki(t,e){return t(e={exports:{}},e.exports),e.exports}var Qi=Ki((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){return void 0===r&&(r={}),n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function p(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function h(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=p,e.lengthToDegrees=function(t,e){return f(p(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(p(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=h,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!h(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}));Wi(Qi);Qi.earthRadius,Qi.factors,Qi.unitsFactors,Qi.areaFactors,Qi.feature,Qi.geometry,Qi.point,Qi.points,Qi.polygon,Qi.polygons,Qi.lineString,Qi.lineStrings,Qi.featureCollection,Qi.multiLineString,Qi.multiPoint,Qi.multiPolygon,Qi.geometryCollection,Qi.round,Qi.radiansToLength,Qi.lengthToRadians,Qi.lengthToDegrees,Qi.bearingToAzimuth,Qi.radiansToDegrees,Qi.degreesToRadians,Qi.convertLength,Qi.convertArea,Qi.isNumber,Qi.isObject,Qi.validateBBox,Qi.validateId,Qi.radians2degrees,Qi.degrees2radians,Qi.distanceToDegrees,Qi.distanceToRadians,Qi.radiansToDistance,Qi.bearingToAngle,Qi.convertDistance;var Ji=Ki((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&Qi.isNumber(e[0])&&Qi.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}}));Wi(Ji);Ji.getCoord,Ji.getCoords,Ji.containsNumber,Ji.geojsonType,Ji.featureOf,Ji.collectionOf,Ji.getGeom,Ji.getType;var Zi=Wi(Ki((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){void 0===n&&(n={});var r=Ji.getCoord(t),i=Ji.getCoord(e),o=Qi.degreesToRadians(i[1]-r[1]),s=Qi.degreesToRadians(i[0]-r[0]),a=Qi.degreesToRadians(r[1]),u=Qi.degreesToRadians(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return Qi.radiansToLength(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}})));Wi(Ki((function(t,e){function n(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Ji.getCoord(t),o=Ji.getGeom(e),s=o.type,a=e.bbox,u=o.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(u=[u]);for(var c=!1,l=0;l<u.length&&!c;l++)if(n(i,u[l][0],r.ignoreBoundary)){for(var p=!1,f=1;f<u[l].length&&!p;)n(i,u[l][f],!r.ignoreBoundary)&&(p=!0),f++;p||(c=!0)}return c}}))),"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var to=function(){};to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to},to.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var eo=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),no=function(){},ro={MAX_VALUE:{configurable:!0}};no.isNaN=function(t){return Number.isNaN(t)},no.doubleToLongBits=function(t){return t},no.longBitsToDouble=function(t){return t},no.isInfinite=function(t){return!Number.isFinite(t)},ro.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(no,ro);var io=function(){},oo=function(){},so=function(){};function ao(){}var uo=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},co={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};uo.prototype.setOrdinate=function(t,e){switch(t){case uo.X:this.x=e;break;case uo.Y:this.y=e;break;case uo.Z:this.z=e;break;default:throw new eo("Invalid ordinate index: "+t)}},uo.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!to.equalsWithTolerance(this.x,e.x,n)&&!!to.equalsWithTolerance(this.y,e.y,n)}},uo.prototype.getOrdinate=function(t){switch(t){case uo.X:return this.x;case uo.Y:return this.y;case uo.Z:return this.z}throw new eo("Invalid ordinate index: "+t)},uo.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||no.isNaN(this.z))&&no.isNaN(t.z)},uo.prototype.equals=function(t){return t instanceof uo&&this.equals2D(t)},uo.prototype.equalInZ=function(t,e){return to.equalsWithTolerance(this.z,t.z,e)},uo.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},uo.prototype.clone=function(){},uo.prototype.copy=function(){return new uo(this)},uo.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},uo.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},uo.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},uo.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+uo.hashCode(this.x))+uo.hashCode(this.y)},uo.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},uo.prototype.interfaces_=function(){return[io,oo,ao]},uo.prototype.getClass=function(){return uo},uo.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=no.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},co.DimensionalComparator.get=function(){return lo},co.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},co.NULL_ORDINATE.get=function(){return no.NaN},co.X.get=function(){return 0},co.Y.get=function(){return 1},co.Z.get=function(){return 2},Object.defineProperties(uo,co);var lo=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new eo("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};lo.prototype.compare=function(t,e){var n=t,r=e,i=lo.compare(n.x,r.x);if(0!==i)return i;var o=lo.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:lo.compare(n.z,r.z)},lo.prototype.interfaces_=function(){return[so]},lo.prototype.getClass=function(){return lo},lo.compare=function(t,e){return t<e?-1:t>e?1:no.isNaN(t)?no.isNaN(e)?0:-1:no.isNaN(e)?1:0};var po=function(){};po.prototype.create=function(){},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po};var fo=function(){},ho={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},fo.toLocationSymbol=function(t){switch(t){case fo.EXTERIOR:return"e";case fo.BOUNDARY:return"b";case fo.INTERIOR:return"i";case fo.NONE:return"-"}throw new eo("Unknown location value: "+t)},ho.INTERIOR.get=function(){return 0},ho.BOUNDARY.get=function(){return 1},ho.EXTERIOR.get=function(){return 2},ho.NONE.get=function(){return-1},Object.defineProperties(fo,ho);var go=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},yo=function(){},mo={LOG_10:{configurable:!0}};yo.prototype.interfaces_=function(){return[]},yo.prototype.getClass=function(){return yo},yo.log10=function(t){var e=Math.log(t);return no.isInfinite(e)||no.isNaN(e)?e:e/yo.LOG_10},yo.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},yo.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},yo.wrap=function(t,e){return t<0?e- -t%e:t%e},yo.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},yo.average=function(t,e){return(t+e)/2},mo.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(yo,mo);var _o=function(t){this.str=t};_o.prototype.append=function(t){this.str+=t},_o.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},_o.prototype.toString=function(t){return this.str};var vo=function(t){this.value=t};vo.prototype.intValue=function(){return this.value},vo.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},vo.isNaN=function(t){return Number.isNaN(t)};var bo=function(){};bo.isWhitespace=function(t){return t<=32&&t>=0||127===t},bo.toUpperCase=function(t){return t.toUpperCase()};var wo=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},xo={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};wo.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},wo.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=wo.magnitude(n._hi),i=wo.TEN.pow(r);(n=n.divide(i)).gt(wo.TEN)?(n=n.divide(wo.TEN),r+=1):n.lt(wo.ONE)&&(n=n.multiply(wo.TEN),r-=1);for(var o=r+1,s=new _o,a=wo.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,p=0;c>9?(l=!0,p="9"):p="0"+c,s.append(p),n=n.subtract(wo.valueOf(c)).multiply(wo.TEN),l&&n.selfAdd(wo.TEN);var f=!0,h=wo.magnitude(n._hi);if(h<0&&Math.abs(h)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},wo.prototype.sqr=function(){return this.multiply(this)},wo.prototype.doubleValue=function(){return this._hi+this._lo},wo.prototype.subtract=function(){if(arguments[0]instanceof wo){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},wo.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},wo.prototype.isZero=function(){return 0===this._hi&&0===this._lo},wo.prototype.selfSubtract=function(){if(arguments[0]instanceof wo){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},wo.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},wo.prototype.min=function(t){return this.le(t)?this:t},wo.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof wo){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,p=null;return u=this._hi/n,p=(i=(c=wo.SPLIT*u)-(i=c-u))*(s=(p=wo.SPLIT*n)-(s=p-n))-(l=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,p=u+(c=(this._hi-l-p+this._lo-u*r)/n),this._hi=p,this._lo=u-p+c,this}},wo.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},wo.prototype.divide=function(){if(arguments[0]instanceof wo){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=wo.SPLIT*o)-(e=s-o)),u=e*(r=(u=wo.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var c=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),l=o-u+s;return new wo(c,l)}if("number"==typeof arguments[0]){var p=arguments[0];return no.isNaN(p)?wo.createNaN():wo.copy(this).selfDivide(p,0)}},wo.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},wo.prototype.pow=function(t){if(0===t)return wo.valueOf(1);var e=new wo(this),n=wo.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},wo.prototype.ceil=function(){if(this.isNaN())return wo.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new wo(t,e)},wo.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},wo.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},wo.prototype.setValue=function(){if(arguments[0]instanceof wo){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},wo.prototype.max=function(t){return this.ge(t)?this:t},wo.prototype.sqrt=function(){if(this.isZero())return wo.valueOf(0);if(this.isNegative())return wo.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=wo.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},wo.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof wo){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,p=null,f=null,h=null,d=null,g=null,y=null;h=this._hi+u,p=this._lo+c,d=h-(g=h-this._hi),f=p-(y=p-this._lo);var m=(l=h+(g=(d=u-g+(this._hi-d))+p))+(g=(f=c-y+(this._lo-f))+(g+(h-l))),_=g+(l-m);return this._hi=m,this._lo=_,this}},wo.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof wo){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=wo.SPLIT*this._hi)-this._hi,c=wo.SPLIT*n,i=u-i,o=this._hi-i,s=c-n;var l=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),p=c+(i=u-l);return this._hi=l,this._lo=p,this}},wo.prototype.selfSqr=function(){return this.selfMultiply(this)},wo.prototype.floor=function(){if(this.isNaN())return wo.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new wo(t,e)},wo.prototype.negate=function(){return this.isNaN()?this:new wo(-this._hi,-this._lo)},wo.prototype.clone=function(){},wo.prototype.multiply=function(){if(arguments[0]instanceof wo){var t=arguments[0];return t.isNaN()?wo.createNaN():wo.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return no.isNaN(e)?wo.createNaN():wo.copy(this).selfMultiply(e,0)}},wo.prototype.isNaN=function(){return no.isNaN(this._hi)},wo.prototype.intValue=function(){return Math.trunc(this._hi)},wo.prototype.toString=function(){var t=wo.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},wo.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+wo.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+wo.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},wo.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=wo.SPLIT*n)-(i=s-n)),o=(a=wo.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new wo(u,n-u+s)},wo.prototype.toSciNotation=function(){if(this.isZero())return wo.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=wo.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},wo.prototype.abs=function(){return this.isNaN()?wo.NaN:this.isNegative()?this.negate():new wo(this)},wo.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},wo.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},wo.prototype.add=function(){if(arguments[0]instanceof wo){var t=arguments[0];return wo.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return wo.copy(this).selfAdd(e)}},wo.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof wo){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},wo.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},wo.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},wo.prototype.trunc=function(){return this.isNaN()?wo.NaN:this.isPositive()?this.floor():this.ceil()},wo.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},wo.prototype.interfaces_=function(){return[ao,io,oo]},wo.prototype.getClass=function(){return wo},wo.sqr=function(t){return wo.valueOf(t).selfMultiply(t)},wo.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return wo.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new wo(e)}},wo.sqrt=function(t){return wo.valueOf(t).sqrt()},wo.parse=function(t){for(var e=0,n=t.length;bo.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new wo,s=0,a=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,bo.isDigit(c)){var l=c-"0";o.selfMultiply(wo.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var p=t.substring(e);try{u=vo.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var f=o,h=s-a-u;if(0===h)f=o;else if(h>0){var d=wo.TEN.pow(h);f=o.divide(d)}else if(h<0){var g=wo.TEN.pow(-h);f=o.multiply(g)}return r?f.negate():f},wo.createNaN=function(){return new wo(no.NaN,no.NaN)},wo.copy=function(t){return new wo(t)},wo.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},wo.stringOfChar=function(t,e){for(var n=new _o,r=0;r<e;r++)n.append(t);return n.toString()},xo.PI.get=function(){return new wo(3.141592653589793,12246467991473532e-32)},xo.TWO_PI.get=function(){return new wo(6.283185307179586,24492935982947064e-32)},xo.PI_2.get=function(){return new wo(1.5707963267948966,6123233995736766e-32)},xo.E.get=function(){return new wo(2.718281828459045,14456468917292502e-32)},xo.NaN.get=function(){return new wo(no.NaN,no.NaN)},xo.EPS.get=function(){return 123259516440783e-46},xo.SPLIT.get=function(){return 134217729},xo.MAX_PRINT_DIGITS.get=function(){return 32},xo.TEN.get=function(){return wo.valueOf(10)},xo.ONE.get=function(){return wo.valueOf(1)},xo.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},xo.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(wo,xo);var Eo=function(){},Io={DP_SAFE_EPSILON:{configurable:!0}};Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo},Eo.orientationIndex=function(t,e,n){var r=Eo.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=wo.valueOf(e.x).selfAdd(-t.x),o=wo.valueOf(e.y).selfAdd(-t.y),s=wo.valueOf(n.x).selfAdd(-e.x),a=wo.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Eo.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Eo.intersection=function(t,e,n,r){var i=wo.valueOf(r.y).selfSubtract(n.y).selfMultiply(wo.valueOf(e.x).selfSubtract(t.x)),o=wo.valueOf(r.x).selfSubtract(n.x).selfMultiply(wo.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=wo.valueOf(r.x).selfSubtract(n.x).selfMultiply(wo.valueOf(t.y).selfSubtract(n.y)),u=wo.valueOf(r.y).selfSubtract(n.y).selfMultiply(wo.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=wo.valueOf(t.x).selfAdd(wo.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),p=wo.valueOf(e.x).selfSubtract(t.x).selfMultiply(wo.valueOf(t.y).selfSubtract(n.y)),f=wo.valueOf(e.y).selfSubtract(t.y).selfMultiply(wo.valueOf(t.x).selfSubtract(n.x)),h=p.subtract(f).selfDivide(s).doubleValue(),d=wo.valueOf(n.y).selfAdd(wo.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new uo(l,d)},Eo.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return Eo.signum(s);r=i+o}else{if(!(i<0))return Eo.signum(s);if(o>=0)return Eo.signum(s);r=-i-o}var a=Eo.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Eo.signum(s):2},Eo.signum=function(t){return t>0?1:t<0?-1:0},Io.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Eo,Io);var So=function(){},Co={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Co.X.get=function(){return 0},Co.Y.get=function(){return 1},Co.Z.get=function(){return 2},Co.M.get=function(){return 3},So.prototype.setOrdinate=function(t,e,n){},So.prototype.size=function(){},So.prototype.getOrdinate=function(t,e){},So.prototype.getCoordinate=function(){},So.prototype.getCoordinateCopy=function(t){},So.prototype.getDimension=function(){},So.prototype.getX=function(t){},So.prototype.clone=function(){},So.prototype.expandEnvelope=function(t){},So.prototype.copy=function(){},So.prototype.getY=function(t){},So.prototype.toCoordinateArray=function(){},So.prototype.interfaces_=function(){return[oo]},So.prototype.getClass=function(){return So},Object.defineProperties(So,Co);var No=function(){},Oo=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(No),To=function(){};To.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},To.getProperty=function(t){return{"line.separator":"\n"}[t]};var Lo=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof uo&&arguments[1]instanceof uo){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var p=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3],g=p.y-f.y,y=f.x-p.x,m=p.x*f.y-f.x*p.y,_=h.y-d.y,v=d.x-h.x,b=h.x*d.y-d.x*h.y;this.x=y*b-v*m,this.y=_*m-g*b,this.w=g*v-_*y}};Lo.prototype.getY=function(){var t=this.y/this.w;if(no.isNaN(t)||no.isInfinite(t))throw new Oo;return t},Lo.prototype.getX=function(){var t=this.x/this.w;if(no.isNaN(t)||no.isInfinite(t))throw new Oo;return t},Lo.prototype.getCoordinate=function(){var t=new uo;return t.x=this.getX(),t.y=this.getY(),t},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-a*o,p=(o*c-u*s)/l,f=(a*s-i*c)/l;if(no.isNaN(p)||no.isInfinite(p)||no.isNaN(f)||no.isInfinite(f))throw new Oo;return new uo(p,f)};var Po=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof uo){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ro={serialVersionUID:{configurable:!0}};Po.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Po.prototype.equals=function(t){if(!(t instanceof Po))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Po.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Po;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Po(e,r,n,i)},Po.prototype.isNull=function(){return this._maxx<this._minx},Po.prototype.getMaxX=function(){return this._maxx},Po.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof uo){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Po){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy)}},Po.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Po){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof uo){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Po.prototype.getMinY=function(){return this._miny},Po.prototype.getMinX=function(){return this._minx},Po.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof uo){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Po){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Po.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Po.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Po.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Po.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Po.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Po.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Po.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Po.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Po.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Po.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Po){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof uo){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Po.prototype.centre=function(){return this.isNull()?null:new uo((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Po.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof uo){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Po){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Po.prototype.getMaxY=function(){return this._maxy},Po.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Po.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+uo.hashCode(this._minx))+uo.hashCode(this._maxx))+uo.hashCode(this._miny))+uo.hashCode(this._maxy)},Po.prototype.interfaces_=function(){return[io,ao]},Po.prototype.getClass=function(){return Po},Po.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&(!(l<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<a)))}},Ro.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Po,Ro);var Ao={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Mo=function(t){this.geometryFactory=t||new va};Mo.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Ao.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Ao.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],ko[n]&&(e=ko[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Mo.prototype.write=function(t){return this.extractGeometry(t)},Mo.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Do[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Do[e].apply(this,[t])+")"};var Do={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Do.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Do.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Do.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Do.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Do.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Do.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Do.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Do.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},ko={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Ao.spaces);return this.geometryFactory.createPoint(new uo(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ao.trimParens,"$1"),r.push(ko.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ao.spaces),r.push(new uo(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ao.spaces),r.push(new uo(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Ao.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ao.trimParens,"$1"),r.push(ko.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Ao.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Ao.trimParens,"$1"),n=ko.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Ao.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ao.trimParens,"$1"),r.push(ko.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Fo=function(t){this.parser=new Mo(t)};Fo.prototype.write=function(t){return this.parser.write(t)},Fo.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var jo=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$o=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jo),Bo=function(){};Bo.prototype.interfaces_=function(){return[]},Bo.prototype.getClass=function(){return Bo},Bo.shouldNeverReachHere=function(){if(0===arguments.length)Bo.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $o("Should never reach here"+(null!==t?": "+t:""))}},Bo.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Bo.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new $o:new $o(e)},Bo.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],Bo.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new $o("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Uo=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new uo,this._intPt[1]=new uo,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},qo={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Uo.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Uo.prototype.getTopologySummary=function(){var t=new _o;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Uo.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Uo.prototype.getIntersectionNum=function(){return this._result},Uo.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Uo.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Uo.prototype.setPrecisionModel=function(t){this._precisionModel=t},Uo.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Uo.prototype.getIntersection=function(t){return this._intPt[t]},Uo.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Uo.prototype.hasIntersection=function(){return this._result!==Uo.NO_INTERSECTION},Uo.prototype.getEdgeDistance=function(t,e){return Uo.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Uo.prototype.isCollinear=function(){return this._result===Uo.COLLINEAR_INTERSECTION},Uo.prototype.toString=function(){return Fo.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Fo.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Uo.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Uo.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Uo.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo},Uo.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Bo.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Uo.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Bo.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},qo.DONT_INTERSECT.get=function(){return 0},qo.DO_INTERSECT.get=function(){return 1},qo.COLLINEAR.get=function(){return 2},qo.NO_INTERSECTION.get=function(){return 0},qo.POINT_INTERSECTION.get=function(){return 1},qo.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Uo,qo);var Go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Po(this._inputLines[0][0],this._inputLines[0][1]),n=new Po(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Po.intersects(n,r,e)&&0===Ho.orientationIndex(n,r,e)&&0===Ho.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Lo.intersection(t,n,r,i)}catch(s){if(!(s instanceof Oo))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new uo(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Eo.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);To.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&To.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new uo(t),o=new uo(e),s=new uo(n),a=new uo(r),u=new uo;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Po.intersects(e,n,r),s=Po.intersects(e,n,i),a=Po.intersects(r,i,e),u=Po.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=((o>c?o:c)+(a<p?a:p))/2,d=((s>l?s:l)+(u<f?u:f))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Po.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Ho.orientationIndex(e,n,r),s=Ho.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Ho.orientationIndex(r,i,e),u=Ho.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new uo(r):0===s?this._intPt[0]=new uo(i):0===a?this._intPt[0]=new uo(e):0===u&&(this._intPt[0]=new uo(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Ho.distancePointLine(t,n,r),s=Ho.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Ho.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Ho.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(Uo),zo=function(){};zo.prototype.interfaces_=function(){return[]},zo.prototype.getClass=function(){return zo},zo.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return zo.signOfDet2x2(r,i,o,s)},zo.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Vo=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Vo.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=zo.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Vo.prototype.isPointInPolygon=function(){return this.getLocation()!==fo.EXTERIOR},Vo.prototype.getLocation=function(){return this._isPointOnSegment?fo.BOUNDARY:this._crossingCount%2==1?fo.INTERIOR:fo.EXTERIOR},Vo.prototype.isOnSegment=function(){return this._isPointOnSegment},Vo.prototype.interfaces_=function(){return[]},Vo.prototype.getClass=function(){return Vo},Vo.locatePointInRing=function(){if(arguments[0]instanceof uo&&go(arguments[1],So)){for(var t=arguments[0],e=arguments[1],n=new Vo(t),r=new uo,i=new uo,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof uo&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Vo(s),c=1;c<a.length;c++){var l=a[c],p=a[c-1];if(u.countSegment(l,p),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Ho=function(){},Yo={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Ho.prototype.interfaces_=function(){return[]},Ho.prototype.getClass=function(){return Ho},Ho.orientationIndex=function(t,e,n){return Eo.orientationIndex(t,e,n)},Ho.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,s=t[r-1].y;e+=i*(s-o)}return e/2}if(go(arguments[0],So)){var a=arguments[0],u=a.size();if(u<3)return 0;var c=new uo,l=new uo,p=new uo;a.getCoordinate(0,l),a.getCoordinate(1,p);var f=l.x;p.x-=f;for(var h=0,d=1;d<u-1;d++)c.y=l.y,l.x=p.x,l.y=p.y,a.getCoordinate(d+1,p),p.x-=f,h+=l.x*(c.y-p.y);return h/2}},Ho.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Ho.distancePointLine(t,n,r);if(n.equals(r))return Ho.distancePointLine(r,t,e);var i=!1;if(Po.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?yo.min(Ho.distancePointLine(t,n,r),Ho.distancePointLine(e,n,r),Ho.distancePointLine(n,t,e),Ho.distancePointLine(r,t,e)):0},Ho.isPointInRing=function(t,e){return Ho.locatePointInRing(t,e)!==fo.EXTERIOR},Ho.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new uo;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},Ho.isCCW=function(t){var e=t.length-1;if(e<3)throw new eo("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=Ho.computeOrientation(u,n,c),p=!1;return p=0===l?u.x>c.x:l>0,p},Ho.locatePointInRing=function(t,e){return Vo.locatePointInRing(t,e)},Ho.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Ho.computeOrientation=function(t,e,n){return Ho.orientationIndex(t,e,n)},Ho.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new eo("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Ho.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Ho.isOnLine=function(t,e){for(var n=new Go,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Yo.CLOCKWISE.get=function(){return-1},Yo.RIGHT.get=function(){return Ho.CLOCKWISE},Yo.COUNTERCLOCKWISE.get=function(){return 1},Yo.LEFT.get=function(){return Ho.COUNTERCLOCKWISE},Yo.COLLINEAR.get=function(){return 0},Yo.STRAIGHT.get=function(){return Ho.COLLINEAR},Object.defineProperties(Ho,Yo);var Xo=function(){};Xo.prototype.filter=function(t){},Xo.prototype.interfaces_=function(){return[]},Xo.prototype.getClass=function(){return Xo};var Wo=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ko={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Wo.prototype.isGeometryCollection=function(){return this.getSortIndex()===Wo.SORTINDEX_GEOMETRYCOLLECTION},Wo.prototype.getFactory=function(){return this._factory},Wo.prototype.getGeometryN=function(t){return this},Wo.prototype.getArea=function(){return 0},Wo.prototype.isRectangle=function(){return!1},Wo.prototype.equals=function(){if(arguments[0]instanceof Wo){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Wo))return!1;var n=e;return this.equalsExact(n)}},Wo.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Wo.prototype.geometryChanged=function(){this.apply(Wo.geometryChangedFilter)},Wo.prototype.geometryChangedAction=function(){this._envelope=null},Wo.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Wo.prototype.getLength=function(){return 0},Wo.prototype.getNumGeometries=function(){return 1},Wo.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Wo.prototype.getUserData=function(){return this._userData},Wo.prototype.getSRID=function(){return this._SRID},Wo.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Wo.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Wo.SORTINDEX_GEOMETRYCOLLECTION)throw new eo("This method does not support GeometryCollection arguments")},Wo.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Wo.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Wo.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Wo.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Po(this._envelope)},Wo.prototype.setSRID=function(t){this._SRID=t},Wo.prototype.setUserData=function(t){this._userData=t},Wo.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Wo.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Wo.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Wo.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Wo.SORTINDEX_MULTIPOINT||this.getSortIndex()===Wo.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Wo.SORTINDEX_MULTIPOLYGON},Wo.prototype.interfaces_=function(){return[oo,io,ao]},Wo.prototype.getClass=function(){return Wo},Wo.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Wo.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Ko.serialVersionUID.get=function(){return 0x799ea46522854c00},Ko.SORTINDEX_POINT.get=function(){return 0},Ko.SORTINDEX_MULTIPOINT.get=function(){return 1},Ko.SORTINDEX_LINESTRING.get=function(){return 2},Ko.SORTINDEX_LINEARRING.get=function(){return 3},Ko.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ko.SORTINDEX_POLYGON.get=function(){return 5},Ko.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ko.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ko.geometryChangedFilter.get=function(){return Qo},Object.defineProperties(Wo,Ko);var Qo=function(){};Qo.interfaces_=function(){return[Xo]},Qo.filter=function(t){t.geometryChangedAction()};var Jo=function(){};Jo.prototype.filter=function(t){},Jo.prototype.interfaces_=function(){return[]},Jo.prototype.getClass=function(){return Jo};var Zo=function(){},ts={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Zo.prototype.isInBoundary=function(t){},Zo.prototype.interfaces_=function(){return[]},Zo.prototype.getClass=function(){return Zo},ts.Mod2BoundaryNodeRule.get=function(){return es},ts.EndPointBoundaryNodeRule.get=function(){return ns},ts.MultiValentEndPointBoundaryNodeRule.get=function(){return rs},ts.MonoValentEndPointBoundaryNodeRule.get=function(){return is},ts.MOD2_BOUNDARY_RULE.get=function(){return new es},ts.ENDPOINT_BOUNDARY_RULE.get=function(){return new ns},ts.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rs},ts.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new is},ts.OGC_SFS_BOUNDARY_RULE.get=function(){return Zo.MOD2_BOUNDARY_RULE},Object.defineProperties(Zo,ts);var es=function(){};es.prototype.isInBoundary=function(t){return t%2==1},es.prototype.interfaces_=function(){return[Zo]},es.prototype.getClass=function(){return es};var ns=function(){};ns.prototype.isInBoundary=function(t){return t>0},ns.prototype.interfaces_=function(){return[Zo]},ns.prototype.getClass=function(){return ns};var rs=function(){};rs.prototype.isInBoundary=function(t){return t>1},rs.prototype.interfaces_=function(){return[Zo]},rs.prototype.getClass=function(){return rs};var is=function(){};is.prototype.isInBoundary=function(t){return 1===t},is.prototype.interfaces_=function(){return[Zo]},is.prototype.getClass=function(){return is};var os=function(){};function ss(t){this.message=t||""}os.prototype.add=function(){},os.prototype.addAll=function(){},os.prototype.isEmpty=function(){},os.prototype.iterator=function(){},os.prototype.size=function(){},os.prototype.toArray=function(){},os.prototype.remove=function(){},ss.prototype=new Error,ss.prototype.name="IndexOutOfBoundsException";var as=function(){};as.prototype.hasNext=function(){},as.prototype.next=function(){},as.prototype.remove=function(){};var us=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(os);function cs(t){this.message=t||""}cs.prototype=new Error,cs.prototype.name="NoSuchElementException";var ls=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof os&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,os]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ps(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ss;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(us),ps=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new cs;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(as),fs=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof uo&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],c=arguments[1];return this.add(u,c),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],p=arguments[1],f=arguments[2];if(f)for(var h=0;h<l.length;h++)e.add(l[h],p);else for(var d=l.length-1;d>=0;d--)e.add(l[d],p);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof uo){var g=arguments[0],y=arguments[1],m=arguments[2];if(!m){var _=this.size();if(_>0){if(g>0){var v=this.get(g-1);if(v.equals2D(y))return null}if(g<_){var b=this.get(g);if(b.equals2D(y))return null}}}t.prototype.add.call(this,g,y)}}else if(4===arguments.length){var w=arguments[0],x=arguments[1],E=arguments[2],I=arguments[3],S=1;E>I&&(S=-1);for(var C=E;C!==I;C+=S)e.add(w[C],x);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new uo(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(ls),hs=function(){},ds={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ds.ForwardComparator.get=function(){return gs},ds.BidirectionalComparator.get=function(){return ys},ds.coordArrayType.get=function(){return new Array(0).fill(null)},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},hs.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(hs.indexOf(r,e)<0)return r}return null},hs.scroll=function(t,e){var n=hs.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);To.arraycopy(t,n,r,0,t.length-n),To.arraycopy(t,0,r,t.length-n,n),To.arraycopy(r,0,t,0,t.length)},hs.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},hs.intersection=function(t,e){for(var n=new fs,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},hs.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},hs.removeRepeatedPoints=function(t){return hs.hasRepeatedPoints(t)?new fs(t,!1).toCoordinateArray():t},hs.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},hs.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},hs.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new uo(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new uo(r[i+u])},hs.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},hs.envelope=function(t){for(var e=new Po,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},hs.toCoordinateArray=function(t){return t.toArray(hs.coordArrayType)},hs.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},hs.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},hs.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},hs.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},hs.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},hs.extract=function(t,e,n){e=yo.clamp(e,0,t.length);var r=(n=yo.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(hs,ds);var gs=function(){};gs.prototype.compare=function(t,e){return hs.compare(t,e)},gs.prototype.interfaces_=function(){return[so]},gs.prototype.getClass=function(){return gs};var ys=function(){};ys.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=hs.compare(n,r);return hs.isEqualReversed(n,r)?0:i},ys.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=hs.increasingDirection(n),o=hs.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},ys.prototype.interfaces_=function(){return[so]},ys.prototype.getClass=function(){return ys};var ms=function(){};ms.prototype.get=function(){},ms.prototype.put=function(){},ms.prototype.size=function(){},ms.prototype.values=function(){},ms.prototype.entrySet=function(){};var _s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ms);function vs(t){this.message=t||""}function bs(){}vs.prototype=new Error,vs.prototype.name="OperationNotSupported",bs.prototype=new os,bs.prototype.contains=function(){};var ws=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof os&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new xs(this)},e}(bs),xs=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new cs;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new vs},e}(as);function Es(t){return null===t?0:t.color}function Is(t){return null===t?null:t.parent}function Ss(t,e){null!==t&&(t.color=e)}function Cs(t){return null===t?null:t.left}function Ns(t){return null===t?null:t.right}function Os(){this.root_=null,this.size_=0}Os.prototype=new _s,Os.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Os.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Os.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Is(t)===Cs(Is(Is(t)))){var e=Ns(Is(Is(t)));1===Es(e)?(Ss(Is(t),0),Ss(e,0),Ss(Is(Is(t)),1),t=Is(Is(t))):(t===Ns(Is(t))&&(t=Is(t),this.rotateLeft(t)),Ss(Is(t),0),Ss(Is(Is(t)),1),this.rotateRight(Is(Is(t))))}else{var n=Cs(Is(Is(t)));1===Es(n)?(Ss(Is(t),0),Ss(n,0),Ss(Is(Is(t)),1),t=Is(Is(t))):(t===Cs(Is(t))&&(t=Is(t),this.rotateRight(t)),Ss(Is(t),0),Ss(Is(Is(t)),1),this.rotateLeft(Is(Is(t))))}this.root_.color=0},Os.prototype.values=function(){var t=new ls,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Os.successor(e));)t.add(e.value);return t},Os.prototype.entrySet=function(){var t=new ws,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Os.successor(e));)t.add(e);return t},Os.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Os.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Os.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Os.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Os.prototype.size=function(){return this.size_};var Ts=function(){};function Ls(){}function Ps(){this.array_=[],arguments[0]instanceof os&&this.addAll(arguments[0])}Ts.prototype.interfaces_=function(){return[]},Ts.prototype.getClass=function(){return Ts},Ls.prototype=new bs,Ps.prototype=new Ls,Ps.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},Ps.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Ps.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ps.prototype.remove=function(t){throw new vs},Ps.prototype.size=function(){return this.array_.length},Ps.prototype.isEmpty=function(){return 0===this.array_.length},Ps.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ps.prototype.iterator=function(){return new Rs(this)};var Rs=function(t){this.treeSet_=t,this.position_=0};Rs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new cs;return this.treeSet_.array_[this.position_++]},Rs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Rs.prototype.remove=function(){throw new vs};var As=function(){};As.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},As.asList=function(t){for(var e=new ls,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ms=function(){},Ds={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ds.P.get=function(){return 0},Ds.L.get=function(){return 1},Ds.A.get=function(){return 2},Ds.FALSE.get=function(){return-1},Ds.TRUE.get=function(){return-2},Ds.DONTCARE.get=function(){return-3},Ds.SYM_FALSE.get=function(){return"F"},Ds.SYM_TRUE.get=function(){return"T"},Ds.SYM_DONTCARE.get=function(){return"*"},Ds.SYM_P.get=function(){return"0"},Ds.SYM_L.get=function(){return"1"},Ds.SYM_A.get=function(){return"2"},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms},Ms.toDimensionSymbol=function(t){switch(t){case Ms.FALSE:return Ms.SYM_FALSE;case Ms.TRUE:return Ms.SYM_TRUE;case Ms.DONTCARE:return Ms.SYM_DONTCARE;case Ms.P:return Ms.SYM_P;case Ms.L:return Ms.SYM_L;case Ms.A:return Ms.SYM_A}throw new eo("Unknown dimension value: "+t)},Ms.toDimensionValue=function(t){switch(bo.toUpperCase(t)){case Ms.SYM_FALSE:return Ms.FALSE;case Ms.SYM_TRUE:return Ms.TRUE;case Ms.SYM_DONTCARE:return Ms.DONTCARE;case Ms.SYM_P:return Ms.P;case Ms.SYM_L:return Ms.L;case Ms.SYM_A:return Ms.A}throw new eo("Unknown dimension symbol: "+t)},Object.defineProperties(Ms,Ds);var ks=function(){};ks.prototype.filter=function(t){},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks};var Fs=function(){};Fs.prototype.filter=function(t,e){},Fs.prototype.isDone=function(){},Fs.prototype.isGeometryChanged=function(){},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs};var js=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new eo("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Po,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();As.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ms.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ms.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Ps(As.asList(this._geometries)),r=new Ps(As.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),c=0;c<a&&c<u;){var l=t.getGeometryN(c),p=s.getGeometryN(c),f=l.compareToSameClass(p,o);if(0!==f)return f;c++}return c<a?1:c<u?-1:0}},e.prototype.apply=function(){var t=this;if(go(arguments[0],Jo))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(go(arguments[0],Fs)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(go(arguments[0],ks)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(go(arguments[0],Xo)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Bo.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Wo),$s=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wo.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ms.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Bs(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ts]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(js),Bs=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Zo.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Bs.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Bs.prototype.getBoundary=function(){return this._geom instanceof Qs?this.boundaryLineString(this._geom):this._geom instanceof $s?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Bs.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Bs.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Bs.prototype.computeBoundaryCoordinates=function(t){var e=new ls;this._endpointMap=new Os;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return hs.toCoordinateArray(e)},Bs.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Us,this._endpointMap.put(t,e)),e.count++},Bs.prototype.interfaces_=function(){return[]},Bs.prototype.getClass=function(){return Bs},Bs.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new Bs(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new Bs(n,r);return i.getBoundary()}};var Us=function(){this.count=null};function qs(){}function Gs(){}Us.prototype.interfaces_=function(){return[]},Us.prototype.getClass=function(){return Us};var zs=function(){};function Vs(){}function Hs(){}function Ys(){}var Xs=function(){},Ws={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xs.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Vs,n=new qs(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new Gs(Xs.getStackTrace(r)),a=new Ys(s),u=0;u<i;u++)try{o+=a.readLine()+Xs.NEWLINE}catch(t){if(!(t instanceof Hs))throw t;Bo.shouldNeverReachHere()}return o}},Xs.split=function(t,e){for(var n=e.length,r=new ls,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Xs.toString=function(){if(1===arguments.length){var t=arguments[0];return Xs.SIMPLE_ORDINATE_FORMAT.format(t)}},Xs.spaces=function(t){return Xs.chars(" ",t)},Ws.NEWLINE.get=function(){return To.getProperty("line.separator")},Ws.SIMPLE_ORDINATE_FORMAT.get=function(){return new zs("0.#")},Object.defineProperties(Xs,Ws);var Ks=function(){};Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks},Ks.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ks.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,So.X)===t.getOrdinate(e-1,So.X)&&t.getOrdinate(0,So.Y)===t.getOrdinate(e-1,So.Y))},Ks.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!no.isNaN(s)||!no.isNaN(a)))return!1}return!0},Ks.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ks.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ks.copy(e,i-1,r,o,1);return r},Ks.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ks.swap(t,r,e-r)},Ks.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ks.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ks.copyCoord(t,e+o,n,r+o)},Ks.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new _o;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xs.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ks.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ks.createClosedRing(t,e,4):e.getOrdinate(0,So.X)===e.getOrdinate(n-1,So.X)&&e.getOrdinate(0,So.Y)===e.getOrdinate(n-1,So.Y)?e:Ks.createClosedRing(t,e,n+1)},Ks.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ks.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ks.copy(e,0,r,o,1);return r};var Qs=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Po:this._points.expandEnvelope(new Po)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ks.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ms.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Ho.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ks.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(go(arguments[0],Jo))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(go(arguments[0],Fs)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(go(arguments[0],ks)){var o=arguments[0];o.filter(this)}else if(go(arguments[0],Xo)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new Bs(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new eo("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ts]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Wo),Js=function(){};Js.prototype.interfaces_=function(){return[]},Js.prototype.getClass=function(){return Js};var Zs=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Po;var t=new Po;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ms.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(go(arguments[0],Jo)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(go(arguments[0],Fs)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(go(arguments[0],ks)){var n=arguments[0];n.filter(this)}else if(go(arguments[0],Xo)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Bo.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Js]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Wo),ta=function(){};ta.prototype.interfaces_=function(){return[]},ta.prototype.getClass=function(){return ta};var ea=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new eo("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new eo("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Ho.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Ho.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o===(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);As.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);To.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=hs.minCoordinate(n.getCoordinates());hs.scroll(i,o),To.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Ho.isCCW(n.getCoordinates())===r&&hs.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,c=a.compareToSameClass(u,o);if(0!==c)return c;for(var l=this.getNumInteriorRing(),p=s.getNumInteriorRing(),f=0;f<l&&f<p;){var h=t.getInteriorRingN(f),d=s.getInteriorRingN(f),g=h.compareToSameClass(d,o);if(0!==g)return g;f++}return f<l?1:f<p?-1:0}},e.prototype.apply=function(t){if(go(t,Jo)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(go(t,Fs)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(go(t,ks))t.filter(this);else if(go(t,Xo)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[ta]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Wo),na=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wo.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ms.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Js]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(js),ra=function(t){function e(e,n){e instanceof uo&&n instanceof va&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wo.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ms.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ks.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new eo("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new eo("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Qs),ia=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wo.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new ls,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ta]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(js),oa=function(t){this._factory=t||null,this._isUserDataCopied=!1},sa={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oa.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oa.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},oa.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof js?this.editGeometryCollection(t,e):t instanceof ea?this.editPolygon(t,e):t instanceof Zs||t instanceof Qs?e.edit(t,this._factory):(Bo.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oa.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new ls,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===na?this._factory.createMultiPoint(r.toArray([])):n.getClass()===$s?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ia?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},oa.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new ls,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa},oa.GeometryEditorOperation=function(){},sa.NoOpGeometryOperation.get=function(){return aa},sa.CoordinateOperation.get=function(){return ua},sa.CoordinateSequenceOperation.get=function(){return ca},Object.defineProperties(oa,sa);var aa=function(){};aa.prototype.edit=function(t,e){return t},aa.prototype.interfaces_=function(){return[oa.GeometryEditorOperation]},aa.prototype.getClass=function(){return aa};var ua=function(){};ua.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ra?e.createLinearRing(n):t instanceof Qs?e.createLineString(n):t instanceof Zs?n.length>0?e.createPoint(n[0]):e.createPoint():t},ua.prototype.interfaces_=function(){return[oa.GeometryEditorOperation]},ua.prototype.getClass=function(){return ua};var ca=function(){};ca.prototype.edit=function(t,e){return t instanceof ra?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qs?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zs?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ca.prototype.interfaces_=function(){return[oa.GeometryEditorOperation]},ca.prototype.getClass=function(){return ca};var la=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new uo}else if(go(arguments[0],So)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var c=0;c<a;c++)t._coordinates[c]=new uo}},pa={serialVersionUID:{configurable:!0}};la.prototype.setOrdinate=function(t,e,n){switch(e){case So.X:this._coordinates[t].x=n;break;case So.Y:this._coordinates[t].y=n;break;case So.Z:this._coordinates[t].z=n;break;default:throw new eo("invalid ordinateIndex")}},la.prototype.size=function(){return this._coordinates.length},la.prototype.getOrdinate=function(t,e){switch(e){case So.X:return this._coordinates[t].x;case So.Y:return this._coordinates[t].y;case So.Z:return this._coordinates[t].z}return no.NaN},la.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},la.prototype.getCoordinateCopy=function(t){return new uo(this._coordinates[t])},la.prototype.getDimension=function(){return this._dimension},la.prototype.getX=function(t){return this._coordinates[t].x},la.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new la(t,this._dimension)},la.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},la.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new la(t,this._dimension)},la.prototype.toString=function(){if(this._coordinates.length>0){var t=new _o(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},la.prototype.getY=function(t){return this._coordinates[t].y},la.prototype.toCoordinateArray=function(){return this._coordinates},la.prototype.interfaces_=function(){return[So,ao]},la.prototype.getClass=function(){return la},pa.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(la,pa);var fa=function(){},ha={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fa.prototype.readResolve=function(){return fa.instance()},fa.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new la(t)}if(go(arguments[0],So)){var e=arguments[0];return new la(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new la(n):new la(n,r)}},fa.prototype.interfaces_=function(){return[po,ao]},fa.prototype.getClass=function(){return fa},fa.instance=function(){return fa.instanceObject},ha.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ha.instanceObject.get=function(){return new fa},Object.defineProperties(fa,ha);var da=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new ls,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new ws;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(ms),ga=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ma){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},ya={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ga.prototype.equals=function(t){if(!(t instanceof ga))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},ga.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new vo(n).compareTo(new vo(r))},ga.prototype.getScale=function(){return this._scale},ga.prototype.isFloating=function(){return this._modelType===ga.FLOATING||this._modelType===ga.FLOATING_SINGLE},ga.prototype.getType=function(){return this._modelType},ga.prototype.toString=function(){var t="UNKNOWN";return this._modelType===ga.FLOATING?t="Floating":this._modelType===ga.FLOATING_SINGLE?t="Floating-Single":this._modelType===ga.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},ga.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(no.isNaN(t))return t;if(this._modelType===ga.FLOATING_SINGLE){return t}return this._modelType===ga.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof uo){var e=arguments[0];if(this._modelType===ga.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},ga.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===ga.FLOATING?t=16:this._modelType===ga.FLOATING_SINGLE?t=6:this._modelType===ga.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},ga.prototype.setScale=function(t){this._scale=Math.abs(t)},ga.prototype.interfaces_=function(){return[ao,io]},ga.prototype.getClass=function(){return ga},ga.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ya.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ya.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ga,ya);var ma=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},_a={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ma.prototype.readResolve=function(){return ma.nameToTypeMap.get(this._name)},ma.prototype.toString=function(){return this._name},ma.prototype.interfaces_=function(){return[ao]},ma.prototype.getClass=function(){return ma},_a.serialVersionUID.get=function(){return-552860263173159e4},_a.nameToTypeMap.get=function(){return new da},Object.defineProperties(ma,_a),ga.Type=ma,ga.FIXED=new ma("FIXED"),ga.FLOATING=new ma("FLOATING"),ga.FLOATING_SINGLE=new ma("FLOATING SINGLE");var va=function t(){this._precisionModel=new ga,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?go(arguments[0],po)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ga&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ba={serialVersionUID:{configurable:!0}};va.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new uo(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new uo(t.getMinX(),t.getMinY()),new uo(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new uo(t.getMinX(),t.getMinY()),new uo(t.getMinX(),t.getMaxY()),new uo(t.getMaxX(),t.getMaxY()),new uo(t.getMaxX(),t.getMinY()),new uo(t.getMinX(),t.getMinY())]),null)},va.prototype.createLineString=function(t){return t?t instanceof Array?new Qs(this.getCoordinateSequenceFactory().create(t),this):go(t,So)?new Qs(t,this):void 0:new Qs(this.getCoordinateSequenceFactory().create([]),this)},va.prototype.createMultiLineString=function(){if(0===arguments.length)return new $s(null,this);if(1===arguments.length){var t=arguments[0];return new $s(t,this)}},va.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(va.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof ea)return this.createMultiPolygon(va.toPolygonArray(t));if(a instanceof Qs)return this.createMultiLineString(va.toLineStringArray(t));if(a instanceof Zs)return this.createMultiPoint(va.toPointArray(t));Bo.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},va.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},va.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof uo){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(go(arguments[0],So)){var e=arguments[0];return new Zs(e,this)}}},va.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},va.prototype.createPolygon=function(){if(0===arguments.length)return new ea(null,null,this);if(1===arguments.length){if(go(arguments[0],So)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ra){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new ea(r,i,this)}},va.prototype.getSRID=function(){return this._SRID},va.prototype.createGeometryCollection=function(){if(0===arguments.length)return new js(null,this);if(1===arguments.length){var t=arguments[0];return new js(t,this)}},va.prototype.createGeometry=function(t){return new oa(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},va.prototype.getPrecisionModel=function(){return this._precisionModel},va.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(go(arguments[0],So)){var e=arguments[0];return new ra(e,this)}}},va.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ia(null,this);if(1===arguments.length){var t=arguments[0];return new ia(t,this)}},va.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new na(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new na(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(go(arguments[0],So)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=t.getCoordinateSequenceFactory().create(1,r.getDimension());Ks.copy(r,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},va.prototype.interfaces_=function(){return[ao]},va.prototype.getClass=function(){return va},va.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},va.getDefaultCoordinateSequenceFactory=function(){return fa.instance()},va.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},va.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ba.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(va,ba);var wa=function(){},xa={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Ea(t){this.message=t||""}function Ia(){this.array_=[]}wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa},wa.opposite=function(t){return t===wa.LEFT?wa.RIGHT:t===wa.RIGHT?wa.LEFT:t},xa.ON.get=function(){return 0},xa.LEFT.get=function(){return 1},xa.RIGHT.get=function(){return 2},Object.defineProperties(wa,xa),Ea.prototype=new Error,Ea.prototype.name="EmptyStackException",Ia.prototype=new us,Ia.prototype.add=function(t){return this.array_.push(t),!0},Ia.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ia.prototype.push=function(t){return this.array_.push(t),t},Ia.prototype.pop=function(t){if(0===this.array_.length)throw new Ea;return this.array_.pop()},Ia.prototype.peek=function(){if(0===this.array_.length)throw new Ea;return this.array_[this.array_.length-1]},Ia.prototype.empty=function(){return 0===this.array_.length},Ia.prototype.isEmpty=function(){return this.empty()},Ia.prototype.search=function(t){return this.array_.indexOf(t)},Ia.prototype.size=function(){return this.array_.length},Ia.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Sa=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Sa.prototype.getCoordinate=function(){return this._minCoord},Sa.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Sa.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Bo.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Ho.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Ho.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Ho.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Sa.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=wa.LEFT;return n[e].y<n[e+1].y&&(r=wa.RIGHT),r},Sa.prototype.getEdge=function(){return this._orientedDe},Sa.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Sa.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Sa.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Bo.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===wa.LEFT&&(this._orientedDe=this._minDe.getSym())},Sa.prototype.interfaces_=function(){return[]},Sa.prototype.getClass=function(){return Sa};var Ca=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new uo(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(jo),Na=function(){this.array_=[]};Na.prototype.addLast=function(t){this.array_.push(t)},Na.prototype.removeFirst=function(){return this.array_.shift()},Na.prototype.isEmpty=function(){return 0===this.array_.length};var Oa=function(){this._finder=null,this._dirEdgeList=new ls,this._nodes=new ls,this._rightMostCoord=null,this._env=null,this._finder=new Sa};Oa.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Oa.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Oa.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ca("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Oa.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(wa.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Oa.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Oa.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(wa.RIGHT)>=1&&e.getDepth(wa.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Oa.prototype.computeDepths=function(t){var e=new ws,n=new Na,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Oa.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Oa.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Po,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Oa.prototype.addReachable=function(t){var e=new Ia;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Oa.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(wa.LEFT,t.getDepth(wa.RIGHT)),e.setDepth(wa.RIGHT,t.getDepth(wa.LEFT))},Oa.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Oa.prototype.getNodes=function(){return this._nodes},Oa.prototype.getDirectedEdges=function(){return this._dirEdgeList},Oa.prototype.interfaces_=function(){return[io]},Oa.prototype.getClass=function(){return Oa};var Ta=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[wa.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[wa.ON]=s,this.location[wa.LEFT]=a,this.location[wa.RIGHT]=u}};Ta.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ta.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fo.NONE)return!1;return!0},Ta.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fo.NONE&&(this.location[e]=t)},Ta.prototype.isLine=function(){return 1===this.location.length},Ta.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[wa.ON]=this.location[wa.ON],e[wa.LEFT]=fo.NONE,e[wa.RIGHT]=fo.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fo.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ta.prototype.getLocations=function(){return this.location},Ta.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[wa.LEFT];this.location[wa.LEFT]=this.location[wa.RIGHT],this.location[wa.RIGHT]=t},Ta.prototype.toString=function(){var t=new _o;return this.location.length>1&&t.append(fo.toLocationSymbol(this.location[wa.LEFT])),t.append(fo.toLocationSymbol(this.location[wa.ON])),this.location.length>1&&t.append(fo.toLocationSymbol(this.location[wa.RIGHT])),t.toString()},Ta.prototype.setLocations=function(t,e,n){this.location[wa.ON]=t,this.location[wa.LEFT]=e,this.location[wa.RIGHT]=n},Ta.prototype.get=function(t){return t<this.location.length?this.location[t]:fo.NONE},Ta.prototype.isArea=function(){return this.location.length>1},Ta.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fo.NONE)return!0;return!1},Ta.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(wa.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ta.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fo.NONE)},Ta.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ta.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta};var La=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ta(e),this.elt[1]=new Ta(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ta(n.elt[0]),this.elt[1]=new Ta(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ta(fo.NONE),this.elt[1]=new Ta(fo.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Ta(o,s,a),this.elt[1]=new Ta(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],p=arguments[3];this.elt[0]=new Ta(fo.NONE,fo.NONE,fo.NONE),this.elt[1]=new Ta(fo.NONE,fo.NONE,fo.NONE),this.elt[u].setLocations(c,l,p)}};La.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},La.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},La.prototype.isNull=function(t){return this.elt[t].isNull()},La.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},La.prototype.isLine=function(t){return this.elt[t].isLine()},La.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ta(t.elt[e]):this.elt[e].merge(t.elt[e])},La.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},La.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(wa.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},La.prototype.toString=function(){var t=new _o;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},La.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},La.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},La.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(wa.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},La.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},La.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},La.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ta(this.elt[t].location[0]))},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La},La.toLineLabel=function(t){for(var e=new La(fo.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Pa=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ls,this._pts=new ls,this._label=new La(fo.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ls,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Pa.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Ho.isCCW(this._ring.getCoordinates())},Pa.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Pa.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ca("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ca("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();Bo.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Pa.prototype.getLinearRing=function(){return this._ring},Pa.prototype.getCoordinate=function(t){return this._pts.get(t)},Pa.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Pa.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Pa.prototype.isHole=function(){return this._isHole},Pa.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Pa.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ho.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},Pa.prototype.addHole=function(t){this._holes.add(t)},Pa.prototype.isShell=function(){return null===this._shell},Pa.prototype.getLabel=function(){return this._label},Pa.prototype.getEdges=function(){return this._edges},Pa.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Pa.prototype.getShell=function(){return this._shell},Pa.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,wa.RIGHT);if(r===fo.NONE)return null;if(this._label.getLocation(n)===fo.NONE)return this._label.setLocation(n,r),null}},Pa.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Pa.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa};var Ra=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pa),Aa=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new ls,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ra(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pa),Ma=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ma.prototype.setVisited=function(t){this._isVisited=t},Ma.prototype.setInResult=function(t){this._isInResult=t},Ma.prototype.isCovered=function(){return this._isCovered},Ma.prototype.isCoveredSet=function(){return this._isCoveredSet},Ma.prototype.setLabel=function(t){this._label=t},Ma.prototype.getLabel=function(){return this._label},Ma.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ma.prototype.updateIM=function(t){Bo.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ma.prototype.isInResult=function(){return this._isInResult},Ma.prototype.isVisited=function(){return this._isVisited},Ma.prototype.interfaces_=function(){return[]},Ma.prototype.getClass=function(){return Ma};var Da=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new La(0,fo.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fo.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==fo.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new La(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof La)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),s=t._label.getLocation(i);s===fo.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fo.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fo.BOUNDARY:n=fo.INTERIOR;break;case fo.INTERIOR:default:n=fo.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ma),ka=function(){this.nodeMap=new Os,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ka.prototype.find=function(t){return this.nodeMap.get(t)},ka.prototype.addNode=function(){if(arguments[0]instanceof uo){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Da){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ka.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},ka.prototype.iterator=function(){return this.nodeMap.values().iterator()},ka.prototype.values=function(){return this.nodeMap.values()},ka.prototype.getBoundaryNodes=function(t){for(var e=new ls,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===fo.BOUNDARY&&e.add(r)}return e},ka.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ka.prototype.interfaces_=function(){return[]},ka.prototype.getClass=function(){return ka};var Fa=function(){},ja={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa},Fa.isNorthern=function(t){return t===Fa.NE||t===Fa.NW},Fa.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Fa.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Fa.isInHalfPlane=function(t,e){return e===Fa.SE?t===Fa.SE||t===Fa.SW:t===e||t===e+1},Fa.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eo("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Fa.NE:Fa.SE:e>=0?Fa.NW:Fa.SW}if(arguments[0]instanceof uo&&arguments[1]instanceof uo){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new eo("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Fa.NE:Fa.SE:r.y>=n.y?Fa.NW:Fa.SW}},ja.NE.get=function(){return 0},ja.NW.get=function(){return 1},ja.SW.get=function(){return 2},ja.SE.get=function(){return 3},Object.defineProperties(Fa,ja);var $a=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};$a.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Ho.computeOrientation(t._p0,t._p1,this._p1)},$a.prototype.getDy=function(){return this._dy},$a.prototype.getCoordinate=function(){return this._p0},$a.prototype.setNode=function(t){this._node=t},$a.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},$a.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},$a.prototype.getDirectedCoordinate=function(){return this._p1},$a.prototype.getDx=function(){return this._dx},$a.prototype.getLabel=function(){return this._label},$a.prototype.getEdge=function(){return this._edge},$a.prototype.getQuadrant=function(){return this._quadrant},$a.prototype.getNode=function(){return this._node},$a.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},$a.prototype.computeLabel=function(t){},$a.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Fa.quadrant(this._dx,this._dy),Bo.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},$a.prototype.interfaces_=function(){return[io]},$a.prototype.getClass=function(){return $a};var Ba=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new La(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ca("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,wa.LEFT)===fo.INTERIOR&&this._label.getLocation(e,wa.RIGHT)===fo.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[wa.LEFT]+"/"+this._depth[wa.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fo.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fo.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===wa.LEFT&&(r=-1);var i=wa.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fo.EXTERIOR&&e===fo.INTERIOR?1:t===fo.INTERIOR&&e===fo.EXTERIOR?-1:0},e}($a),Ua=function(){};Ua.prototype.createNode=function(t){return new Da(t,null)},Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua};var qa=function(){if(this._edges=new ls,this._nodes=null,this._edgeEndList=new ls,0===arguments.length)this._nodes=new ka(new Ua);else if(1===arguments.length){var t=arguments[0];this._nodes=new ka(t)}};qa.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qa.prototype.find=function(t){return this._nodes.find(t)},qa.prototype.addNode=function(){if(arguments[0]instanceof Da){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof uo){var e=arguments[0];return this._nodes.addNode(e)}},qa.prototype.getNodeIterator=function(){return this._nodes.iterator()},qa.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},qa.prototype.debugPrintln=function(t){To.out.println(t)},qa.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===fo.BOUNDARY},qa.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},qa.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&(Ho.computeOrientation(t,e,r)===Ho.COLLINEAR&&Fa.quadrant(t,e)===Fa.quadrant(n,r))},qa.prototype.getEdgeEnds=function(){return this._edgeEndList},qa.prototype.debugPrint=function(t){To.out.print(t)},qa.prototype.getEdgeIterator=function(){return this._edges.iterator()},qa.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},qa.prototype.insertEdge=function(t){this._edges.add(t)},qa.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qa.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ba(n,!0),i=new Ba(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},qa.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qa.prototype.getNodes=function(){return this._nodes.values()},qa.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},qa.prototype.interfaces_=function(){return[]},qa.prototype.getClass=function(){return qa},qa.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var Ga=function(){this._geometryFactory=null,this._shellList=new ls;var t=arguments[0];this._geometryFactory=t};Ga.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ga.prototype.computePolygons=function(t){for(var e=new ls,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ga.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ca("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ga.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new ls,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Ga.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},Ga.prototype.buildMaximalEdgeRings=function(t){for(var e=new ls,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Aa(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ga.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ga.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ga.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var p=!1;l.contains(r)&&Ho.isPointInRing(i,c.getCoordinates())&&(p=!0),p&&(null===o||s.contains(l))&&(o=u)}return o},Ga.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Bo.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ga.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qa.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new ls,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ga.prototype.interfaces_=function(){return[]},Ga.prototype.getClass=function(){return Ga};var za=function(){};za.prototype.getBounds=function(){},za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za};var Va=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Va.prototype.getItem=function(){return this._item},Va.prototype.getBounds=function(){return this._bounds},Va.prototype.interfaces_=function(){return[za,ao]},Va.prototype.getClass=function(){return Va};var Ha=function(){this._size=null,this._items=null,this._size=0,this._items=new ls,this._items.add(null)};Ha.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ha.prototype.size=function(){return this._size},Ha.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Ha.prototype.clear=function(){this._size=0,this._items.clear()},Ha.prototype.isEmpty=function(){return 0===this._size},Ha.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha};var Ya=function(){};Ya.prototype.visitItem=function(t){},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var Xa=function(){};Xa.prototype.insert=function(t,e){},Xa.prototype.remove=function(t,e){},Xa.prototype.query=function(){},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa};var Wa=function(){if(this._childBoundables=new ls,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ka={serialVersionUID:{configurable:!0}};Wa.prototype.getLevel=function(){return this._level},Wa.prototype.size=function(){return this._childBoundables.size()},Wa.prototype.getChildBoundables=function(){return this._childBoundables},Wa.prototype.addChildBoundable=function(t){Bo.isTrue(null===this._bounds),this._childBoundables.add(t)},Wa.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Wa.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Wa.prototype.interfaces_=function(){return[za,ao]},Wa.prototype.getClass=function(){return Wa},Ka.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Wa,Ka);var Qa=function(){};Qa.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qa.min=function(t){return Qa.sort(t),t.get(0)},Qa.sort=function(t,e){var n=t.toArray();e?As.sort(n,e):As.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qa.singletonList=function(t){var e=new ls;return e.add(t),e};var Ja=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Ja.prototype.expandToQueue=function(t,e){var n=Ja.isComposite(this._boundable1),r=Ja.isComposite(this._boundable2);if(n&&r)return Ja.area(this._boundable1)>Ja.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new eo("neither boundable is composite")},Ja.prototype.isLeaves=function(){return!(Ja.isComposite(this._boundable1)||Ja.isComposite(this._boundable2))},Ja.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Ja.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new Ja(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},Ja.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Ja.prototype.getDistance=function(){return this._distance},Ja.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ja.prototype.interfaces_=function(){return[io]},Ja.prototype.getClass=function(){return Ja},Ja.area=function(t){return t.getBounds().getArea()},Ja.isComposite=function(t){return t instanceof Wa};var Za=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new ls,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Bo.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},tu={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Za.prototype.getNodeCapacity=function(){return this._nodeCapacity},Za.prototype.lastNode=function(t){return t.get(t.size()-1)},Za.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Wa?n+=t.size(i):i instanceof Va&&(n+=1)}return n}},Za.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Va&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Za.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new ls:e}if(1===arguments.length){for(var n=arguments[0],r=new ls,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Wa){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof Va?r.add(o.getItem()):Bo.shouldNeverReachHere()}return r.size()<=0?null:r}},Za.prototype.insert=function(t,e){Bo.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Va(t,e))},Za.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new ls;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(Bo.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Wa?t.boundablesAtLevel(r,a,o):(Bo.isTrue(a instanceof Va),-1===r&&o.add(a))}return null}},Za.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new ls;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(go(arguments[2],Ya)&&arguments[0]instanceof Object&&arguments[1]instanceof Wa)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),c=0;c<u.size();c++){var l=u.get(c);t.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof Wa?t.query(o,l,a):l instanceof Va?a.visitItem(l.getItem()):Bo.shouldNeverReachHere())}else if(go(arguments[2],us)&&arguments[0]instanceof Object&&arguments[1]instanceof Wa)for(var p=arguments[0],f=arguments[1],h=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var y=d.get(g);t.getIntersectsOp().intersects(y.getBounds(),p)&&(y instanceof Wa?t.query(p,y,h):y instanceof Va?h.add(y.getItem()):Bo.shouldNeverReachHere())}},Za.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Za.prototype.getRoot=function(){return this.build(),this._root},Za.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var c=u.next();if(t.getIntersectsOp().intersects(c.getBounds(),r)&&(c instanceof Wa&&(s=t.remove(r,c,o)))){a=c;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},Za.prototype.createHigherLevels=function(t,e){Bo.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Za.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Wa){var o=t.depth(i);o>n&&(n=o)}}return n+1}},Za.prototype.createParentBoundables=function(t,e){Bo.isTrue(!t.isEmpty());var n=new ls;n.add(this.createNode(e));var r=new ls(t);Qa.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Za.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Za.prototype.interfaces_=function(){return[ao]},Za.prototype.getClass=function(){return Za},Za.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},tu.IntersectsOp.get=function(){return eu},tu.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},tu.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Za,tu);var eu=function(){},nu=function(){};nu.prototype.distance=function(t,e){},nu.prototype.interfaces_=function(){return[]},nu.prototype.getClass=function(){return nu};var ru=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Bo.isTrue(t.length>0);for(var n=new ls,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new iu(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new ls;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(go(arguments[2],Ya)&&arguments[0]instanceof Object&&arguments[1]instanceof Wa){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(go(arguments[2],us)&&arguments[0]instanceof Object&&arguments[1]instanceof Wa){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Bo.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new ls(t);Qa.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(go(arguments[0],nu)){var t=arguments[0],n=new Ja(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Ja){var r=arguments[0];return this.nearestNeighbour(r,no.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&go(arguments[1],nu)){var i=arguments[0],o=arguments[1],s=new Ja(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof Ja&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=u,l=null,p=new Ha;for(p.add(a);!p.isEmpty()&&c>0;){var f=p.poll(),h=f.getDistance();if(h>=c)break;f.isLeaves()?(c=h,l=f):f.expandToQueue(p,c)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=new Va(d,g),_=new Ja(this.getRoot(),m,y);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[Xa,ao]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return iu},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[so]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[so]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Za),iu=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Po(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wa),ou=function(){};ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou},ou.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ou.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ou.relativeSign(e.x,n.x),i=ou.relativeSign(e.y,n.y);switch(t){case 0:return ou.compareValue(r,i);case 1:return ou.compareValue(i,r);case 2:return ou.compareValue(i,-r);case 3:return ou.compareValue(-r,i);case 4:return ou.compareValue(-r,-i);case 5:return ou.compareValue(-i,-r);case 6:return ou.compareValue(-i,r);case 7:return ou.compareValue(r,-i)}return Bo.shouldNeverReachHere("invalid octant value"),0},ou.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var su=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new uo(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};su.prototype.getCoordinate=function(){return this.coord},su.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},su.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ou.compare(this._segmentOctant,this.coord,e.coord)},su.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},su.prototype.isInterior=function(){return this._isInterior},su.prototype.interfaces_=function(){return[io]},su.prototype.getClass=function(){return su};var au=function(){this._nodeMap=new Os,this._edge=null;var t=arguments[0];this._edge=t};au.prototype.getSplitCoordinates=function(){var t=new fs;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},au.prototype.addCollapsedNodes=function(){var t=new ls;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},au.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},au.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new vo(e+1))}},au.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new uo(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new uo(e.coord))},au.prototype.iterator=function(){return this._nodeMap.values().iterator()},au.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},au.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},au.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new vo(e[0])),r=i}},au.prototype.getEdge=function(){return this._edge},au.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},au.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uo(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new uo(e.coord)),new pu(o,this._edge.getData())},au.prototype.add=function(t,e){var n=new su(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Bo.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},au.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new jo("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new jo("bad split edge end point at "+i)},au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au};var uu=function(){};uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu},uu.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eo("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof uo&&arguments[1]instanceof uo){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new eo("Cannot compute the octant for two identical points "+i);return uu.octant(s,a)}};var cu=function(){};cu.prototype.getCoordinates=function(){},cu.prototype.size=function(){},cu.prototype.getCoordinate=function(t){},cu.prototype.isClosed=function(){},cu.prototype.setData=function(t){},cu.prototype.getData=function(){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var lu=function(){};lu.prototype.addIntersection=function(t,e){},lu.prototype.interfaces_=function(){return[cu]},lu.prototype.getClass=function(){return lu};var pu=function(){this._nodeList=new au(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};pu.prototype.getCoordinates=function(){return this._pts},pu.prototype.size=function(){return this._pts.length},pu.prototype.getCoordinate=function(t){return this._pts[t]},pu.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pu.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},pu.prototype.setData=function(t){this._data=t},pu.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:uu.octant(t,e)},pu.prototype.getData=function(){return this._data},pu.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new uo(n.getIntersection(i));this.addIntersection(o,r)}},pu.prototype.toString=function(){return Fo.toLineString(new la(this._pts))},pu.prototype.getNodeList=function(){return this._nodeList},pu.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},pu.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},pu.prototype.interfaces_=function(){return[lu]},pu.prototype.getClass=function(){return pu},pu.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new ls;return pu.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var fu=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new uo,this.p1=new uo;else if(1===arguments.length){var t=arguments[0];this.p0=new uo(t.p0),this.p1=new uo(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new uo(e,n),this.p1=new uo(r,i)}},hu={serialVersionUID:{configurable:!0}};fu.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},fu.prototype.orientationIndex=function(){if(arguments[0]instanceof fu){var t=arguments[0],e=Ho.orientationIndex(this.p0,this.p1,t.p0),n=Ho.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof uo){var r=arguments[0];return Ho.orientationIndex(this.p0,this.p1,r)}},fu.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},fu.prototype.isVertical=function(){return this.p0.x===this.p1.x},fu.prototype.equals=function(t){if(!(t instanceof fu))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},fu.prototype.intersection=function(t){var e=new Go;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},fu.prototype.project=function(){if(arguments[0]instanceof uo){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new uo(t);var e=this.projectionFactor(t),n=new uo;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof fu){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new fu(s,a)}},fu.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},fu.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},fu.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},fu.prototype.distancePerpendicular=function(t){return Ho.distancePointLinePerpendicular(t,this.p0,this.p1)},fu.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},fu.prototype.midPoint=function(){return fu.midPoint(this.p0,this.p1)},fu.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?no.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},fu.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=no.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},fu.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},fu.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},fu.prototype.getLength=function(){return this.p0.distance(this.p1)},fu.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},fu.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},fu.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},fu.prototype.lineIntersection=function(t){try{return Lo.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Oo))throw t}return null},fu.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},fu.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new uo(n-u,r+a)},fu.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},fu.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||no.isNaN(e))&&(e=1),e},fu.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},fu.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},fu.prototype.distance=function(){if(arguments[0]instanceof fu){var t=arguments[0];return Ho.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof uo){var e=arguments[0];return Ho.distancePointLine(e,this.p0,this.p1)}},fu.prototype.pointAlong=function(t){var e=new uo;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},fu.prototype.hashCode=function(){var t=no.doubleToLongBits(this.p0.x);t^=31*no.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=no.doubleToLongBits(this.p1.x);return n^=31*no.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},fu.prototype.interfaces_=function(){return[io,ao]},fu.prototype.getClass=function(){return fu},fu.midPoint=function(t,e){return new uo((t.x+e.x)/2,(t.y+e.y)/2)},hu.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(fu,hu);var du=function(){this.tempEnv1=new Po,this.tempEnv2=new Po,this._overlapSeg1=new fu,this._overlapSeg2=new fu};du.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var gu=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};gu.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},gu.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},gu.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},gu.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},gu.prototype.setId=function(t){this._id=t},gu.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},gu.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Po(t,e)}return this._env},gu.prototype.getEndIndex=function(){return this._end},gu.prototype.getStartIndex=function(){return this._start},gu.prototype.getContext=function(){return this._context},gu.prototype.getId=function(){return this._id},gu.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),p=Math.trunc((r+i)/2);t<l&&(r<p&&this.computeOverlapsInternal(t,l,n,r,p,o),p<i&&this.computeOverlapsInternal(t,l,n,p,i,o)),l<e&&(r<p&&this.computeOverlapsInternal(l,e,n,r,p,o),p<i&&this.computeOverlapsInternal(l,e,n,p,i,o))},gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.getChainStartIndices=function(t){var e=0,n=new ls;n.add(new vo(e));do{var r=yu.findChainEnd(t,e);n.add(new vo(r)),e=r}while(e<t.length-1);return yu.toIntArray(n)},yu.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Fa.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(Fa.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},yu.getChains=function(){if(1===arguments.length){var t=arguments[0];return yu.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new ls,i=yu.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new gu(e,i[o],i[o+1],n);r.add(s)}return r}},yu.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var mu=function(){};mu.prototype.computeNodes=function(t){},mu.prototype.getNodedSubstrings=function(){},mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu};var _u=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};_u.prototype.setSegmentIntersector=function(t){this._segInt=t},_u.prototype.interfaces_=function(){return[mu]},_u.prototype.getClass=function(){return _u};var vu=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new ls,this._index=new ru,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return pu.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yu.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new bu(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return bu},Object.defineProperties(e,n),e}(_u),bu=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(du),wu=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},xu={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};wu.prototype.getEndCapStyle=function(){return this._endCapStyle},wu.prototype.isSingleSided=function(){return this._isSingleSided},wu.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=wu.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=wu.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==wu.JOIN_ROUND&&(this._quadrantSegments=wu.DEFAULT_QUADRANT_SEGMENTS)},wu.prototype.getJoinStyle=function(){return this._joinStyle},wu.prototype.setJoinStyle=function(t){this._joinStyle=t},wu.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},wu.prototype.getSimplifyFactor=function(){return this._simplifyFactor},wu.prototype.getQuadrantSegments=function(){return this._quadrantSegments},wu.prototype.setEndCapStyle=function(t){this._endCapStyle=t},wu.prototype.getMitreLimit=function(){return this._mitreLimit},wu.prototype.setMitreLimit=function(t){this._mitreLimit=t},wu.prototype.setSingleSided=function(t){this._isSingleSided=t},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},xu.CAP_ROUND.get=function(){return 1},xu.CAP_FLAT.get=function(){return 2},xu.CAP_SQUARE.get=function(){return 3},xu.JOIN_ROUND.get=function(){return 1},xu.JOIN_MITRE.get=function(){return 2},xu.JOIN_BEVEL.get=function(){return 3},xu.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},xu.DEFAULT_MITRE_LIMIT.get=function(){return 5},xu.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(wu,xu);var Eu=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ho.COUNTERCLOCKWISE,this._inputLine=t||null},Iu={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Eu.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r))},Eu.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Eu.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Eu.prototype.isShallowConcavity=function(t,e,n,r){return Ho.computeOrientation(t,e,n)===this._angleOrientation&&Ho.distancePointLine(e,t,n)<r},Eu.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Eu.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Eu.prototype.isConcave=function(t,e,n){var r=Ho.computeOrientation(t,e,n)===this._angleOrientation;return r},Eu.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Ho.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Eu.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Eu.DELETE;)e++;return e},Eu.prototype.isShallow=function(t,e,n,r){return Ho.distancePointLine(e,t,n)<r},Eu.prototype.collapseLine=function(){for(var t=new fs,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Eu.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.simplify=function(t,e){return new Eu(t).simplify(e)},Iu.INIT.get=function(){return 0},Iu.DELETE.get=function(){return 1},Iu.KEEP.get=function(){return 1},Iu.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Eu,Iu);var Su=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ls},Cu={COORDINATE_ARRAY_TYPE:{configurable:!0}};Su.prototype.getCoordinates=function(){return this._ptList.toArray(Su.COORDINATE_ARRAY_TYPE)},Su.prototype.setPrecisionModel=function(t){this._precisionModel=t},Su.prototype.addPt=function(t){var e=new uo(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Su.prototype.revere=function(){},Su.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Su.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Su.prototype.toString=function(){return(new va).createLineString(this.getCoordinates()).toString()},Su.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new uo(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Su.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Cu.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Su,Cu);var Nu=function(){},Ou={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.toDegrees=function(t){return 180*t/Math.PI},Nu.normalize=function(t){for(;t>Math.PI;)t-=Nu.PI_TIMES_2;for(;t<=-Math.PI;)t+=Nu.PI_TIMES_2;return t},Nu.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Nu.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Nu.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Nu.interiorAngle=function(t,e,n){var r=Nu.angle(e,t),i=Nu.angle(e,n);return Math.abs(i-r)},Nu.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Nu.PI_TIMES_2;t>=Nu.PI_TIMES_2&&(t=0)}else{for(;t>=Nu.PI_TIMES_2;)t-=Nu.PI_TIMES_2;t<0&&(t=0)}return t},Nu.angleBetween=function(t,e,n){var r=Nu.angle(e,t),i=Nu.angle(e,n);return Nu.diff(r,i)},Nu.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Nu.toRadians=function(t){return t*Math.PI/180},Nu.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Nu.COUNTERCLOCKWISE:n<0?Nu.CLOCKWISE:Nu.NONE},Nu.angleBetweenOriented=function(t,e,n){var r=Nu.angle(e,t),i=Nu.angle(e,n)-r;return i<=-Math.PI?i+Nu.PI_TIMES_2:i>Math.PI?i-Nu.PI_TIMES_2:i},Ou.PI_TIMES_2.get=function(){return 2*Math.PI},Ou.PI_OVER_2.get=function(){return Math.PI/2},Ou.PI_OVER_4.get=function(){return Math.PI/4},Ou.COUNTERCLOCKWISE.get=function(){return Ho.COUNTERCLOCKWISE},Ou.CLOCKWISE.get=function(){return Ho.CLOCKWISE},Ou.NONE.get=function(){return Ho.COLLINEAR},Object.defineProperties(Nu,Ou);var Tu=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new fu,this._seg1=new fu,this._offset0=new fu,this._offset1=new fu,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Go,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===wu.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Lu={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Tu.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Ho.computeOrientation(this._s0,this._s1,this._s2),r=n===Ho.CLOCKWISE&&this._side===wa.LEFT||n===Ho.COUNTERCLOCKWISE&&this._side===wa.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Tu.prototype.addLineEndCap=function(t,e){var n=new fu(t,e),r=new fu;this.computeOffsetSegment(n,wa.LEFT,this._distance,r);var i=new fu;this.computeOffsetSegment(n,wa.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case wu.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Ho.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case wu.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case wu.CAP_SQUARE:var u=new uo;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new uo(r.p1.x+u.x,r.p1.y+u.y),l=new uo(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Tu.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Tu.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Lo.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Oo))throw t;o=new uo(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Tu.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===Ho.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},Tu.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Tu.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===wu.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===wu.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Tu.prototype.createSquare=function(t){this._segList.addPt(new uo(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new uo(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new uo(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new uo(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Tu.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Tu.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Tu.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Tu.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Tu.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Nu.angle(i,this._seg0.p0),s=Nu.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Nu.normalize(o+s),u=Nu.normalize(a+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(s)),p=i.x+c*Math.cos(u),f=i.y+c*Math.sin(u),h=new uo(p,f),d=new fu(i,h),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===wa.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Tu.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===wa.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Tu.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Ho.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new uo;c<s;){var p=e+o*c;l.x=t.x+i*Math.cos(p),l.y=t.y+i*Math.sin(p),this._segList.addPt(l),c+=u}},Tu.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Tu.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new uo((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new uo((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Tu.prototype.createCircle=function(t){var e=new uo(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Tu.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Tu.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Su,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Tu.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Tu.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===wu.JOIN_BEVEL||this._bufParams.getJoinStyle()===wu.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Ho.CLOCKWISE,this._distance))},Tu.prototype.closeRing=function(){this._segList.closeRing()},Tu.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu},Lu.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Lu.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Lu.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Lu.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Tu,Lu);var Pu=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Pu.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&hs.reverse(o),o},Pu.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Eu.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],wa.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Eu.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],wa.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Pu.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===wa.RIGHT&&(r=-r);var i=Eu.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Pu.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Eu.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],wa.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Eu.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],wa.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Pu.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case wu.CAP_ROUND:e.createCircle(t);break;case wu.CAP_SQUARE:e.createSquare(t)}},Pu.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Pu.prototype.getBufferParameters=function(){return this._bufParams},Pu.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Pu.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Pu.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Pu.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Eu.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],wa.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Eu.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],wa.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Pu.prototype.getSegGen=function(t){return new Tu(this._precisionModel,this._bufParams,t)},Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},Pu.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new uo(t[n]);return e};var Ru=function(){this._subgraphs=null,this._seg=new fu,this._cga=new Ho;var t=arguments[0];this._subgraphs=t},Au={DepthSegment:{configurable:!0}};Ru.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new ls,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(go(arguments[2],us)&&arguments[0]instanceof uo&&arguments[1]instanceof Ba)for(var s=arguments[0],a=arguments[1],u=arguments[2],c=a.getEdge().getCoordinates(),l=0;l<c.length-1;l++){t._seg.p0=c[l],t._seg.p1=c[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var p=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(p<s.x)&&!(t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Ho.computeOrientation(t._seg.p0,t._seg.p1,s)===Ho.RIGHT)){var f=a.getDepth(wa.LEFT);t._seg.p0.equals(c[l])||(f=a.getDepth(wa.RIGHT));var h=new Mu(t._seg,f);u.add(h)}}else if(go(arguments[2],us)&&arguments[0]instanceof uo&&go(arguments[1],us))for(var d=arguments[0],g=arguments[1],y=arguments[2],m=g.iterator();m.hasNext();){var _=m.next();_.isForward()&&t.findStabbedSegments(d,_,y)}},Ru.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qa.min(e)._leftDepth},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru},Au.DepthSegment.get=function(){return Mu},Object.defineProperties(Ru,Au);var Mu=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new fu(t),this._leftDepth=e};Mu.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Mu.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Mu.prototype.toString=function(){return this._upwardSeg.toString()},Mu.prototype.interfaces_=function(){return[io]},Mu.prototype.getClass=function(){return Mu};var Du=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Du.prototype.area=function(){return Du.area(this.p0,this.p1,this.p2)},Du.prototype.signedArea=function(){return Du.signedArea(this.p0,this.p1,this.p2)},Du.prototype.interpolateZ=function(t){if(null===t)throw new eo("Supplied point is null.");return Du.interpolateZ(t,this.p0,this.p1,this.p2)},Du.prototype.longestSideLength=function(){return Du.longestSideLength(this.p0,this.p1,this.p2)},Du.prototype.isAcute=function(){return Du.isAcute(this.p0,this.p1,this.p2)},Du.prototype.circumcentre=function(){return Du.circumcentre(this.p0,this.p1,this.p2)},Du.prototype.area3D=function(){return Du.area3D(this.p0,this.p1,this.p2)},Du.prototype.centroid=function(){return Du.centroid(this.p0,this.p1,this.p2)},Du.prototype.inCentre=function(){return Du.inCentre(this.p0,this.p1,this.p2)},Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Du.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Du.det=function(t,e,n,r){return t*r-e*n},Du.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,p=t.x-i,f=t.y-o,h=(c*p-a*f)/l,d=(-u*p+s*f)/l;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},Du.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Du.isAcute=function(t,e,n){return!!Nu.isAcute(t,e,n)&&(!!Nu.isAcute(e,n,t)&&!!Nu.isAcute(n,t,e))},Du.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*Du.det(o,s,a,u),l=Du.det(s,o*o+s*s,u,a*a+u*u),p=Du.det(o,o*o+s*s,a,a*a+u*u);return new uo(r-l/c,i+p/c)},Du.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Lo(t.x+n/2,t.y+r/2,1),o=new Lo(t.x-r+n/2,t.y+n+r/2,1);return new Lo(i,o)},Du.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new uo(t.x+i*o,t.y+i*s)},Du.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,p=r*a-i*s,f=c*c+l*l+p*p,h=Math.sqrt(f)/2;return h},Du.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new uo(r,i)},Du.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new uo(a,u)};var ku=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ls;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};ku.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fo.EXTERIOR,fo.INTERIOR)},ku.prototype.addPolygon=function(t){var e=this._distance,n=wa.LEFT;this._distance<0&&(e=-this._distance,n=wa.RIGHT);var r=t.getExteriorRing(),i=hs.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,fo.EXTERIOR,fo.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=hs.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,wa.opposite(n),fo.INTERIOR,fo.EXTERIOR)}},ku.prototype.isTriangleErodedCompletely=function(t,e){var n=new Du(t[0],t[1],t[2]),r=n.inCentre();return Ho.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},ku.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=hs.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fo.EXTERIOR,fo.INTERIOR)},ku.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new pu(t,new La(0,fo.BOUNDARY,e,n));this._curveList.add(r)},ku.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},ku.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ra.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ra.MINIMUM_VALID_SIZE&&Ho.isCCW(t)&&(o=i,s=r,n=wa.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},ku.prototype.add=function(t){if(t.isEmpty())return null;t instanceof ea?this.addPolygon(t):t instanceof Qs?this.addLineString(t):t instanceof Zs?this.addPoint(t):(t instanceof na||t instanceof $s||t instanceof ia||t instanceof js)&&this.addCollection(t)},ku.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},ku.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku};var Fu=function(){};Fu.prototype.locate=function(t){},Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu};var ju=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};ju.prototype.next=function(){if(this._atStart)return this._atStart=!1,ju.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new cs;var t=this._parent.getGeometryN(this._index++);return t instanceof js?(this._subcollectionIterator=new ju(t),this._subcollectionIterator.next()):t},ju.prototype.remove=function(){throw new Error(this.getClass().getName())},ju.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ju.prototype.interfaces_=function(){return[as]},ju.prototype.getClass=function(){return ju},ju.isAtomic=function(t){return!(t instanceof js)};var $u=function(){this._geom=null;var t=arguments[0];this._geom=t};$u.prototype.locate=function(t){return $u.locate(t,this._geom)},$u.prototype.interfaces_=function(){return[Fu]},$u.prototype.getClass=function(){return $u},$u.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Ho.isPointInRing(t,e.getCoordinates())},$u.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!$u.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if($u.isPointInRing(t,i))return!1}return!0},$u.containsPoint=function(t,e){if(e instanceof ea)return $u.containsPointInPolygon(t,e);if(e instanceof js)for(var n=new ju(e);n.hasNext();){var r=n.next();if(r!==e&&$u.containsPoint(t,r))return!0}return!1},$u.locate=function(t,e){return e.isEmpty()?fo.EXTERIOR:$u.containsPoint(t,e)?fo.INTERIOR:fo.EXTERIOR};var Bu=function(){this._edgeMap=new Os,this._edgeList=null,this._ptInAreaLocation=[fo.NONE,fo.NONE]};Bu.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Bu.prototype.propagateSideLabels=function(t){for(var e=fo.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,wa.LEFT)!==fo.NONE&&(e=r.getLocation(t,wa.LEFT))}if(e===fo.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,wa.ON)===fo.NONE&&a.setLocation(t,wa.ON,i),a.isArea(t)){var u=a.getLocation(t,wa.LEFT),c=a.getLocation(t,wa.RIGHT);if(c!==fo.NONE){if(c!==i)throw new Ca("side location conflict",s.getCoordinate());u===fo.NONE&&Bo.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Bo.isTrue(a.getLocation(t,wa.LEFT)===fo.NONE,"found single null side"),a.setLocation(t,wa.RIGHT,i),a.setLocation(t,wa.LEFT,i)}}},Bu.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Bu.prototype.print=function(t){To.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Bu.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Bu.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,wa.LEFT);Bo.isTrue(r!==fo.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Bo.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,wa.LEFT),u=s.getLocation(t,wa.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Bu.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},Bu.prototype.iterator=function(){return this.getEdges().iterator()},Bu.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new ls(this._edgeMap.values())),this._edgeList},Bu.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fo.NONE&&(this._ptInAreaLocation[t]=$u.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Bu.prototype.toString=function(){var t=new _o;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Bu.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},Bu.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===fo.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=fo.NONE;if(e[u])c=fo.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},Bu.prototype.getDegree=function(){return this._edgeMap.size()},Bu.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Bu.prototype.interfaces_=function(){return[]},Bu.prototype.getClass=function(){return Bu};var Uu=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ca("no outgoing dirEdge found",this.getCoordinate());Bo.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Fa.isNorthern(i)&&Fa.isNorthern(o)?n:Fa.isNorthern(i)||Fa.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Bo.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){To.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ls;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(wa.LEFT),i=e.getDepth(wa.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),s=this.computeDepths(0,n,o);if(s!==i)throw new Ca("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=c,p=a;p<u;p++){var f=t._edgeList.get(p);f.setEdgeDepths(wa.RIGHT,l),l=f.getDepth(wa.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Bo.isTrue(null!==e,"found null for first outgoing dirEdge"),Bo.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fo.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fo.INTERIOR;break}if(r.isInResult()){t=fo.EXTERIOR;break}}}if(t===fo.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===fo.INTERIOR):(s.isInResult()&&(i=fo.EXTERIOR),a.isInResult()&&(i=fo.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new La(fo.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==fo.INTERIOR&&o!==fo.BOUNDARY||this._label.setLocation(i,fo.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bu),qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Da(t,new Uu)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ua),Gu=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Gu.prototype.compareTo=function(t){var e=t;return Gu.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Gu.prototype.interfaces_=function(){return[io]},Gu.prototype.getClass=function(){return Gu},Gu.orientation=function(t){return 1===hs.increasingDirection(t)},Gu.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var p=(u+=i)===s,f=(c+=o)===a;if(p&&!f)return-1;if(!p&&f)return 1;if(p&&f)return 0}};var zu=function(){this._edges=new ls,this._ocaMap=new Os};zu.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},zu.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},zu.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},zu.prototype.iterator=function(){return this._edges.iterator()},zu.prototype.getEdges=function(){return this._edges},zu.prototype.get=function(t){return this._edges.get(t)},zu.prototype.findEqualEdge=function(t){var e=new Gu(t.getCoordinates());return this._ocaMap.get(e)},zu.prototype.add=function(t){this._edges.add(t);var e=new Gu(t.getCoordinates());this._ocaMap.put(e,t)},zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu};var Vu=function(){};Vu.prototype.processIntersections=function(t,e,n,r){},Vu.prototype.isDone=function(){},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu};var Hu=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Hu.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Hu.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Hu.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Hu.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Hu.prototype.getLineIntersector=function(){return this._li},Hu.prototype.hasProperIntersection=function(){return this._hasProper},Hu.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Hu.prototype.hasIntersection=function(){return this._hasIntersection},Hu.prototype.isDone=function(){return!1},Hu.prototype.hasInteriorIntersection=function(){return this._hasInterior},Hu.prototype.interfaces_=function(){return[Vu]},Hu.prototype.getClass=function(){return Hu},Hu.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Yu=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new uo(t),this.segmentIndex=e,this.dist=n};Yu.prototype.getSegmentIndex=function(){return this.segmentIndex},Yu.prototype.getCoordinate=function(){return this.coord},Yu.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Yu.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Yu.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Yu.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Yu.prototype.getDistance=function(){return this.dist},Yu.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Yu.prototype.interfaces_=function(){return[io]},Yu.prototype.getClass=function(){return Yu};var Xu=function(){this._nodeMap=new Os,this.edge=null;var t=arguments[0];this.edge=t};Xu.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Xu.prototype.iterator=function(){return this._nodeMap.values().iterator()},Xu.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Xu.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Xu.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uo(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Zu(o,new La(this.edge._label))},Xu.prototype.add=function(t,e,n){var r=new Yu(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Xu.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu};var Wu=function(){};Wu.prototype.getChainStartIndices=function(t){var e=0,n=new ls;n.add(new vo(e));do{var r=this.findChainEnd(t,e);n.add(new vo(r)),e=r}while(e<t.length-1);return Wu.toIntArray(n)},Wu.prototype.findChainEnd=function(t,e){for(var n=Fa.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Fa.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu},Wu.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ku=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Po,this.env2=new Po;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Wu;this.startIndex=e.getChainStartIndices(this.pts)};Ku.prototype.getCoordinates=function(){return this.pts},Ku.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Ku.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Ku.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],p=this.pts[o],f=s.pts[a],h=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,p),this.env2.init(f,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,c),g<u&&this.computeIntersectsForChain(i,d,s,g,u,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<u&&this.computeIntersectsForChain(d,o,s,g,u,c))}},Ku.prototype.getStartIndexes=function(){return this.startIndex},Ku.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Ku.prototype.interfaces_=function(){return[]},Ku.prototype.getClass=function(){return Ku};var Qu=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Ju={NULL_VALUE:{configurable:!0}};Qu.prototype.getDepth=function(t,e){return this._depth[t][e]},Qu.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Qu.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==Qu.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===Qu.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Qu.NULL_VALUE}},Qu.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Qu.prototype.getDelta=function(t){return this._depth[t][wa.RIGHT]-this._depth[t][wa.LEFT]},Qu.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fo.EXTERIOR:fo.INTERIOR},Qu.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Qu.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==fo.EXTERIOR&&i!==fo.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=Qu.depthAtLocation(i):t._depth[n][r]+=Qu.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===fo.INTERIOR&&this._depth[o][s]++}},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu},Qu.depthAtLocation=function(t){return t===fo.EXTERIOR?0:t===fo.INTERIOR?1:Qu.NULL_VALUE},Ju.NULL_VALUE.get=function(){return-1},Object.defineProperties(Qu,Ju);var Zu=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Xu(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qu,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,La.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ku(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Po;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new uo(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new _o;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,wa.ON),e.getLocation(1,wa.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,wa.LEFT),e.getLocation(1,wa.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,wa.RIGHT),e.getLocation(1,wa.RIGHT),2))},e}(Ma),tc=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new zu,this._bufParams=t||null};tc.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},tc.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new La(t.getLabel())).flip(),n.merge(r);var i=tc.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(tc.depthDelta(t.getLabel()))},tc.prototype.buildSubgraphs=function(t,e){for(var n=new ls,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Ru(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},tc.prototype.createSubgraphs=function(t){for(var e=new ls,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oa;i.create(r),e.add(i)}}return Qa.sort(e,Qa.reverseOrder()),e},tc.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},tc.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new vu,n=new Go;return n.setPrecisionModel(t),e.setSegmentIntersector(new Hu(n)),e},tc.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Pu(n,this._bufParams),i=new ku(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new qa(new qu),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ga(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},tc.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Zu(i.getCoordinates(),new La(s));this.insertUniqueEdge(a)}}},tc.prototype.setNoder=function(t){this._workingNoder=t},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.depthDelta=function(t){var e=t.getLocation(0,wa.LEFT),n=t.getLocation(0,wa.RIGHT);return e===fo.INTERIOR&&n===fo.EXTERIOR?1:e===fo.EXTERIOR&&n===fo.INTERIOR?-1:0},tc.convertSegStrings=function(t){for(var e=new va,n=new ls;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ec=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ec.prototype.rescale=function(){var t=this;if(go(arguments[0],os))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&To.out.println(i)}},ec.prototype.scale=function(){var t=this;if(go(arguments[0],os)){for(var e=arguments[0],n=new ls,r=e.iterator();r.hasNext();){var i=r.next();n.add(new pu(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new uo(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=hs.removeRepeatedPoints(s);return u}},ec.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ec.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ec.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ec.prototype.interfaces_=function(){return[mu]},ec.prototype.getClass=function(){return ec};var nc=function(){this._li=new Go,this._segStrings=null;var t=arguments[0];this._segStrings=t},rc={fact:{configurable:!0}};nc.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),c=1;c<u.length-1;c++)if(u[c].equals(i))throw new jo("found endpt/interior pt intersection at index "+c+" :pt "+i)},nc.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),c=0;c<a.length-1;c++)for(var l=0;l<u.length-1;l++)t.checkInteriorIntersections(o,c,s,l);else if(4===arguments.length){var p=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3];if(p===h&&f===d)return null;var g=p.getCoordinates()[f],y=p.getCoordinates()[f+1],m=h.getCoordinates()[d],_=h.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,m,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,m,_)))throw new jo("found non-noded intersection at "+g+"-"+y+" and "+m+"-"+_)}},nc.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},nc.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},nc.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},nc.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new jo("found non-noded collapse at "+nc.fact.createLineString([t,e,n]))},nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},rc.fact.get=function(){return new va},Object.defineProperties(nc,rc);var ic=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new eo("Scale factor must be non-zero");1!==e&&(this._pt=new uo(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new uo,this._p1Scaled=new uo),this.initCorners(this._pt)},oc={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ic.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Bo.isTrue(!(s&&a),"Found bad envelope test"),a},ic.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new uo(this._maxx,this._maxy),this._corner[1]=new uo(this._minx,this._maxy),this._corner[2]=new uo(this._minx,this._miny),this._corner[3]=new uo(this._maxx,this._miny)},ic.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ic.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ic.prototype.getCoordinate=function(){return this._originalPt},ic.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ic.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ic.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Po(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ic.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},ic.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},ic.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},oc.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ic,oc);var sc=function(){this.tempEnv1=new Po,this.selectedSegment=new fu};sc.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc};var ac=function(){this._index=null;var t=arguments[0];this._index=t},uc={HotPixelSnapAction:{configurable:!0}};ac.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new cc(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ya]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},uc.HotPixelSnapAction.get=function(){return cc},Object.defineProperties(ac,uc);var cc=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sc),lc=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new ls};lc.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},lc.prototype.isDone=function(){return!1},lc.prototype.getInteriorIntersections=function(){return this._interiorIntersections},lc.prototype.interfaces_=function(){return[Vu]},lc.prototype.getClass=function(){return lc};var pc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Go,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};pc.prototype.checkCorrectness=function(t){var e=pu.getNodedSubstrings(t),n=new nc(e);try{n.checkValid()}catch(t){if(!(t instanceof No))throw t;t.printStackTrace()}},pc.prototype.getNodedSubstrings=function(){return pu.getNodedSubstrings(this._nodedSegStrings)},pc.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},pc.prototype.findInteriorIntersections=function(t,e){var n=new lc(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},pc.prototype.computeVertexSnaps=function(){var t=this;if(go(arguments[0],os))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof pu)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new ic(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},pc.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new vu,this._pointSnapper=new ac(this._noder.getIndex()),this.snapRound(t,this._li)},pc.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ic(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},pc.prototype.interfaces_=function(){return[mu]},pc.prototype.getClass=function(){return pc};var fc=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new wu,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},hc={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};fc.prototype.bufferFixedPrecision=function(t){var e=new ec(new pc(new ga(1)),t.getScale()),n=new tc(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},fc.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=fc.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ca))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=fc.precisionScaleFactor(this._argGeom,this._distance,n),i=new ga(r);this.bufferFixedPrecision(i)}},fc.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ga.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},fc.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},fc.prototype.bufferOriginalPrecision=function(){try{var t=new tc(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof jo))throw t;this._saveException=t}},fc.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},fc.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new fc(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Wo&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new fc(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof wu&&arguments[0]instanceof Wo&&"number"==typeof arguments[1]){var c=arguments[0],l=arguments[1],p=arguments[2],f=new fc(c,p),h=f.getResultGeometry(l);return h}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],_=new fc(d);_.setQuadrantSegments(y),_.setEndCapStyle(m);var v=_.getResultGeometry(g);return v}},fc.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=yo.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},hc.CAP_ROUND.get=function(){return wu.CAP_ROUND},hc.CAP_BUTT.get=function(){return wu.CAP_FLAT},hc.CAP_FLAT.get=function(){return wu.CAP_FLAT},hc.CAP_SQUARE.get=function(){return wu.CAP_SQUARE},hc.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(fc,hc);var dc=function(){this._pt=[new uo,new uo],this._distance=no.NaN,this._isNull=!0};dc.prototype.getCoordinates=function(){return this._pt},dc.prototype.getCoordinate=function(t){return this._pt[t]},dc.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},dc.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},dc.prototype.getDistance=function(){return this._distance},dc.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var gc=function(){};gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.computeDistance=function(){if(arguments[2]instanceof dc&&arguments[0]instanceof Qs&&arguments[1]instanceof uo)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new fu,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof dc&&arguments[0]instanceof ea&&arguments[1]instanceof uo){var a=arguments[0],u=arguments[1],c=arguments[2];gc.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)gc.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof dc&&arguments[0]instanceof Wo&&arguments[1]instanceof uo){var p=arguments[0],f=arguments[1],h=arguments[2];if(p instanceof Qs)gc.computeDistance(p,f,h);else if(p instanceof ea)gc.computeDistance(p,f,h);else if(p instanceof js)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);gc.computeDistance(y,f,h)}else h.setMinimum(p.getCoordinate(),f)}else if(arguments[2]instanceof dc&&arguments[0]instanceof fu&&arguments[1]instanceof uo){var m=arguments[0],_=arguments[1],v=arguments[2],b=m.closestPoint(_);v.setMinimum(b,_)}};var yc=function(t){this._maxPtDist=new dc,this._inputGeom=t||null},mc={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};yc.prototype.computeMaxMidpointDistance=function(t){var e=new vc(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yc.prototype.computeMaxVertexDistance=function(t){var e=new _c(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yc.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},yc.prototype.getDistancePoints=function(){return this._maxPtDist},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},mc.MaxPointDistanceFilter.get=function(){return _c},mc.MaxMidpointDistanceFilter.get=function(){return vc},Object.defineProperties(yc,mc);var _c=function(t){this._maxPtDist=new dc,this._minPtDist=new dc,this._geom=t||null};_c.prototype.filter=function(t){this._minPtDist.initialize(),gc.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_c.prototype.getMaxPointDistance=function(){return this._maxPtDist},_c.prototype.interfaces_=function(){return[Jo]},_c.prototype.getClass=function(){return _c};var vc=function(t){this._maxPtDist=new dc,this._minPtDist=new dc,this._geom=t||null};vc.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new uo((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),gc.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},vc.prototype.isDone=function(){return!1},vc.prototype.isGeometryChanged=function(){return!1},vc.prototype.getMaxPointDistance=function(){return this._maxPtDist},vc.prototype.interfaces_=function(){return[Fs]},vc.prototype.getClass=function(){return vc};var bc=function(t){this._comps=t||null};bc.prototype.filter=function(t){t instanceof ea&&this._comps.add(t)},bc.prototype.interfaces_=function(){return[ks]},bc.prototype.getClass=function(){return bc},bc.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return bc.getPolygons(t,new ls)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ea?n.add(e):e instanceof js&&e.apply(new bc(n)),n}};var wc=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};wc.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ra){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qs&&this._lines.add(t)},wc.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},wc.prototype.interfaces_=function(){return[Xo]},wc.prototype.getClass=function(){return wc},wc.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wc.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(wc.getLines(e,n))}},wc.getLines=function(){if(1===arguments.length){var t=arguments[0];return wc.getLines(t,!1)}if(2===arguments.length){if(go(arguments[0],os)&&go(arguments[1],os)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();wc.getLines(i,n)}return n}if(arguments[0]instanceof Wo&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new ls;return o.apply(new wc(a,s)),a}if(arguments[0]instanceof Wo&&go(arguments[1],os)){var u=arguments[0],c=arguments[1];return u instanceof Qs?c.add(u):u.apply(new wc(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&go(arguments[0],os)&&go(arguments[1],os)){for(var l=arguments[0],p=arguments[1],f=arguments[2],h=l.iterator();h.hasNext();){var d=h.next();wc.getLines(d,p,f)}return p}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Wo&&go(arguments[1],os)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new wc(y,m)),y}}};var xc=function(){if(this._boundaryRule=Zo.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new eo("Rule must be non-null");this._boundaryRule=t}};xc.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof uo&&arguments[1]instanceof ea){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fo.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===fo.EXTERIOR)return fo.EXTERIOR;if(i===fo.BOUNDARY)return fo.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===fo.INTERIOR)return fo.EXTERIOR;if(a===fo.BOUNDARY)return fo.BOUNDARY}return fo.INTERIOR}if(arguments[0]instanceof uo&&arguments[1]instanceof Qs){var u=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(u))return fo.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!u.equals(l[0])&&!u.equals(l[l.length-1])?Ho.isOnLine(u,l)?fo.INTERIOR:fo.EXTERIOR:fo.BOUNDARY}if(arguments[0]instanceof uo&&arguments[1]instanceof Zs){var p=arguments[0],f=arguments[1],h=f.getCoordinate();return h.equals2D(p)?fo.INTERIOR:fo.EXTERIOR}},xc.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Ho.locatePointInRing(t,e.getCoordinates()):fo.EXTERIOR},xc.prototype.intersects=function(t,e){return this.locate(t,e)!==fo.EXTERIOR},xc.prototype.updateLocationInfo=function(t){t===fo.INTERIOR&&(this._isIn=!0),t===fo.BOUNDARY&&this._numBoundaries++},xc.prototype.computeLocation=function(t,e){if(e instanceof Zs&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qs)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ea)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $s)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ia)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof js)for(var u=new ju(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},xc.prototype.locate=function(t,e){return e.isEmpty()?fo.EXTERIOR:e instanceof Qs||e instanceof ea?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fo.BOUNDARY:this._numBoundaries>0||this._isIn?fo.INTERIOR:fo.EXTERIOR)},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var Ec=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Ic={INSIDE_AREA:{configurable:!0}};Ec.prototype.isInsideArea=function(){return this._segIndex===Ec.INSIDE_AREA},Ec.prototype.getCoordinate=function(){return this._pt},Ec.prototype.getGeometryComponent=function(){return this._component},Ec.prototype.getSegmentIndex=function(){return this._segIndex},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ic.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ec,Ic);var Sc=function(t){this._pts=t||null};Sc.prototype.filter=function(t){t instanceof Zs&&this._pts.add(t)},Sc.prototype.interfaces_=function(){return[ks]},Sc.prototype.getClass=function(){return Sc},Sc.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Zs?Qa.singletonList(t):Sc.getPoints(t,new ls)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Zs?n.add(e):e instanceof js&&e.apply(new Sc(n)),n}};var Cc=function(){this._locations=null;var t=arguments[0];this._locations=t};Cc.prototype.filter=function(t){(t instanceof Zs||t instanceof Qs||t instanceof ea)&&this._locations.add(new Ec(t,0,t.getCoordinate()))},Cc.prototype.interfaces_=function(){return[ks]},Cc.prototype.getClass=function(){return Cc},Cc.getLocations=function(t){var e=new ls;return t.apply(new Cc(e)),e};var Nc=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new xc,this._minDistanceLocation=null,this._minDistance=no.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Nc.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=bc.getPolygons(this._geom[n]);if(o.size()>0){var s=Cc.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&go(arguments[0],us)&&go(arguments[1],us)){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=0;l<a.size();l++)for(var p=a.get(l),f=0;f<u.size();f++)if(t.computeContainmentDistance(p,u.get(f),c),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ec&&arguments[1]instanceof ea){var h=arguments[0],d=arguments[1],g=arguments[2],y=h.getCoordinate();if(fo.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=h,g[1]=new Ec(d,y),null}},Nc.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Nc.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=wc.getLines(this._geom[0]),n=wc.getLines(this._geom[1]),r=Sc.getPoints(this._geom[0]),i=Sc.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Nc.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Nc.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Nc.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Nc.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qs&&arguments[1]instanceof Zs){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=Ho.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new fu(i[s],i[s+1]),c=u.closestPoint(o);r[0]=new Ec(e,s,c),r[1]=new Ec(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qs&&arguments[1]instanceof Qs){var l=arguments[0],p=arguments[1],f=arguments[2];if(l.getEnvelopeInternal().distance(p.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),d=p.getCoordinates(),g=0;g<h.length-1;g++)for(var y=0;y<d.length-1;y++){var m=Ho.distanceLineLine(h[g],h[g+1],d[y],d[y+1]);if(m<t._minDistance){t._minDistance=m;var _=new fu(h[g],h[g+1]),v=new fu(d[y],d[y+1]),b=_.closestPoints(v);f[0]=new Ec(l,g,b[0]),f[1]=new Ec(p,y,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Nc.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ec(i,0,i.getCoordinate()),n[1]=new Ec(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Nc.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new eo("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Nc.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.distance=function(t,e){return new Nc(t,e).distance()},Nc.isWithinDistance=function(t,e,n){return new Nc(t,e,n).distance()<=n},Nc.nearestPoints=function(t,e){return new Nc(t,e).nearestPoints()};var Oc=function(){this._pt=[new uo,new uo],this._distance=no.NaN,this._isNull=!0};Oc.prototype.getCoordinates=function(){return this._pt},Oc.prototype.getCoordinate=function(t){return this._pt[t]},Oc.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Oc.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Oc.prototype.toString=function(){return Fo.toLineString(this._pt[0],this._pt[1])},Oc.prototype.getDistance=function(){return this._distance},Oc.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var Tc=function(){};Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.computeDistance=function(){if(arguments[2]instanceof Oc&&arguments[0]instanceof Qs&&arguments[1]instanceof uo)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new fu,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Oc&&arguments[0]instanceof ea&&arguments[1]instanceof uo){var a=arguments[0],u=arguments[1],c=arguments[2];Tc.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)Tc.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Oc&&arguments[0]instanceof Wo&&arguments[1]instanceof uo){var p=arguments[0],f=arguments[1],h=arguments[2];if(p instanceof Qs)Tc.computeDistance(p,f,h);else if(p instanceof ea)Tc.computeDistance(p,f,h);else if(p instanceof js)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Tc.computeDistance(y,f,h)}else h.setMinimum(p.getCoordinate(),f)}else if(arguments[2]instanceof Oc&&arguments[0]instanceof fu&&arguments[1]instanceof uo){var m=arguments[0],_=arguments[1],v=arguments[2],b=m.closestPoint(_);v.setMinimum(b,_)}};var Lc=function(){this._g0=null,this._g1=null,this._ptDist=new Oc,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Pc={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lc.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lc.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new eo("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lc.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lc.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lc.prototype.computeOrientedDistance=function(t,e,n){var r=new Rc(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Ac(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lc.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Lc(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Lc(r,i);return s.setDensifyFraction(o),s.distance()}},Pc.MaxPointDistanceFilter.get=function(){return Rc},Pc.MaxDensifiedByFractionDistanceFilter.get=function(){return Ac},Object.defineProperties(Lc,Pc);var Rc=function(){this._maxPtDist=new Oc,this._minPtDist=new Oc,this._euclideanDist=new Tc,this._geom=null;var t=arguments[0];this._geom=t};Rc.prototype.filter=function(t){this._minPtDist.initialize(),Tc.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rc.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rc.prototype.interfaces_=function(){return[Jo]},Rc.prototype.getClass=function(){return Rc};var Ac=function(){this._maxPtDist=new Oc,this._minPtDist=new Oc,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Ac.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new uo(a,u);this._minPtDist.initialize(),Tc.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ac.prototype.isDone=function(){return!1},Ac.prototype.isGeometryChanged=function(){return!1},Ac.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ac.prototype.interfaces_=function(){return[Fs]},Ac.prototype.getClass=function(){return Ac};var Mc=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Dc={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Mc.prototype.checkMaximumDistance=function(t,e,n){var r=new Lc(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Fo.toLineString(i[0],i[1])+")"}},Mc.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Mc.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Mc.VERBOSE&&To.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Mc.prototype.checkNegativeValid=function(){if(!(this._input instanceof ea||this._input instanceof ia||this._input instanceof js))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Mc.prototype.getErrorIndicator=function(){return this._errorIndicator},Mc.prototype.checkMinimumDistance=function(t,e,n){var r=new Nc(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Fo.toLineString(i[0],i[1])+" )"}},Mc.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Mc.prototype.getErrorLocation=function(){return this._errorLocation},Mc.prototype.getPolygonLines=function(t){for(var e=new ls,n=new wc(e),r=bc.getPolygons(t).iterator();r.hasNext();){r.next().apply(n)}return t.getFactory().buildGeometry(e)},Mc.prototype.getErrorMessage=function(){return this._errMsg},Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Dc.VERBOSE.get=function(){return!1},Dc.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Mc,Dc);var kc=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Fc={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};kc.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},kc.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*kc.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Po(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Po(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},kc.prototype.checkDistance=function(){var t=new Mc(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},kc.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},kc.prototype.checkPolygonal=function(){this._result instanceof ea||this._result instanceof ia||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},kc.prototype.getErrorIndicator=function(){return this._errorIndicator},kc.prototype.getErrorLocation=function(){return this._errorLocation},kc.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},kc.prototype.report=function(t){if(!kc.VERBOSE)return null;To.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},kc.prototype.getErrorMessage=function(){return this._errorMsg},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.isValidMsg=function(t,e,n){var r=new kc(t,e,n);return r.isValid()?null:r.getErrorMessage()},kc.isValid=function(t,e,n){return!!new kc(t,e,n).isValid()},Fc.VERBOSE.get=function(){return!1},Fc.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kc,Fc);var jc=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};jc.prototype.getCoordinates=function(){return this._pts},jc.prototype.size=function(){return this._pts.length},jc.prototype.getCoordinate=function(t){return this._pts[t]},jc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},jc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:uu.octant(this.getCoordinate(t),this.getCoordinate(t+1))},jc.prototype.setData=function(t){this._data=t},jc.prototype.getData=function(){return this._data},jc.prototype.toString=function(){return Fo.toLineString(new la(this._pts))},jc.prototype.interfaces_=function(){return[cu]},jc.prototype.getClass=function(){return jc};var $c=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ls,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};$c.prototype.getInteriorIntersection=function(){return this._interiorIntersection},$c.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},$c.prototype.getIntersectionSegments=function(){return this._intSegments},$c.prototype.count=function(){return this._intersectionCount},$c.prototype.getIntersections=function(){return this._intersections},$c.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},$c.prototype.setKeepIntersections=function(t){this._keepIntersections=t},$c.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},$c.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},$c.prototype.hasIntersection=function(){return null!==this._interiorIntersection},$c.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},$c.prototype.interfaces_=function(){return[Vu]},$c.prototype.getClass=function(){return $c},$c.createAllIntersectionsFinder=function(t){var e=new $c(t);return e.setFindAllIntersections(!0),e},$c.createAnyIntersectionFinder=function(t){return new $c(t)},$c.createIntersectionCounter=function(t){var e=new $c(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Bc=function(){this._li=new Go,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Bc.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Bc.prototype.getIntersections=function(){return this._segInt.getIntersections()},Bc.prototype.isValid=function(){return this.execute(),this._isValid},Bc.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Bc.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new $c(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new vu;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Bc.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ca(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Bc.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Fo.toLineString(t[0],t[1])+" and "+Fo.toLineString(t[2],t[3])},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.computeIntersections=function(t){var e=new Bc(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Uc=function t(){this._nv=null;var e=arguments[0];this._nv=new Bc(t.toSegmentStrings(e))};Uc.prototype.checkValid=function(){this._nv.checkValid()},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.toSegmentStrings=function(t){for(var e=new ls,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jc(r.getCoordinates(),r))}return e},Uc.checkValid=function(t){new Uc(t).checkValid()};var qc=function(t){this._mapOp=t};qc.prototype.map=function(t){for(var e=new ls,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(va.toGeometryArray(e))},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},qc.map=function(t,e){return new qc(e).map(t)};var Gc=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ls,this._resultLineList=new ls;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Gc.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Gc.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Gc.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Gc.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!El.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Gc.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Gc.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Gc.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Gc.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Bo.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(El.isResultOfOp(r,e)&&e===El.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var zc=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new ls;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};zc.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},zc.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===El.INTERSECTION))){var r=n.getLabel();El.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},zc.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Vc=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Vc.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Vc.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ra&&!r.isEmpty()||(n=!1);for(var i=new ls,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ra||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new ls;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Vc.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Vc.prototype.getInputGeometry=function(){return this._inputGeom},Vc.prototype.transformMultiLineString=function(t,e){for(var n=new ls,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Vc.prototype.transformCoordinates=function(t,e){return this.copy(t)},Vc.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Vc.prototype.transformMultiPoint=function(t,e){for(var n=new ls,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Vc.prototype.transformMultiPolygon=function(t,e){for(var n=new ls,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Vc.prototype.copy=function(t){return t.copy()},Vc.prototype.transformGeometryCollection=function(t,e){for(var n=new ls,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(va.toGeometryArray(n)):this._factory.buildGeometry(n)},Vc.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Zs)return this.transformPoint(t,null);if(t instanceof na)return this.transformMultiPoint(t,null);if(t instanceof ra)return this.transformLinearRing(t,null);if(t instanceof Qs)return this.transformLineString(t,null);if(t instanceof $s)return this.transformMultiLineString(t,null);if(t instanceof ea)return this.transformPolygon(t,null);if(t instanceof ia)return this.transformMultiPolygon(t,null);if(t instanceof js)return this.transformGeometryCollection(t,null);throw new eo("Unknown Geometry subtype: "+t.getClass().getName())},Vc.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc};var Hc=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new fu,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qs&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Hc.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new uo(o)),0===r&&this._isClosed&&t.set(t.size()-1,new uo(o)))}},Hc.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Hc.prototype.snapTo=function(t){var e=new fs(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Hc.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new uo(i),!1)}},Hc.prototype.findSegmentIndexToSnap=function(t,e){for(var n=no.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Hc.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Yc=function(t){this._srcGeom=t||null},Xc={SNAP_PRECISION_FACTOR:{configurable:!0}};Yc.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Wc(e,n).transform(this._srcGeom)},Yc.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Wc(t,n,!0).transform(this._srcGeom),i=r;return e&&go(i,ta)&&(i=r.buffer(0)),i},Yc.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Yc.prototype.extractTargetCoordinates=function(t){for(var e=new Ps,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Yc.prototype.computeMinimumSegmentLength=function(t){for(var e=no.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Yc(t);r[0]=i.snapTo(e,n);var o=new Yc(e);return r[1]=o.snapTo(r[0],n),r},Yc.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Yc.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ga.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Yc.computeOverlaySnapTolerance(i),Yc.computeOverlaySnapTolerance(o))}},Yc.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Yc.SNAP_PRECISION_FACTOR},Yc.snapToSelf=function(t,e,n){return new Yc(t).snapToSelf(e,n)},Xc.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Yc,Xc);var Wc=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Hc(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vc),Kc=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Kc.prototype.getCommon=function(){return no.longBitsToDouble(this._commonBits)},Kc.prototype.add=function(t){var e=no.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Kc.signExpBits(this._commonBits),this._isFirst=!1,null):Kc.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Kc.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Kc.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Kc.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=no.longBitsToDouble(t),n=no.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Kc.signExpBits=function(t){return t>>52},Kc.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Kc.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Kc.getBit(t,r)!==Kc.getBit(e,r))return n;n++}return 52};var Qc=function(){this._commonCoord=null,this._ccFilter=new Zc},Jc={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Qc.prototype.addCommonBits=function(t){var e=new tl(this._commonCoord);t.apply(e),t.geometryChanged()},Qc.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new uo(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new tl(e);return t.apply(n),t.geometryChanged(),t},Qc.prototype.getCommonCoordinate=function(){return this._commonCoord},Qc.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Jc.CommonCoordinateFilter.get=function(){return Zc},Jc.Translater.get=function(){return tl},Object.defineProperties(Qc,Jc);var Zc=function(){this._commonBitsX=new Kc,this._commonBitsY=new Kc};Zc.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Zc.prototype.getCommonCoordinate=function(){return new uo(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Zc.prototype.interfaces_=function(){return[Jo]},Zc.prototype.getClass=function(){return Zc};var tl=function(){this.trans=null;var t=arguments[0];this.trans=t};tl.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},tl.prototype.isDone=function(){return!1},tl.prototype.isGeometryChanged=function(){return!0},tl.prototype.interfaces_=function(){return[Fs]},tl.prototype.getClass=function(){return tl};var el=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};el.prototype.selfSnap=function(t){return new Yc(t).snapTo(t,this._snapTolerance)},el.prototype.removeCommonBits=function(t){this._cbr=new Qc,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},el.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},el.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=El.overlayOp(e[0],e[1],t);return this.prepareResult(n)},el.prototype.checkValid=function(t){t.isValid()||To.out.println("Snapped geometry is invalid")},el.prototype.computeSnapTolerance=function(){this._snapTolerance=Yc.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},el.prototype.snap=function(t){var e=this.removeCommonBits(t);return Yc.snap(e[0],e[1],this._snapTolerance)},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.overlayOp=function(t,e,n){return new el(t,e).getResultGeometry(n)},el.union=function(t,e){return el.overlayOp(t,e,El.UNION)},el.intersection=function(t,e){return el.overlayOp(t,e,El.INTERSECTION)},el.symDifference=function(t,e){return el.overlayOp(t,e,El.SYMDIFFERENCE)},el.difference=function(t,e){return el.overlayOp(t,e,El.DIFFERENCE)};var nl=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};nl.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=El.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof jo))throw t;r=t}if(!n)try{e=el.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof jo?r:t}return e},nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},nl.overlayOp=function(t,e,n){return new nl(t,e).getResultGeometry(n)},nl.union=function(t,e){return nl.overlayOp(t,e,El.UNION)},nl.intersection=function(t,e){return nl.overlayOp(t,e,El.INTERSECTION)},nl.symDifference=function(t,e){return nl.overlayOp(t,e,El.SYMDIFFERENCE)},nl.difference=function(t,e){return nl.overlayOp(t,e,El.DIFFERENCE)};var rl=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};rl.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl};var il=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ol={INSERT:{configurable:!0},DELETE:{configurable:!0}};il.prototype.isDelete=function(){return this._eventType===il.DELETE},il.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},il.prototype.getObject=function(){return this._obj},il.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},il.prototype.getInsertEvent=function(){return this._insertEvent},il.prototype.isInsert=function(){return this._eventType===il.INSERT},il.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},il.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},il.prototype.interfaces_=function(){return[io]},il.prototype.getClass=function(){return il},ol.INSERT.get=function(){return 1},ol.DELETE.get=function(){return 2},Object.defineProperties(il,ol);var sl=function(){};sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var al=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};al.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(al.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},al.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},al.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},al.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},al.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},al.prototype.hasProperIntersection=function(){return this._hasProper},al.prototype.hasIntersection=function(){return this._hasIntersection},al.prototype.isDone=function(){return this._isDone},al.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},al.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},al.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var ul=function(t){function e(){t.call(this),this.events=new ls,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qa.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof al&&go(arguments[0],us)&&go(arguments[1],us)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&go(arguments[0],us)&&arguments[1]instanceof al){var a=arguments[0],u=arguments[1],c=arguments[2];c?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new rl(n,i),s=new il(e,n.getMinX(i),o);this.events.add(s),this.events.add(new il(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sl),cl=function(){this._min=no.POSITIVE_INFINITY,this._max=no.NEGATIVE_INFINITY},ll={NodeComparator:{configurable:!0}};cl.prototype.getMin=function(){return this._min},cl.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},cl.prototype.getMax=function(){return this._max},cl.prototype.toString=function(){return Fo.toLineString(new uo(this._min,0),new uo(this._max,0))},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},ll.NodeComparator.get=function(){return pl},Object.defineProperties(cl,ll);var pl=function(){};pl.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},pl.prototype.interfaces_=function(){return[so]},pl.prototype.getClass=function(){return pl};var fl=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cl),hl=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cl),dl=function(){this._leaves=new ls,this._root=null,this._level=0};dl.prototype.buildTree=function(){Qa.sort(this._leaves,new cl.NodeComparator);for(var t=this._leaves,e=null,n=new ls;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},dl.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new fl(t,e,n))},dl.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},dl.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},dl.prototype.printNode=function(t){To.out.println(Fo.toLineString(new uo(t._min,this._level),new uo(t._max,this._level)))},dl.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},dl.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new hl(t.get(n),t.get(n+1));e.add(i)}}},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl};var gl=function(){this._items=new ls};gl.prototype.visitItem=function(t){this._items.add(t)},gl.prototype.getItems=function(){return this._items},gl.prototype.interfaces_=function(){return[Ya]},gl.prototype.getClass=function(){return gl};var yl=function(){this._index=null;var t=arguments[0];if(!go(t,ta))throw new eo("Argument must be Polygonal");this._index=new vl(t)},ml={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};yl.prototype.locate=function(t){var e=new Vo(t),n=new _l(e);return this._index.query(t.y,t.y,n),e.getLocation()},yl.prototype.interfaces_=function(){return[Fu]},yl.prototype.getClass=function(){return yl},ml.SegmentVisitor.get=function(){return _l},ml.IntervalIndexedGeometry.get=function(){return vl},Object.defineProperties(yl,ml);var _l=function(){this._counter=null;var t=arguments[0];this._counter=t};_l.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},_l.prototype.interfaces_=function(){return[Ya]},_l.prototype.getClass=function(){return _l};var vl=function(){this._index=new dl;var t=arguments[0];this.init(t)};vl.prototype.init=function(t){for(var e=wc.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},vl.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new fu(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},vl.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new gl;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var bl=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new da,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new xc,2===arguments.length){var e=arguments[0],n=arguments[1],r=Zo.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,wa.ON)===fo.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new al(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ra||this._parentGeom instanceof ea||this._parentGeom instanceof ia,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new al(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Zs){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,fo.INTERIOR)}else if(arguments[0]instanceof uo){var n=arguments[0];this.insertPoint(this._argIndex,n,fo.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fo.EXTERIOR,fo.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fo.INTERIOR,fo.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fo.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fo.BOUNDARY)},e.prototype.addLineString=function(t){var e=hs.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Zu(e,new La(this._argIndex,fo.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Bo.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fo.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=hs.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Ho.isCCW(r)&&(i=n,o=e);var s=new Zu(r,new La(this._argIndex,fo.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],fo.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new La(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new ul},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ia&&(this._useBoundaryDeterminationRule=!1),e instanceof ea)this.addPolygon(e);else if(e instanceof Qs)this.addLineString(e);else if(e instanceof Zs)this.addPoint(e);else if(e instanceof na)this.addCollection(e);else if(e instanceof $s)this.addCollection(e);else if(e instanceof ia)this.addCollection(e);else{if(!(e instanceof js))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return go(this._parentGeom,ta)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new yl(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fo.BOUNDARY:fo.INTERIOR},e}(qa),wl=function(){if(this._li=new Go,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new bl(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Zo.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bl(0,e,r),this._arg[1]=new bl(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bl(0,i,s),this._arg[1]=new bl(1,o,s)}};wl.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},wl.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl};var xl=function(){};xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.map=function(){if(arguments[0]instanceof Wo&&go(arguments[1],xl.MapOp)){for(var t=arguments[0],e=arguments[1],n=new ls,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(go(arguments[0],os)&&go(arguments[1],xl.MapOp)){for(var o=arguments[0],s=arguments[1],a=new ls,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},xl.MapOp=function(){};var El=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new xc,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new zu,this._resultPolyList=new ls,this._resultLineList=new ls,this._resultPointList=new ls,this._graph=new qa(new qu),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new La(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new ls;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==fo.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new ls,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new ls;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Uc.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ga(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Gc(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new zc(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,wa.RIGHT),i.getLocation(1,wa.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Bo.isTrue(!r.isNull(i,wa.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,wa.LEFT,r.getLocation(i,wa.LEFT)),Bo.isTrue(!r.isNull(i,wa.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,wa.RIGHT,r.getLocation(i,wa.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wl);El.overlayOp=function(t,e,n){return new El(t,e).getResultGeometry(n)},El.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return El.createEmptyResult(El.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return qc.map(t,{interfaces_:function(){return[xl.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nl.overlayOp(t,e,El.INTERSECTION)},El.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return El.createEmptyResult(El.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nl.overlayOp(t,e,El.SYMDIFFERENCE)},El.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case El.INTERSECTION:o=Math.min(r,i);break;case El.UNION:o=Math.max(r,i);break;case El.DIFFERENCE:o=r;break;case El.SYMDIFFERENCE:o=Math.max(r,i)}return o},El.createEmptyResult=function(t,e,n,r){var i=null;switch(El.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},El.difference=function(t,e){return t.isEmpty()?El.createEmptyResult(El.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nl.overlayOp(t,e,El.DIFFERENCE))},El.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return El.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===fo.BOUNDARY&&(i=fo.INTERIOR),o===fo.BOUNDARY&&(o=fo.INTERIOR),s){case El.INTERSECTION:return i===fo.INTERIOR&&o===fo.INTERIOR;case El.UNION:return i===fo.INTERIOR||o===fo.INTERIOR;case El.DIFFERENCE:return i===fo.INTERIOR&&o!==fo.INTERIOR;case El.SYMDIFFERENCE:return i===fo.INTERIOR&&o!==fo.INTERIOR||i!==fo.INTERIOR&&o===fo.INTERIOR}return!1}},El.INTERSECTION=1,El.UNION=2,El.DIFFERENCE=3,El.SYMDIFFERENCE=4;var Il=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new xc,this._seg=new fu;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Il.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++){if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0}return!1},Il.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fo.BOUNDARY:this._ptLocator.locate(t,this._g)},Il.prototype.extractLinework=function(t){var e=new Sl;t.apply(e);var n=e.getLinework(),r=va.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Sl=function(){this._linework=null,this._linework=new ls};Sl.prototype.getLinework=function(){return this._linework},Sl.prototype.filter=function(t){if(t instanceof ea){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Sl.prototype.interfaces_=function(){return[ks]},Sl.prototype.getClass=function(){return Sl};var Cl=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Cl.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Cl.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Cl.prototype.getPoints=function(t){for(var e=new ls,n=wc.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Cl.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var p=new uo(c-u,l+a);r.add(p)}if(this._doRight){var f=new uo(c+u,l-a);r.add(f)}},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Nl=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new ls;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Il(this._geom[0],this._boundaryDistanceTolerance),new Il(this._geom[1],this._boundaryDistanceTolerance),new Il(this._geom[2],this._boundaryDistanceTolerance)]},Ol={TOLERANCE:{configurable:!0}};Nl.prototype.reportResult=function(t,e,n){To.out.println("Overlay result invalid - A:"+fo.toLocationSymbol(e[0])+" B:"+fo.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fo.toLocationSymbol(e[2]))},Nl.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Nl.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Nl.hasLocation(this._location,fo.BOUNDARY)||this.isValidResult(i,this._location)}},Nl.prototype.addTestPts=function(t){var e=new Cl(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Nl.prototype.isValidResult=function(t,e){var n=El.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===fo.INTERIOR);return r||this.reportResult(t,e,n),r},Nl.prototype.getInvalidLocation=function(){return this._invalidLocation},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Nl.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Yc.computeSizeBasedSnapTolerance(t),Yc.computeSizeBasedSnapTolerance(e))},Nl.isValid=function(t,e,n,r){return new Nl(t,e,r).isValid(n)},Ol.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Nl,Ol);var Tl=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Tl.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Tl.prototype.combine=function(){for(var t=new ls,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Tl(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new Tl(Tl.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Tl(Tl.createList(o,s,a));return u.combine()}},Tl.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Tl.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new ls;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new ls;return s.add(r),s.add(i),s.add(o),s}};var Ll=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new ls)},Pl={STRTREE_NODE_CAPACITY:{configurable:!0}};Ll.prototype.reduceToGeometries=function(t){for(var e=new ls,n=t.iterator();n.hasNext();){var r=n.next(),i=null;go(r,us)?i=this.unionTree(r):r instanceof Wo&&(i=r),e.add(i)}return e},Ll.prototype.extractByEnvelope=function(t,e,n){for(var r=new ls,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ll.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Tl.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ll.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ru(Ll.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ll.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ll.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ll.getGeometry(e,n),Ll.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Ll.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ll.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ll.prototype.unionActual=function(t,e){return Ll.restrictToPolygons(t.union(e))},Ll.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ll.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new ls,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Tl.combine(r)},Ll.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.restrictToPolygons=function(t){if(go(t,ta))return t;var e=bc.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(va.toPolygonArray(e))},Ll.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ll.union=function(t){return new Ll(t).union()},Pl.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ll,Pl);var Rl=function(){};function Al(){return new Ml}function Ml(){this.reset()}Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},Rl.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return El.createEmptyResult(El.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nl.overlayOp(t,e,El.UNION)},Ml.prototype={constructor:Ml,reset:function(){this.s=this.t=0},add:function(t){kl(Dl,t,this.t),kl(this,Dl.s,this.s),this.s?this.t+=Dl.t:this.s=Dl.t},valueOf:function(){return this.s}};var Dl=new Ml;function kl(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}Al(),Al(),Al();function Fl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var jl,$l;1===(jl=Fl).length&&($l=jl,jl=function(t,e){return Fl($l(t),e)}),Al(),Al(),Al(),Al(),Al();const Bl=Ri({}),Ul=Ri({});function ql(t,e){return t&&t.generated&&e.generated&&t.generated>e.generated?t:e}function Gl(...t){const e=t.filter(t=>t.attachments).map(t=>t.attachments),n=t.map(t=>t.items),r=Object.assign({},...e),i=Object.assign({},...n);return Bl.update(t=>(r&&Ul.update(e=>(Object.entries(r).forEach(([n,r])=>{const o=t[n],s=ql(o,i[n]);e[n]=s===o?e[n]:r}),e)),Object.entries(i).forEach(([e,n])=>{t[e]=ql(t[e],n)}),t)),1==t.length?t[0]:t}function zl(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Vl(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Hl(t){Vl(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Yl(t,e){Vl(2,arguments);var n=Hl(t).getTime(),r=zl(e);return new Date(n+r)}function Xl(t){return t.getTime()%6e4}function Wl(t){var e=new Date(t.getTime()),n=Math.ceil(e.getTimezoneOffset());return e.setSeconds(0,0),6e4*n+(n>0?(6e4+Xl(e))%6e4:Xl(e))}function Kl(t){Vl(1,arguments);var e=Hl(t);return e.setHours(0,0,0,0),e}function Ql(t,e){Vl(2,arguments);var n=Hl(t),r=Hl(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Jl(t){Vl(1,arguments);var e=Hl(t);return!isNaN(e)}function Zl(t,e){Vl(2,arguments);var n=Kl(t),r=Kl(e);return n.getTime()===r.getTime()}function tp(t,e){Vl(2,arguments);var n=Hl(t),r=Hl(e);return n.getTime()-r.getTime()}function ep(t,e){Vl(2,arguments);var n=tp(t,e)/1e3;return n>0?Math.floor(n):Math.ceil(n)}var np={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function rp(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var ip={date:rp({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:rp({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:rp({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},op={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function sp(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=i.width?String(i.width):o;r=t.formattingValues[s]||t.formattingValues[o]}else{var a=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;r=t.values[u]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function ap(t){return function(e,n){var r=String(e),i=n||{},o=i.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],a=r.match(s);if(!a)return null;var u,c=a[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(l)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}(l,(function(t){return t.test(c)})):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(l,(function(t){return t.test(c)})),u=t.valueCallback?t.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}var up,cp={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof np[t]?np[t]:1===e?np[t].one:np[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:ip,formatRelative:function(t,e,n,r){return op[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:sp({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:sp({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:sp({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:sp({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:sp({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(up={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(up.matchPattern);if(!i)return null;var o=i[0],s=n.match(up.parsePattern);if(!s)return null;var a=up.valueCallback?up.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:n.slice(o.length)}}),era:ap({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ap({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ap({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ap({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ap({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function lp(t,e){Vl(2,arguments);var n=zl(e);return Yl(t,-n)}function pp(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var fp=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return pp("yy"===e?r%100:r,e.length)},hp=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):pp(n+1,2)},dp=function(t,e){return pp(t.getUTCDate(),e.length)},gp=function(t,e){return pp(t.getUTCHours()%12||12,e.length)},yp=function(t,e){return pp(t.getUTCHours(),e.length)},mp=function(t,e){return pp(t.getUTCMinutes(),e.length)},_p=function(t,e){return pp(t.getUTCSeconds(),e.length)},vp=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return pp(Math.floor(r*Math.pow(10,n-3)),e.length)};function bp(t){Vl(1,arguments);var e=1,n=Hl(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function wp(t){Vl(1,arguments);var e=Hl(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=bp(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=bp(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function xp(t){Vl(1,arguments);var e=wp(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=bp(n);return r}function Ep(t,e){Vl(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:zl(i),s=null==n.weekStartsOn?o:zl(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=Hl(t),u=a.getUTCDay(),c=(u<s?7:0)+u-s;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function Ip(t,e){Vl(1,arguments);var n=Hl(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,a=null==s?1:zl(s),u=null==i.firstWeekContainsDate?a:zl(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var l=Ep(c,e),p=new Date(0);p.setUTCFullYear(r,0,u),p.setUTCHours(0,0,0,0);var f=Ep(p,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function Sp(t,e){Vl(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:zl(i),s=null==n.firstWeekContainsDate?o:zl(n.firstWeekContainsDate),a=Ip(t,e),u=new Date(0);u.setUTCFullYear(a,0,s),u.setUTCHours(0,0,0,0);var c=Ep(u,e);return c}var Cp="midnight",Np="noon",Op="morning",Tp="afternoon",Lp="evening",Pp="night",Rp={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return fp(t,e)},Y:function(t,e,n,r){var i=Ip(t,r),o=i>0?i:1-i;return"YY"===e?pp(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):pp(o,e.length)},R:function(t,e){return pp(wp(t),e.length)},u:function(t,e){return pp(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return pp(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return pp(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return hp(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return pp(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=function(t,e){Vl(1,arguments);var n=Hl(t),r=Ep(n,e).getTime()-Sp(n,e).getTime();return Math.round(r/6048e5)+1}(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):pp(i,e.length)},I:function(t,e,n){var r=function(t){Vl(1,arguments);var e=Hl(t),n=bp(e).getTime()-xp(e).getTime();return Math.round(n/6048e5)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):pp(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):dp(t,e)},D:function(t,e,n){var r=function(t){Vl(1,arguments);var e=Hl(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/864e5)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):pp(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return pp(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return pp(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return pp(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?Np:0===i?Cp:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?Lp:i>=12?Tp:i>=4?Op:Pp,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return gp(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):yp(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):pp(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):pp(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):mp(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):_p(t,e)},S:function(t,e){return vp(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return Mp(i);case"XXXX":case"XX":return Dp(i);case"XXXXX":case"XXX":default:return Dp(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Mp(i);case"xxxx":case"xx":return Dp(i);case"xxxxx":case"xxx":default:return Dp(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ap(i,":");case"OOOO":default:return"GMT"+Dp(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ap(i,":");case"zzzz":default:return"GMT"+Dp(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return pp(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return pp((r._originalDate||t).getTime(),e.length)}};function Ap(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=e||"";return n+String(i)+s+pp(o,2)}function Mp(t,e){return t%60==0?(t>0?"-":"+")+pp(Math.abs(t)/60,2):Dp(t,e)}function Dp(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+pp(Math.floor(i/60),2)+n+pp(i%60,2)}function kp(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Fp(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var jp={p:Fp,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return kp(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",kp(i,e)).replace("{{time}}",Fp(o,e))}},$p=["D","DD"],Bp=["YY","YYYY"];function Up(t){return-1!==$p.indexOf(t)}function qp(t){return-1!==Bp.indexOf(t)}function Gp(t){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===t)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===t)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===t)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var zp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hp=/^'([^]*?)'?$/,Yp=/''/g,Xp=/[a-zA-Z]/;function Wp(t,e,n){Vl(2,arguments);var r=String(e),i=n||{},o=i.locale||cp,s=o.options&&o.options.firstWeekContainsDate,a=null==s?1:zl(s),u=null==i.firstWeekContainsDate?a:zl(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,l=null==c?0:zl(c),p=null==i.weekStartsOn?l:zl(i.weekStartsOn);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=Hl(t);if(!Jl(f))throw new RangeError("Invalid time value");var h=Wl(f),d=lp(f,h),g={firstWeekContainsDate:u,weekStartsOn:p,locale:o,_originalDate:f},y=r.match(Vp).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,jp[e])(t,o.formatLong,g):t})).join("").match(zp).map((function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return Kp(t);var n=Rp[e];if(n)return!i.useAdditionalWeekYearTokens&&qp(t)&&Gp(t),!i.useAdditionalDayOfYearTokens&&Up(t)&&Gp(t),n(d,t,o.localize,g);if(e.match(Xp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return t})).join("");return y}function Kp(t){return t.match(Hp)[1].replace(Yp,"'")}function Qp(t){return function(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e=e||{})e.hasOwnProperty(n)&&(t[n]=e[n]);return t}({},t)}function Jp(t,e,n){Vl(2,arguments);var r=n||{},i=r.locale||cp;if(!i.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var o=Ql(t,e);if(isNaN(o))throw new RangeError("Invalid time value");var s,a,u=Qp(r);u.addSuffix=Boolean(r.addSuffix),u.comparison=o,o>0?(s=Hl(e),a=Hl(t)):(s=Hl(t),a=Hl(e));var c,l=null==r.roundingMethod?"round":String(r.roundingMethod);if("floor"===l)c=Math.floor;else if("ceil"===l)c=Math.ceil;else{if("round"!==l)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");c=Math.round}var p,f=ep(a,s),h=(Wl(a)-Wl(s))/1e3,d=c((f-h)/60);if("second"===(p=null==r.unit?d<1?"second":d<60?"minute":d<1440?"hour":d<43200?"day":d<525600?"month":"year":String(r.unit)))return i.formatDistance("xSeconds",f,u);if("minute"===p)return i.formatDistance("xMinutes",d,u);if("hour"===p){var g=c(d/60);return i.formatDistance("xHours",g,u)}if("day"===p){var y=c(d/1440);return i.formatDistance("xDays",y,u)}if("month"===p){var m=c(d/43200);return i.formatDistance("xMonths",m,u)}if("year"===p){var _=c(d/525600);return i.formatDistance("xYears",_,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function Zp(t,e){Vl(2,arguments);var n=Hl(t),r=Hl(e);return n.getTime()>r.getTime()}function tf(t,e){Vl(2,arguments);var n=Hl(t),r=Hl(e);return n.getTime()<r.getTime()}function ef(t,e){Vl(2,arguments);var n=Hl(t),r=Hl(e);return n.getTime()===r.getTime()}function nf(t){Vl(1,arguments);var e=Hl(t);return e.setMinutes(0,0,0),e}function rf(t,e){Vl(2,arguments);var n=e||{},r=Hl(t).getTime(),i=Hl(n.start).getTime(),o=Hl(n.end).getTime();if(!(i<=o))throw new RangeError("Invalid interval");return r>=i&&r<=o}const of="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",sf={RFC3548:of,RFC4648:of,"RFC4648-HEX":"0123456789ABCDEFGHIJKLMNOPQRSTUV",Crockford:"0123456789ABCDEFGHJKMNPQRSTVWXYZ"};!function(t="Crockford"){const e=sf[t];if(!e)throw new Error("Unknown base32 variant: "+t);function n(t,e){const n=t.indexOf(e);if(-1===n)throw new Error("Invalid character found: "+e);return n}}("Crockford");function af(t){return[...t instanceof URL?t.searchParams.entries():t instanceof URLSearchParams?t.entries():function(t){try{return new URL(t).searchParams}catch(e){return t.startsWith("?")||(t="?"+t),new URL("http://localhost:1000"+t).searchParams}}(t).entries()].reduce((t,[e,n])=>(t[e]?"string"==typeof t[e]?t[e]=[t[e],n]:t[e].push(n):t[e]=n,t),{})}function uf(t){return"string"==typeof t||t instanceof URL||t instanceof Location}"undefined"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}()&&"undefined"!=typeof Uint8Array&&function(){try{new Blob([new Uint8Array(100)]).size}catch(t){return!1}}();const cf="link[rel~='index'][rel~='api'][type~='application/json']";function lf(){const t=function(){const t=document.querySelector(cf);if(!t)throw new Error(`No <${cf}> found!`);return t}();return{subscribe(e){e(t.href);const n=new MutationObserver(n=>{n.forEach(n=>{"href"===n.attributeName&&e(t.href)})});return n.observe(t,{attributes:!0}),()=>n.disconnect()},set(e){t.href=e},get:()=>t.href,update(e){t.href=e(t.href)}}}var pf=Object.assign?Object.assign:function(t,e,n,r){for(var i=1;i<arguments.length;i++)mf(Object(arguments[i]),(function(e,n){t[n]=e}));return t},ff=function(){if(Object.create)return function(t,e,n,r){var i=yf(arguments,1);return pf.apply(this,[Object.create(t)].concat(i))};{function t(){}return function(e,n,r,i){var o=yf(arguments,1);return t.prototype=e,pf.apply(this,[new t].concat(o))}}}(),hf=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},df="undefined"!=typeof window?window:Yi,gf={assign:pf,create:ff,trim:hf,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:yf,each:mf,map:function(t,e){var n=vf(t)?[]:{};return _f(t,(function(t,r){return n[r]=e(t,r),!1})),n},pluck:_f,isList:vf,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:df};function yf(t,e){return Array.prototype.slice.call(t,e||0)}function mf(t,e){_f(t,(function(t,n){return e(t,n),!1}))}function _f(t,e){if(vf(t)){for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}else for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r]}function vf(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var bf=gf.slice,wf=gf.pluck,xf=gf.each,Ef=gf.bind,If=gf.create,Sf=gf.isList,Cf=gf.isFunction,Nf=gf.isObject,Of={createStore:Lf},Tf={version:"2.0.12",enabled:!1,get:function(t,e){var n=this.storage.read(this._namespacePrefix+t);return this._deserialize(n,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(n,r){t.call(e,e._deserialize(n),(r||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return Lf.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return Lf(this.storage,this.plugins,t)}};function Lf(t,e,n){n||(n=""),t&&!Sf(t)&&(t=[t]),e&&!Sf(e)&&(e=[e]);var r=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var o=If({_namespacePrefix:r,_namespaceRegexp:i,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var n=t.read(e)===e;return t.remove(e),n}catch(t){return!1}},_assignPluginFnProp:function(t,e){var n=this[e];this[e]=function(){var e=bf(arguments,0),r=this;function i(){if(n)return xf(arguments,(function(t,n){e[n]=t})),n.apply(r,e)}var o=[i].concat(e);return t.apply(r,o)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(Sf(t))xf(t,(function(t){e._addPlugin(t)}));else if(!wf(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!Cf(t))throw new Error("Plugins must be function values that return objects");var n=t.call(this);if(!Nf(n))throw new Error("Plugins must return an object of function properties");xf(n,(function(n,r){if(!Cf(n))throw new Error("Bad plugin property: "+r+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(n,r)}))}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;if(t){var e=t.warn?t.warn:t.log;e.apply(t,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},Tf,{plugins:[]});return o.raw={},xf(o,(function(t,e){Cf(t)&&(o.raw[e]=Ef(o,t))})),xf(t,(function(t){o._addStorage(t)})),xf(e,(function(t){o._addPlugin(t)})),o}var Pf=gf.Global,Rf={name:"localStorage",read:Mf,write:function(t,e){return Af().setItem(t,e)},each:function(t){for(var e=Af().length-1;e>=0;e--){var n=Af().key(e);t(Mf(n),n)}},remove:function(t){return Af().removeItem(t)},clearAll:function(){return Af().clear()}};function Af(){return Pf.localStorage}function Mf(t){return Af().getItem(t)}var Df=gf.Global,kf={name:"sessionStorage",read:jf,write:function(t,e){return Ff().setItem(t,e)},each:function(t){for(var e=Ff().length-1;e>=0;e--){var n=Ff().key(e);t(jf(n),n)}},remove:function(t){return Ff().removeItem(t)},clearAll:function(){return Ff().clear()}};function Ff(){return Df.sessionStorage}function jf(t){return Ff().getItem(t)}var $f=gf.trim,Bf={name:"cookieStorage",read:function(t){if(!t||!zf(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(Uf.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){if(!t)return;Uf.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:qf,remove:Gf,clearAll:function(){qf((function(t,e){Gf(e)}))}},Uf=gf.Global.document;function qf(t){for(var e=Uf.cookie.split(/; ?/g),n=e.length-1;n>=0;n--)if($f(e[n])){var r=e[n].split("="),i=unescape(r[0]);t(unescape(r[1]),i)}}function Gf(t){t&&zf(t)&&(Uf.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function zf(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(Uf.cookie)}var Vf={name:"memoryStorage",read:function(t){return Hf[t]},write:function(t,e){Hf[t]=e},each:function(t){for(var e in Hf)Hf.hasOwnProperty(e)&&t(Hf[e],e)},remove:function(t){delete Hf[t]},clearAll:function(t){Hf={}}},Hf={};var Yf=[Rf,kf,Bf,Vf],Xf=Of.createStore(Yf,[]);function Wf(t){this.message=t}Wf.prototype=new Error,Wf.prototype.name="InvalidCharacterError";var Kf="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Wf("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};var Qf=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(Kf(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return Kf(e)}};function Jf(t){this.message=t}Jf.prototype=new Error,Jf.prototype.name="InvalidTokenError";var Zf=function(t,e){if("string"!=typeof t)throw new Jf("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(Qf(t.split(".")[n]))}catch(t){throw new Jf("Invalid token specified: "+t.message)}};Zf.InvalidTokenError=Jf;function th(t,e){return function(t){if(!t)return t;const e=1e3*t.exp,n=1e3*t.iat,r=1e3*t.nbf;return Object.assign(t,{user:t.sub,expms:e,expires:new Date(e),iatms:n,created:new Date(n),nbfms:r,starts:new Date(r)})}(function(t,e){if(t&&t.token)try{const n=Zf(t.token);if(n&&(e||function(t){if(t&&t.exp)return 1e3*t.exp>Date.now();return!1}(n)))return Object.assign(t,n)}catch(t){console.warn("Failed to Decode JWT. Use is not logged in.",t),rh()}return null}(t,!!e))}function eh(t=!1){return function(t){const e=Object.assign({},af(self.location.search.substr(1)),af(self.location.hash.substr(1))),n=e.access_token||e.token;if(!n)return null;const r=th({token:n,type:"bearer"},t);return r&&nh(r),r}(t)||function(t){return th(Xf.get("user/auth"),t)}(t)}function nh(t){Xf.set("user/auth",t)}function rh(){Xf.remove("user/auth")}function ih(t){t.user=eh();const e=function(t){const e=new Set;return{subscribe:function(n){return n(t.user),e.add(n),()=>e.delete(n)},set(n){t.user=n,n?nh(n):rh(),function(t){e.forEach(e=>e(t))}(n)}}}(t);return Object.assign({user:e,isLoggedIn:()=>function(t){return!!t.user}(t),logIn:(n,r)=>oh(t,e.set,n,r),renew:n=>function(t,e,n){if(!t.user)throw new Error("Use logIn. Cannot log in without current user data.");return oh(t,e,t.user.email,n)}(t,e.set,n),logOut:t=>async function(t,e=!1){t(null),e||(window.location.href="https://my.parkingboss.com/user/logout")}(e.set,t)})}async function oh(t,e,n,r){if(!0===n)return void(window.location.href=function(t,e){const n=uf(t)?t:self.location,r=e||(uf(t)?{}:t),i=r.absolute?void 0:r.base||document.baseURI,o=n instanceof URL?n:new URL(n.toString(),i);Object.entries(r.query||{}).forEach(([t,e])=>{e?(Array.isArray(e)?e:[e]).forEach((e,n)=>{0==n?o.searchParams.set(t,e):o.searchParams.append(t,e)}):o.searchParams.delete(t)}),r.hash&&(o.hash=r.hash);const s=function(t,e=!0){return t.href}(o);return r.login?`https://my.parkingboss.com/user/navigate?url=${s}`:s}({login:!0}));if(!r)throw new Error("If not redirecting, password and email are both required.");const i=new URL(t.apiBase+"/auth/tokens");i.searchParams.set("lifetime","P7D"),i.searchParams.set("email",n),i.searchParams.set("ts",(new Date).toISOString());const o=new FormData;o.set("email",n),o.set("password",r);const s=await self.fetch(i.toString(),{method:"POST",body:o}),a=await s.json();return s.ok?(e(th(a)),a):a}const sh=new Set(["files","notes","contacts"]);function ah(t,e){!function t(e,n,r=[]){pr(e,(e,i)=>{const o=[...r,i];n(e,o)&&t(e,n,o)})}(t[e],(n,r)=>{if(!n.type)return!0;const i=function(t,e,n){if(t.subject)return t.subject;if("items"!==e)return e;const r=n.items[t.id].id;return t.type!==r.type?r.id:null}(n,r[r.length-2],t);let o=null;(n.id===n.subject||"items"===i&&Me(t,["items",n.id]).id)&&(o=n.id,n.id=`${n.id}-${n.type}`),Lr(t,["items",n.id],n),"items"!==i&&(Lr(t,["attachments","items",i,n.id],n.type),o&&(Mr(t,["attachments","items",i,o]),Mr(t,[e,"items",o]),Lr(t,[e,"items",n.id],n)))})}function uh(t,...e){t.attachments||(t.attachments={items:{}}),t.items||(t.items={}),function(t,e){e.filter(t=>!sh.has(t)).forEach(e=>{const n=Me(t,[e,"items"],{});Object.assign(t.items,n),Lr(t,[e,"items"],function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}(Object.keys(n).map(t=>[t,t])))})}(t,e),function(t,e){e.filter(t=>sh.has(t)).forEach(e=>ah(t,e))}(t,e);const n=Me(t,"media.types",{});pr(n,t=>{t.type="media-type"}),Object.assign(t.items,n)}function ch(t,e,n){pr(t,(r,i)=>{const o=typeof r;"object"==o&&ch(r,null,n),"string"==o&&e!=r&&(t[i]=Me(n,r,r))})}function lh(t){pr(t.items,ch),pr(t.attachments.items,(e,n)=>function(t,e,n){const r=n[e];pr(t,(t,e)=>{const i=n[e];i.subject||(i.subject=r);const o=t+"s";r[o]||(r[o]=[]),r[o].push(i)})}(e,n,t.items)),function(t){t.items=Rr(_r(t.items,t=>Object.keys(t)))}(t.attachments),function(t){pr(t,e=>{e&&(e.items&&(e.items=Object.values(e.items).map(e=>Me(t,["items",e],e))),e.item&&(e.item=t.items[e.item]))})}(t)}function ph(t){return{fetch:(e,n,r={},i=null,o=!0)=>hh(t,e,n,i,r,o),get:(e,n={},r=!0)=>hh(t,"GET",e,null,n,r),post:(e,n={},r=null,i=!0)=>hh(t,"POST",e,r,n,i),authorizations:(e,n=!1)=>function(t,e,n=!1){return hh(t,"GET","/authorizations",null,e,!n,"authorizations","users")}(t,e,n),media:(e,n,r,i=!1)=>function(t,e,n,r,i=!1){return hh(t,"GET",`/locations/${e}/media/${n}}`,null,r,!i,"media","locations")}(t,e,n,r,i),medias:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET",`/locations/${e}/media`,null,n,!r,"media","locations")}(t,e,n,r),permits:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET","/permits",null,Object.assign({scope:e},n),!0,"notes","contacts")}(t,e,n,r),tenant:(e,n,r,i=!1)=>function(t,e,n,r,i=!1){return hh(t,"GET",`/locations/${e}/tenants/${n}`,null,r,!i,"tenants","locations")}(t,e,n,r,i),tenants:(e,n=!1)=>function(t,e,n=!1){return hh(t,"GET","/units/tenants",null,e,!n)}(t,e,n),property:(e,n,r=!1)=>function(t,e,n,r=!0){return hh(t,"GET",`/locations/${e}`,null,n,!r,"locations","addresses")}(t,e,n,r),geoProperties:(e,n,r=!0)=>function(t,e,n,r=!1){const i=Array.isArray(e)?e.join(","):`${e.lon},${e.lat}`;return hh(t,"GET",`/locations/${i}`,null,n,!r,"addresses")}(t,e,n,r),properties:(e,n=!1)=>function(t,e,n=!1){return hh(t,"GET","/locations",null,e,!n,"addresses")}(t,e,n),space:(e,n,r,i=!1)=>function(t,e,n,r,i=!1){return hh(t,"GET",`/locations/${e}/spaces/${n}`,null,r,!i,"spaces","locations")}(t,e,n,r,i),spaces:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET",`/locations/${e}/spaces`,null,n,!r,"spaces","locations")}(t,e,n,r),vehicle:(e,n,r,i=!1)=>function(t,e,n,r,i=!1){return hh(t,"GET",`/locations/${e}/vehicles/${n}`,null,r,!i,"vehicles","locations")}(t,e,n,r,i),violations:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET","/violations",null,Object.assign({scope:e},n),!r,"notes")}(t,e,n,r),users:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET",`/users/${e}`,null,n,!r,"users")}(t,e,n,r),units:(e,n,r=!1)=>function(t,e,n,r=!1){return hh(t,"GET",`/locations/${e}/units`,null,n,!r,"locations","units")}(t,e,n,r),observePlate:(e,n,r=!1)=>function(t,e,n,r=!1){const i=new FormData;return i.append("file",e,n.filename),delete n.filename,hh(t,"POST","/observations",i,n,!r)}(t,e,n,r)}}function fh(t,e,n){const r=new URL(t.apiBase+e);return Object.entries(n||{}).forEach(([t,e])=>{var n;Array.isArray(e)?e.forEach(e=>r.searchParams.append(t,e)):(n=e)&&(n.start instanceof Date||n.end instanceof Date)?r.searchParams.append(t,function(t){const{start:e,end:n}=t;return`${e?e.toISOString():""}/${n?n.toISOString():""}`}(e)):e instanceof Date?r.searchParams.append(t,e.toISOString()):e&&r.searchParams.append(t,e)}),r.toString()}async function hh(t,e,n,r=null,i={},o=!0,...s){const a=!t.skipNormalization,u=(new Date).toISOString(),c=fh(t,n,function(t,e,n){const r=Object.assign({},t,{viewpoint:t.viewpoint||new Date,client:n.client});var i;return!1!==e&&(r.Authorization=!0===e?(i=n.user)&&[i.type,i.token].filter(t=>t).join(" "):e),r}(i,o,t)),l=await async function(t,e,n){try{const r={method:t};return n&&(r.body=n),await self.fetch(e,r)}catch(t){throw Object.assign(new Error("Network Error"),{url:e})}}(e,c,r),p=await async function(t){let e;try{e=await t.clone().json()}catch(n){e={body:await t.text()}}let n=t.headers.get("Date")||t.headers.get("date");n&&(n=new Date(n).toISOString());let r=t.headers.get("Last-Modified")||t.headers.get("last-modified");r&&(r=new Date(r).toISOString());let i=t.status;return Object.assign(e,{date:n,modified:r,status:i})}(l);if(p&&(p.requested=u),l.ok)return uh(p,...s),a&&lh(p),p;throw Object.assign(new Error("API Error"),p)}const dh=["token","access_token","accessToken"];const gh=function(t,e){return Wp(t,"EE MMM d yyyy h:mm a")},yh=function(t){return Wp(t,"yyyy-MM-dd'T'HH:mm:ssxxx")},mh=function(t){var e=new Date(t);return"string"==typeof t&&(e=new Date(t.replace(/[+-][0-9]{1,2}:?[0-9]{2}$/,Wp(e,"xxx")))),e},_h=function(t,e){if("string"!=typeof t)return t;const[n,r]=t.split("/").map(t=>e?e(t):new Date(t));return{start:n,end:r}},vh=function(t,e){return"string"!=typeof t?t:t.split("/").map(t=>e?e(t):new Date(t))};function bh(t,e){return t?t.toISOString?t:"string"==typeof t?new Date(e(...vh(t))):null:t}const wh=t=>bh(t,Math.max),xh=t=>bh(t,Math.min),Eh=new function(t){const e=function(t){const e={client:t.client,user:null,apiBase:t.apiBase||"TEMP_FAKE",skipNormalization:!!t.skipNormalization};if(!t.apiBase){lf().subscribe(t=>e.apiBase=t)}return e}(t),n=Object.assign({settings:e},ih(e),ph(e));return t.skipUrlRewrite||self.history.replaceState(null,"",function(){const t=new URL(location.toString()),e=af(t.hash);return dh.forEach(n=>{t.searchParams.delete("token"),delete e[n]}),t.hash=function(t){const e=new URL("http://localhost:1000");return Object.entries(t).forEach(([t,n])=>{"string"==typeof n?e.searchParams.set(t,n):n.forEach(n=>e.searchParams.append(t,n))}),e.searchParams.toString()}(e),t.toString()}()),n}({client:"AmenityPass"}),Ih=Ri(Xf.get("auth"));async function Sh(t,e,n,r){const i=await fetch(`${Eh.settings.apiBase}/accounts/auth/tokens?viewpoint=${(new Date).toISOString()}&scope=${t}&subject=${e}&password=${n}&context=${r}`,{method:"POST"});if(i.ok){const n=await Lh(i);return n.item=Me(n,["accounts","items",Me(n,"accounts.item")]),Mr(n,"accounts"),Ih.update(r=>Er(r,{[t]:n,[e]:n},{[n.item.scope]:n,[n.subject]:n})),n}return await Lh(i)}Ih.subscribe(t=>t&&Xf.set("auth",t));const Ch=ir((async function(t,e){const n=await fetch(`${Eh.settings.apiBase}/locations/${t.scope}/tenants/${t.id}/permits?viewpoint=${yh(new Date)}&valid=${yh(function(t,e){Vl(2,arguments);var n=Hl(t),r=zl(e);return n.setDate(n.getDate()+r),n}(new Date,-7))}/&Authorization=${e.type} ${e.token}`);if(n.ok){const t=await Lh(n);return t.items=Er({},t.items,...mr(t,(t,e)=>t.items)),t}return await Lh(n)}),1e3,{trailing:!0,leading:!0});function Nh(t){return new URLSearchParams([...t.entries()])}async function Oh(t,e=!0){const n=await fetch(`${Eh.settings.apiBase}/permits/temporary?viewpoint=${(new Date).toISOString()}&issue=${e}&${Nh(t).toString()}`,{method:"POST"});if(n.ok){const t=await Lh(n);return function(t){t&&Gl(Er({},t.items,...mr(t,(t,e)=>t.items)))}(t),t}return await Lh(n)}async function Th(t){if(!t)return{};if("string"==typeof t&&(t=[t]),!t||!t.length)return{};const e=await fetch(`${Eh.settings.apiBase}/permits?viewpoint=${(new Date).toISOString()}${t.map(t=>"&permit="+t).join("")}`),n=await e.json();return Gl(n),n}async function Lh(t){return t?t.text().then((function(e){return e?Promise.resolve(e).then(JSON.parse).catch((function(n){return{status:t.status,message:e}})):{status:t.status}})).catch((function(e){return{status:t.status}})):{}}var Ph=Ki((function(t,e){t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(!a&&Xi)return Xi();if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var o=Xi,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(n,r){var i=t("events").EventEmitter,o=t("./store"),s=t("mqtt-packet"),a=t("readable-stream").Writable,u=t("inherits"),c=t("reinterval"),l=t("./validations"),p=t("xtend"),f=t("debug")("mqttjs:client"),h=r.setImmediate||function(t){n.nextTick(t)},d={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},g=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],y={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function m(t,e,n){f("sendPacket: packet: %O",e),f("sendPacket: emitting `packetsend`"),t.emit("packetsend",e),f("sendPacket: writing to stream");var r=s.writeToStream(e,t.stream,t.options);f("sendPacket: writeToStream result %s",r),!r&&n?(f("sendPacket: handle events on `drain` once through callback."),t.stream.once("drain",n)):n&&(f("sendPacket: invoking cb"),n())}function _(t){t&&(f("flush: queue exists? %b",!!t),Object.keys(t).forEach((function(e){"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])})))}function v(t,e,n,r){f("storeAndSend: store packet with cmd: %s to outgoingStore",e.cmd),t.outgoingStore.put(e,(function(i){if(i)return n&&n(i);r(),m(t,e,n)}))}function b(t){f("nop hit: %o",t)}function w(t,e){var n,r=this;if(!(this instanceof w))return new w(t,e);for(n in this.options=e||{},f("MqttClient :: options: %o",e),d)void 0===this.options[n]?this.options[n]=d[n]:this.options[n]=e[n];this.options.clientId="string"==typeof e.clientId?e.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),f("MqttClient: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.outgoingStore=e.outgoingStore||new o,this.incomingStore=e.incomingStore||new o,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",(function(){f("MqttClient:connect");var t=this.queue;!function e(){var n,i=t.shift();f("MqttClient:deliver: entry %o",i),i&&(n=i.packet,f("MqttClient:deliver: call _sendPacket for %o",n),r._sendPacket(n,(function(t){i.cb&&i.cb(t),e()})))}()})),this.on("close",(function(){f("MqttClient: close event. Mark disconnected."),this.connected=!1,clearTimeout(this.connackTimer),f("MqttClient:close: clear ping timer"),null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null),f("MqttClient:close: call _setupReconnect"),this._setupReconnect()})),i.call(this),f("MqttClient: call _setupStream"),this._setupStream()}u(w,i),w.prototype._setupStream=function(){var t,e=this,r=new a,i=s.parser(this.options),o=null,u=[];function c(){if(u.length)n.nextTick(l);else{var t=o;o=null,t()}}function l(){f("stream:work: called");var t=u.shift();if(t)f("stream:work: calling _handlePacket"),e._handlePacket(t,c);else{var n=o;o=null,f("stream:work: done is %s",!!n),n&&n()}}if(f("_setupStream: calling method to clear reconnect"),this._clearReconnect(),f("_setupStream: setting stream builder"),this.stream=this.streamBuilder(this),i.on("packet",(function(t){f("parser: on packet push to packets array."),u.push(t)})),r._write=function(t,e,n){o=n,f("stream:writable:_write: parsing buffer"),i.parse(t),l()},f("_setupStream: piping stream to writable"),this.stream.pipe(r),this.stream.on("error",(function(t){f("stream error"),g.includes(t.code)?(f("streamErrorHandler :: emitting error"),e.emit("error",t)):b(t)})),this.stream.on("close",(function(){var t;f("(%s)stream :: on close",e.options.clientId),(t=e.outgoing)&&(f("flushVolatile: queue exists? %s",!!t),Object.keys(t).forEach((function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])}))),f("stream: emit close to MqttClient"),e.emit("close")})),f("_setupStream: sending packet `connect`"),(t=Object.create(this.options)).cmd="connect",m(this,t),i.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return e.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&m(this,p({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){f("connectTimeout hit! Calling _cleanUp with force `true`"),e._cleanUp(!0)}),this.options.connectTimeout)},w.prototype._handlePacket=function(t,e){f("_handlePacket");var n=this.options;if(5===n.protocolVersion&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(f("_handlePacket: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e()}},w.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},w.prototype.publish=function(t,e,n,r){var i;f("MqttClient:publish `%s` to topic `%s`",e,t);var o=this.options;if("function"==typeof n&&(r=n,n=null),n=p({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},5===o.protocolVersion&&(i.properties=n.properties,(!o.properties&&i.properties&&i.properties.topicAlias||n.properties&&o.properties&&(n.properties.topicAlias&&o.properties.topicAliasMaximum&&n.properties.topicAlias>o.properties.topicAliasMaximum||!o.properties.topicAliasMaximum&&n.properties.topicAlias))&&delete i.properties.topicAlias),n.qos){case 1:case 2:this.outgoing[i.messageId]={volatile:!1,cb:r||b},this._storeProcessing?(f("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[i.messageId]=!1,this._storePacket(i,void 0,n.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,void 0,n.cbStorePut));break;default:this._storeProcessing?(f("_storeProcessing enabled"),this._storePacket(i,r,n.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,r,n.cbStorePut))}return this},w.prototype.subscribe=function(){for(var t,e=new Array(arguments.length),n=0;n<arguments.length;n++)e[n]=arguments[n];var r,i=[],o=e.shift(),s=o.resubscribe,a=e.pop()||b,u=e.pop(),c=this,d=this.options.protocolVersion;if(delete o.resubscribe,"string"==typeof o&&(o=[o]),"function"!=typeof a&&(u=a,a=b),null!==(r=l.validateTopics(o)))return h(a,new Error("Invalid topic "+r)),this;if(this._checkDisconnecting(a))return f("subscribe: discconecting true"),this;var g={qos:0};if(5===d&&(g.nl=!1,g.rap=!1,g.rh=0),u=p(g,u),Array.isArray(o)?o.forEach((function(t){if(f("subscribe: array topic %s",t),!c._resubscribeTopics.hasOwnProperty(t)||c._resubscribeTopics[t].qos<u.qos||s){var e={topic:t,qos:u.qos};5===d&&(e.nl=u.nl,e.rap=u.rap,e.rh=u.rh,e.properties=u.properties),f("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),i.push(e)}})):Object.keys(o).forEach((function(t){if(f("subscribe: object topic %s",t),!c._resubscribeTopics.hasOwnProperty(t)||c._resubscribeTopics[t].qos<o[t].qos||s){var e={topic:t,qos:o[t].qos};5===d&&(e.nl=o[t].nl,e.rap=o[t].rap,e.rh=o[t].rh,e.properties=u.properties),f("subscribe: pushing `%s` to subs list",e),i.push(e)}})),t={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:this._nextId()},u.properties&&(t.properties=u.properties),i.length){if(this.options.resubscribe){f("subscribe: resubscribe true");var y=[];i.forEach((function(t){if(c.options.reconnectPeriod>0){var e={qos:t.qos};5===d&&(e.nl=t.nl||!1,e.rap=t.rap||!1,e.rh=t.rh||0,e.properties=t.properties),c._resubscribeTopics[t.topic]=e,y.push(t.topic)}})),c.messageIdToTopic[t.messageId]=y}return this.outgoing[t.messageId]={volatile:!0,cb:function(t,e){if(!t)for(var n=e.granted,r=0;r<n.length;r+=1)i[r].qos=n[r];a(t,i)}},f("subscribe: calling _sendPacket"),this._sendPacket(t),this}a(null,[])},w.prototype.unsubscribe=function(){for(var t={cmd:"unsubscribe",qos:1,messageId:this._nextId()},e=this,n=new Array(arguments.length),r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.shift(),o=n.pop()||b,s=n.pop();return"string"==typeof i&&(i=[i]),"function"!=typeof o&&(s=o,o=b),this._checkDisconnecting(o)||("string"==typeof i?t.unsubscriptions=[i]:"object"==typeof i&&i.length&&(t.unsubscriptions=i),this.options.resubscribe&&t.unsubscriptions.forEach((function(t){delete e._resubscribeTopics[t]})),"object"==typeof s&&s.properties&&(t.properties=s.properties),this.outgoing[t.messageId]={volatile:!0,cb:o},f("unsubscribe: send packet"),this._sendPacket(t)),this},w.prototype.end=function(t,e,r){var i=this;function o(){f("end :: (%s) :: closeStores: closing incoming and outgoing stores",i.options.clientId),i.disconnected=!0,i.incomingStore.close((function(){i.outgoingStore.close((function(){f("end :: (%s) :: closeStores: emitting end",i.options.clientId),i.emit("end"),r&&(f("end :: (%s) :: closeStores: invoking callback with args",i.options.clientId),r())}))})),i._deferredReconnect&&i._deferredReconnect()}function s(){f("end :: (%s) :: finish :: calling _cleanUp with force %s",i.options.clientId,t),i._cleanUp(t,()=>{f("end :: finish :: calling process.nextTick on closeStores"),n.nextTick(o.bind(i))},e)}return null!=t&&"boolean"==typeof t||(r=e||b,e=t,t=!1,"object"!=typeof e&&(r=e,e=null,"function"!=typeof r&&(r=b))),"object"!=typeof e&&(r=e,e=null),f("end :: cb? %s",!!r),r=r||b,this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?(f("end :: (%s) :: calling finish in 10ms once outgoing is empty",i.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,s,10))):(f("end :: (%s) :: immediately calling finish",i.options.clientId),s()),this)},w.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},(function(){e(new Error("Message removed"))})),this},w.prototype.reconnect=function(t){f("client reconnect");var e=this,n=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new o,e.outgoingStore=e.options.outgoingStore||new o,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},w.prototype._reconnect=function(){f("_reconnect: emitting reconnect to client"),this.emit("reconnect"),f("_reconnect: calling _setupStream"),this._setupStream()},w.prototype._setupReconnect=function(){f("_setupReconnect");var t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0?(this.reconnecting||(f("_setupReconnect :: emitting offline state"),this.emit("offline"),this.reconnecting=!0),f("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval((function(){f("reconnectTimer calling _reconnect()"),t._reconnect()}),t.options.reconnectPeriod)):f("_setupReconnect :: doing nothing...")},w.prototype._clearReconnect=function(){f("_clearReconnect called. clearing reconnectTimer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},w.prototype._cleanUp=function(t,e){var n=arguments[2];if(e&&(f("_cleanUp: done callback provided for on stream close"),this.stream.on("close",e)),f("_cleanUp: forced? %s",t),t)0===this.options.reconnectPeriod&&this.options.clean&&_(this.outgoing),f("(%s)_cleanUp: destroying stream",this.options.clientId),this.stream.destroy();else{var r=p({cmd:"disconnect"},n);f("(%s)_cleanUp: sending disconnect packet",this.options.clientId),this._sendPacket(r,h.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(f("_cleanUp: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(f("_cleanUp: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(f("(%s)_cleanUp: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())},w.prototype._sendPacket=function(t,e,n){if(f("_sendPacket :: (%s) ::  start",this.options.clientId),n=n||b,!this.connected)return f("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(t,e,n);switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void v(this,t,e,n);default:return void m(this,t,e)}switch(t.qos){case 2:case 1:v(this,t,e,n);break;case 0:default:m(this,t,e)}f("_sendPacket :: (%s) ::  end",this.options.clientId)},w.prototype._storePacket=function(t,e,n){f("_storePacket :: packet: %o",t),f("_storePacket :: cb? %s",!!e),n=n||b,0===(t.qos||0)&&this.queueQoSZero||"publish"!==t.cmd?this.queue.push({packet:t,cb:e}):t.qos>0?(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoingStore.put(t,(function(t){if(t)return e&&e(t);n()}))):e&&e(new Error("No connection to broker"))},w.prototype._setupPingTimer=function(){var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=c((function(){t._checkPing()}),1e3*this.options.keepalive))},w.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},w.prototype._checkPing=function(){f("_checkPing :: checking ping..."),this.pingResp?(f("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(f("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},w.prototype._handlePingresp=function(){this.pingResp=!0},w.prototype._handleConnack=function(t){f("_handleConnack");var e=this.options,n=5===e.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(this.connackTimer),t.properties&&(t.properties.topicAliasMaximum&&(e.properties||(e.properties={}),e.properties.topicAliasMaximum=t.properties.topicAliasMaximum),t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)),0===n)this.reconnecting=!1,this._onConnect(t);else if(n>0){var r=new Error("Connection refused: "+y[n]);r.code=n,this.emit("error",r)}},w.prototype._handlePublish=function(t,e){f("_handlePublish: packet %o",t),e=void 0!==e?e:b;var n=t.topic.toString(),r=t.payload,i=t.qos,o=t.messageId,s=this,a=this.options,u=[0,16,128,131,135,144,145,151,153];switch(f("_handlePublish: qos %d",i),i){case 2:a.customHandleAcks(n,r,t,(function(n,r){return n instanceof Error||(r=n,n=null),n?s.emit("error",n):-1===u.indexOf(r)?s.emit("error",new Error("Wrong reason code for pubrec")):void(r?s._sendPacket({cmd:"pubrec",messageId:o,reasonCode:r},e):s.incomingStore.put(t,(function(){s._sendPacket({cmd:"pubrec",messageId:o},e)})))}));break;case 1:a.customHandleAcks(n,r,t,(function(i,a){return i instanceof Error||(a=i,i=null),i?s.emit("error",i):-1===u.indexOf(a)?s.emit("error",new Error("Wrong reason code for puback")):(a||s.emit("message",n,r,t),void s.handleMessage(t,(function(t){if(t)return e&&e(t);s._sendPacket({cmd:"puback",messageId:o,reasonCode:a},e)})))}));break;case 0:this.emit("message",n,r,t),this.handleMessage(t,e);break;default:f("_handlePublish: unknown QoS. Doing nothing.")}},w.prototype.handleMessage=function(t,e){e()},w.prototype._handleAck=function(t){f("handling ack packet");var e,n=t.messageId,r=t.cmd,i=null,o=this.outgoing[n]?this.outgoing[n].cb:null,s=this;if(o){switch(f("ack packet of type: %s",r),r){case"pubcomp":case"puback":var a=t.reasonCode;a&&a>0&&16!==a&&((e=new Error("Publish error: "+y[a])).code=a,o(e,t)),delete this.outgoing[n],this.outgoingStore.del(t,o);break;case"pubrec":i={cmd:"pubrel",qos:2,messageId:n};var u=t.reasonCode;u&&u>0&&16!==u?((e=new Error("Publish error: "+y[u])).code=u,o(e,t)):this._sendPacket(i);break;case"suback":delete this.outgoing[n];for(var c=0;c<t.granted.length;c++)if(0!=(128&t.granted[c])){var l=this.messageIdToTopic[n];l&&l.forEach((function(t){delete s._resubscribeTopics[t]}))}o(null,t);break;case"unsuback":delete this.outgoing[n],o(null);break;default:s.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else f("Server sent an ack in error. Ignoring.")},w.prototype._handlePubrel=function(t,e){f("handling pubrel packet"),e=void 0!==e?e:b;var n=t.messageId,r=this,i={cmd:"pubcomp",messageId:n};r.incomingStore.get(t,(function(t,n){t?r._sendPacket(i,e):(r.emit("message",n.topic,n.payload,n),r.handleMessage(n,(function(t){if(t)return e(t);r.incomingStore.del(n,b),r._sendPacket(i,e)})))}))},w.prototype._handleDisconnect=function(t){this.emit("disconnect",t)},w.prototype._nextId=function(){var t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},w.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},w.prototype._resubscribe=function(t){f("_resubscribe");var e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!t.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){f("_resubscribe: protocolVersion 5");for(var n=0;n<e.length;n++){var r={};r[e[n]]=this._resubscribeTopics[e[n]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[n]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},w.prototype._onConnect=function(t){if(this.disconnected)this.emit("connect",t);else{var e=this;this._setupPingTimer(),this._resubscribe(t),this.connected=!0,function n(){var r=e.outgoingStore.createStream();function i(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}function o(){r.destroy(),r=null,i()}e.once("close",o),r.on("error",(function(t){i(),e.removeListener("close",o),e.emit("error",t)})),r.on("end",(function(){var r=!0;for(var s in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[s]){r=!1;break}r?(i(),e.removeListener("close",o),e.emit("connect",t)):n()})),function t(){if(r){e._storeProcessing=!0;var n,i=r.read(1);i?e._packetIdsDuringStoreProcessing[i.messageId]?t():e.disconnecting||e.reconnectTimer?r.destroy&&r.destroy():(n=e.outgoing[i.messageId]?e.outgoing[i.messageId].cb:null,e.outgoing[i.messageId]={volatile:!1,cb:function(e,r){n&&n(e,r),t()}},e._packetIdsDuringStoreProcessing[i.messageId]=!0,e._sendPacket(i)):r.once("readable",t)}}()}()}},e.exports=w}).call(this,t("_process"),void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./store":7,"./validations":8,_process:100,debug:16,events:82,inherits:87,"mqtt-packet":91,"readable-stream":116,reinterval:117,xtend:140}],2:[function(t,e,n){(function(n){var r,i,o,s=t("readable-stream").Transform,a=t("duplexify"),u=t("base64-js"),c=!1;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");var l="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);var p=function(t,e){var n="alis"===t.protocol?"wss":"ws",r=n+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=n+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);return(r=e.my).connectSocket({url:p,protocols:l}),i=function(){var t=new s;return t._write=function(t,e,n){r.sendSocketMessage({data:t.buffer,success:function(){n()},fail:function(){n(new Error)}})},t._flush=function(t){r.closeSocket({success:function(){t()}})},t}(),o=a.obj(),c||(c=!0,r.onSocketOpen((function(){o.setReadable(i),o.setWritable(i),o.emit("connect")})),r.onSocketMessage((function(t){if("string"==typeof t.data){var e=u.toByteArray(t.data),r=n.from(e);i.push(r)}else{var o=new FileReader;o.addEventListener("load",(function(){var t=o.result;t=t instanceof ArrayBuffer?n.from(t):n.from(t,"utf8"),i.push(t)})),o.readAsArrayBuffer(t.data)}})),r.onSocketClose((function(){o.end(),o.destroy()})),r.onSocketError((function(t){o.destroy(t)}))),o}}).call(this,t("buffer").Buffer)},{"base64-js":10,buffer:12,duplexify:18,"readable-stream":116}],3:[function(t,e,n){var r=t("net");e.exports=function(t,e){var n,i;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",n=e.port,i=e.hostname,r.createConnection(n,i)}},{net:11}],4:[function(t,e,n){var r=t("tls");e.exports=function(t,e){var n;function i(r){e.rejectUnauthorized&&t.emit("error",r),n.end()}return e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",e.servername=e.host,e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,(n=r.connect(e)).on("secureConnect",(function(){e.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",i)})),n.on("error",i),n}},{tls:11}],5:[function(t,e,n){(function(n){var r=t("debug")("mqttjs:connect:ws"),i=t("websocket-stream"),o=t("url"),s=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],a="browser"===n.title;function u(t,e){r("createWebSocket"),r("opts: %o",e);var n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={}),a||"wss"!==t.protocol||s.forEach((function(e){t.hasOwnProperty(e)&&!t.wsOptions.hasOwnProperty(e)&&(t.wsOptions[e]=t[e])}))}(e);var o=function(t,e){var n=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return r("creating new Websocket for url: %s and protocol: %s",o,n),i(o,[n],e.wsOptions)}e.exports=a?function(t,e){if(r("browserStreamBuilder"),e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=o.parse(document.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return u(t,e)}:function(t,e){return u(t,e)}}).call(this,t("_process"))},{_process:100,debug:16,url:132,"websocket-stream":137}],6:[function(t,e,n){(function(n,r){var i,o,s,a=t("readable-stream").Transform,u=t("duplexify");e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");var c="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);var l=function(t,e){var n="wxs"===t.protocol?"wss":"ws",r=n+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=n+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);i=wx.connectSocket({url:l,protocols:c}),o=function(){var t=new a;return t._write=function(t,e,n){i.send({data:t.buffer,success:function(){n()},fail:function(t){n(new Error(t))}})},t._flush=function(t){i.close({success:function(){t()}})},t}(),(s=u.obj())._destroy=function(t,e){i.close({success:function(){e&&e(t)}})};var p=s.destroy;return s.destroy=function(){s.destroy=p;var t=this;n.nextTick((function(){i.close({fail:function(){t._destroy(new Error)}})}))}.bind(s),i.onOpen((function(){s.setReadable(o),s.setWritable(o),s.emit("connect")})),i.onMessage((function(t){var e=t.data;e=e instanceof ArrayBuffer?r.from(e):r.from(e,"utf8"),o.push(e)})),i.onClose((function(){s.end(),s.destroy()})),i.onError((function(t){s.destroy(new Error(t.errMsg))})),s}}).call(this,t("_process"),t("buffer").Buffer)},{_process:100,buffer:12,duplexify:18,"readable-stream":116}],7:[function(t,e,n){(function(n){var r=t("xtend"),i=t("readable-stream").Readable,o={objectMode:!0},s={clean:!0},a=t("es6-map");function u(t){if(!(this instanceof u))return new u(t);this.options=t||{},this.options=r(s,t),this._inflights=new a}u.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},u.prototype.createStream=function(){var t=new i(o),e=!1,r=[],s=0;return this._inflights.forEach((function(t,e){r.push(t)})),t._read=function(){!e&&s<r.length?this.push(r[s++]):this.push(null)},t.destroy=function(){if(!e){var t=this;e=!0,n.nextTick((function(){t.emit("close")}))}},t},u.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},u.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},u.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},e.exports=u}).call(this,t("_process"))},{_process:100,"es6-map":67,"readable-stream":116,xtend:140}],8:[function(t,e,n){function r(t){for(var e=t.split("/"),n=0;n<e.length;n++)if("+"!==e[n]){if("#"===e[n])return n===e.length-1;if(-1!==e[n].indexOf("+")||-1!==e[n].indexOf("#"))return!1}return!0}e.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(var e=0;e<t.length;e++)if(!r(t[e]))return t[e];return null}}},{}],9:[function(t,e,n){(function(n){var r=t("../client"),i=t("../store"),o=t("url"),s=t("xtend"),a={};function u(t,e){if("object"!=typeof t||e||(e=t,t=null),e=e||{},t){var n=o.parse(t,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(e=s(n,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(function(t){var e;t.auth&&((e=t.auth.match(/^(.+):(.+)$/))?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!a[e.protocol]){var i=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(t,e){return(!i||e%2!=0)&&"function"==typeof a[t]}))[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);var u=new r((function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol?e.servers[t._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),a[e.protocol](t,e)}),e);return u.on("error",(function(){})),u}"browser"!==n.title?(a.mqtt=t("./tcp"),a.tcp=t("./tcp"),a.ssl=t("./tls"),a.tls=t("./tls"),a.mqtts=t("./tls")):(a.wx=t("./wx"),a.wxs=t("./wx"),a.ali=t("./ali"),a.alis=t("./ali")),a.ws=t("./ws"),a.wss=t("./ws"),e.exports=u,e.exports.connect=u,e.exports.MqttClient=r,e.exports.Store=i}).call(this,t("_process"))},{"../client":1,"../store":7,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:100,url:132,xtend:140}],10:[function(t,e,n){n.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,l=s>0?r-4:r,p=0;p<l;p+=4)e=i[t.charCodeAt(p)]<<18|i[t.charCodeAt(p+1)]<<12|i[t.charCodeAt(p+2)]<<6|i[t.charCodeAt(p+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(p)]<<2|i[t.charCodeAt(p+1)]>>4,a[u++]=255&e),1===s&&(e=i[t.charCodeAt(p)]<<10|i[t.charCodeAt(p+1)]<<4|i[t.charCodeAt(p+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],11:[function(t,e,n){},{}],12:[function(t,e,n){(function(e){var r=t("base64-js"),i=t("ieee754");function o(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return n.__proto__=e.prototype,n}function e(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,n)}function s(t,n,r){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|p(t,n),i=o(r),s=i.write(t,n);return s!==r&&(i=i.slice(0,s)),i}(t,n);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return function(t,n,r){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r)).__proto__=e.prototype,i}(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return e.from(i,n,r);var s=function(t){if(e.isBuffer(t)){var n=0|l(t.length),r=o(n);return 0===r.length||t.copy(r,0,0,n),r}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?o(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),o(t<0?0:0|l(t))}function c(t){for(var e=t.length<0?0:0|l(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function l(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function p(t,n){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(t).length;default:if(o)return i?-1:M(t).length;n=(""+n).toLowerCase(),o=!0}}function f(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function h(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function d(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:g(t,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):g(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var p=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){p=!1;break}if(p)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[n+s]=a}return s}function m(t,e,n,r){return k(M(e,t.length-n),t,n,r)}function _(t,e,n,r){return k(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function v(t,e,n,r){return _(t,e,n,r)}function b(t,e,n,r){return k(D(e),t,n,r)}function w(t,e,n,r){return k(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=e;s<n;++s)o+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return o}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function R(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}n.Buffer=e,n.SlowBuffer=function(t){return+t!=t&&(t=0),e.alloc(+t)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,n){return s(t,e,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(t,e,n){return function(t,e,n){return a(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},e.allocUnsafe=function(t){return u(t)},e.allocUnsafeSlow=function(t){return u(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,n){if(F(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),F(n,Uint8Array)&&(n=e.from(n,n.offset,n.byteLength)),!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);o<s;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var s=t[r];if(F(s,Uint8Array)&&(s=e.from(s)),!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},e.byteLength=p,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)h(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)h(this,e,e+3),h(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)h(this,e,e+7),h(this,e+1,e+6),h(this,e+2,e+5),h(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):f.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},e.prototype.compare=function(t,n,r,i,o){if(F(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(r>>>=0)-(n>>>=0),u=Math.min(s,a),c=this.slice(i,o),l=t.slice(n,r),p=0;p<u;++p)if(c[p]!==l[p]){s=c[p],a=l[p];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},e.prototype.indexOf=function(t,e,n){return d(this,t,e,n,!0)},e.prototype.lastIndexOf=function(t,e,n){return d(this,t,e,n,!1)},e.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return b(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(t,n){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},e.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},e.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},e.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},e.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},e.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},e.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},e.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},e.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},e.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},e.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},e.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},e.prototype.copy=function(t,n,r,i){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===t&&r<n&&n<i)for(var s=o-1;s>=0;--s)t[s+n]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),n);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var s;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=n;s<r;++s)this[s]=t;else{var a=e.isBuffer(t)?t:e.from(t,i),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-n;++s)this[s+n]=a[s%u]}return this};var A=/[^+/0-9A-Za-z-_]/g;function M(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function k(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":10,buffer:12,ieee754:86}],13:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":88}],14:[function(t,e,n){var r,i=t("type/value/is"),o=t("type/value/ensure"),s=t("type/plain-function/ensure"),a=t("es5-ext/object/copy"),u=t("es5-ext/object/normalize-options"),c=t("es5-ext/object/map"),l=Function.prototype.bind,p=Object.defineProperty,f=Object.prototype.hasOwnProperty;r=function(t,e,n){var r,i=o(e)&&s(e.value);return delete(r=a(e)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&f.call(this,t)?i:(e.value=l.call(i,n.resolveContext?n.resolveContext(this):this),p(this,t,e),this[t])},r},e.exports=function(t){var e=u(arguments[1]);return i(e.resolveContext)&&s(e.resolveContext),c(t,(function(t,n){return r(n,t,e)}))}},{"es5-ext/object/copy":40,"es5-ext/object/map":48,"es5-ext/object/normalize-options":49,"type/plain-function/ensure":126,"type/value/ensure":130,"type/value/is":131}],15:[function(t,e,n){var r=t("type/value/is"),i=t("type/plain-function/is"),o=t("es5-ext/object/assign"),s=t("es5-ext/object/normalize-options"),a=t("es5-ext/string/#/contains");(e.exports=function(t,e){var n,i,u,c,l;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],r(t)?(n=a.call(t,"c"),i=a.call(t,"e"),u=a.call(t,"w")):(n=u=!0,i=!1),l={value:e,configurable:n,enumerable:i,writable:u},c?o(s(c),l):l}).gs=function(t,e,n){var u,c,l,p;return"string"!=typeof t?(l=n,n=e,e=t,t=null):l=arguments[3],r(e)?i(e)?r(n)?i(n)||(l=n,n=void 0):n=void 0:(l=e,e=n=void 0):e=void 0,r(t)?(u=a.call(t,"c"),c=a.call(t,"e")):(u=!0,c=!1),p={get:e,set:n,configurable:u,enumerable:c},l?o(s(l),p):p}},{"es5-ext/object/assign":37,"es5-ext/object/normalize-options":49,"es5-ext/string/#/contains":56,"type/plain-function/is":127,"type/value/is":131}],16:[function(t,e,n){(function(r){function i(){var t;try{t=n.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.true),t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),e){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))})),t.splice(o,0,r)}},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(i())}).call(this,t("_process"))},{"./debug":17,_process:100}],17:[function(t,e,n){function r(t){var e;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(e||i);t.diff=o,t.prev=e,t.curr=i,e=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var i=n.formatters[r];if("function"==typeof i){var o=s[u];e=i.call(t,o),s.splice(u,1),u--}return e})),n.formatArgs.call(t,s);var c=r.log||n.log||console.log.bind(console);c.apply(t,s)}}return r.namespace=t,r.enabled=n.enabled(t),r.useColors=n.useColors(),r.color=function(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(t),r.destroy=i,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function i(){var t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}(n=e.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){var e;n.save(t),n.names=[],n.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){var o=n.instances[e];o.enabled=n.enabled(o.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}},{ms:97}],18:[function(t,e,n){(function(n,r){var i=t("readable-stream"),o=t("end-of-stream"),s=t("inherits"),a=t("stream-shift"),u=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),c=function(t,e){t._corked?t.once("uncork",e):e()},l=function(t,e){return function(n){n?function(t,e){t._autoDestroy&&t.destroy(e)}(t,"premature close"===n.message?null:n):e&&!t._ended&&t.end()}},p=function(t,e,n){if(!(this instanceof p))return new p(t,e,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};s(p,i.Duplex),p.obj=function(t,e,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new p(t,e,n)},p.prototype.cork=function(){1==++this._corked&&this.emit("cork")},p.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},p.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,r=o(t,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&n.nextTick(i),this._writable=t,this._writable.on("drain",i),this._unwrite=function(){e._writable.removeListener("drain",i),r()},this.uncork()}else this.end()},p.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e,n=this,r=o(t,{writable:!1,readable:!0},l(this)),s=function(){n._forward()},a=function(){n.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(e=t,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",s),this._readable2.on("end",a),this._unread=function(){n._readable2.removeListener("readable",s),n._readable2.removeListener("end",a),r()},this._forward()}},p.prototype._read=function(){this._drained=!0,this._forward()},p.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=a(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},p.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var e=this;n.nextTick((function(){e._destroy(t)}))}},p.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},p.prototype._write=function(t,e,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,t,e,n)):t===u?this._finish(n):this._writable?void(!1===this._writable.write(t)?this._ondrain=n:n()):n()},p.prototype._finish=function(t){var e=this;this.emit("preend"),c(this,(function(){var n,r;n=e._forwardEnd&&e._writable,r=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),c(e,t)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},p.prototype.end=function(t,e,n){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},e.exports=p}).call(this,t("_process"),t("buffer").Buffer)},{_process:100,buffer:12,"end-of-stream":19,inherits:87,"readable-stream":116,"stream-shift":119}],19:[function(t,e,n){var r=t("once"),i=function(){},o=function(t,e,n){if("function"==typeof e)return o(t,null,e);e||(e={}),n=r(n||i);var s=t._writableState,a=t._readableState,u=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,l=function(){t.writable||p()},p=function(){c=!1,u||n.call(t)},f=function(){u=!1,c||n.call(t)},h=function(e){n.call(t,e?new Error("exited with error code: "+e):null)},d=function(e){n.call(t,e)},g=function(){return(!u||a&&a.ended)&&(!c||s&&s.ended)?void 0:n.call(t,new Error("premature close"))},y=function(){t.req.on("finish",p)};return function(t){return t.setHeader&&"function"==typeof t.abort}(t)?(t.on("complete",p),t.on("abort",g),t.req?y():t.on("request",y)):c&&!s&&(t.on("end",l),t.on("close",l)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",h),t.on("end",f),t.on("finish",p),!1!==e.error&&t.on("error",d),t.on("close",g),function(){t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",y),t.req&&t.req.removeListener("finish",p),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",p),t.removeListener("exit",h),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",g)}};e.exports=o},{once:98}],20:[function(t,e,n){var r=t("../../object/valid-value");e.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":55}],21:[function(t,e,n){var r=t("../../number/is-nan"),i=t("../../number/to-pos-integer"),o=t("../../object/valid-value"),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,u=Math.abs,c=Math.floor;e.exports=function(t){var e,n,l,p;if(!r(t))return s.apply(this,arguments);for(n=i(o(this).length),l=arguments[1],e=l=isNaN(l)?0:l>=0?c(l):i(this.length)-c(u(l));e<n;++e)if(a.call(this,e)&&(p=this[e],r(p)))return e;return-1}},{"../../number/is-nan":31,"../../number/to-pos-integer":35,"../../object/valid-value":55}],22:[function(t,e,n){e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":23,"./shim":24}],23:[function(t,e,n){e.exports=function(){var t,e,n=Array.from;return"function"==typeof n&&(e=n(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],24:[function(t,e,n){var r=t("es6-symbol").iterator,i=t("../../function/is-arguments"),o=t("../../function/is-function"),s=t("../../number/to-pos-integer"),a=t("../../object/valid-callable"),u=t("../../object/valid-value"),c=t("../../object/is-value"),l=t("../../string/is-string"),p=Array.isArray,f=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(t){var e,n,g,y,m,_,v,b,w,x,E=arguments[1],I=arguments[2];if(t=Object(u(t)),c(E)&&a(E),this&&this!==Array&&o(this))e=this;else{if(!E){if(i(t))return 1!==(m=t.length)?Array.apply(null,t):((y=new Array(1))[0]=t[0],y);if(p(t)){for(y=new Array(m=t.length),n=0;n<m;++n)y[n]=t[n];return y}}y=[]}if(!p(t))if(void 0!==(w=t[r])){for(v=a(w).call(t),e&&(y=new e),b=v.next(),n=0;!b.done;)x=E?f.call(E,I,b.value,n):b.value,e?(h.value=x,d(y,n,h)):y[n]=x,b=v.next(),++n;m=n}else if(l(t)){for(m=t.length,e&&(y=new e),n=0,g=0;n<m;++n)x=t[n],n+1<m&&(_=x.charCodeAt(0))>=55296&&_<=56319&&(x+=t[++n]),x=E?f.call(E,I,x,g):x,e?(h.value=x,d(y,g,h)):y[g]=x,++g;m=g}if(void 0===m)for(m=s(t.length),e&&(y=new e(m)),n=0;n<m;++n)x=E?f.call(E,I,t[n],n):t[n],e?(h.value=x,d(y,n,h)):y[n]=x;return e&&(h.value=null,y.length=m),y}},{"../../function/is-arguments":25,"../../function/is-function":26,"../../number/to-pos-integer":35,"../../object/is-value":44,"../../object/valid-callable":54,"../../object/valid-value":55,"../../string/is-string":59,"es6-symbol":73}],25:[function(t,e,n){var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(t){return r.call(t)===i}},{}],26:[function(t,e,n){var r=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(t){return"function"==typeof t&&i(r.call(t))}},{}],27:[function(t,e,n){e.exports=function(){}},{}],28:[function(t,e,n){e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":29,"./shim":30}],29:[function(t,e,n){e.exports=function(){var t=Math.sign;return"function"==typeof t&&1===t(10)&&-1===t(-20)}},{}],30:[function(t,e,n){e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],31:[function(t,e,n){e.exports=t("./is-implemented")()?Number.isNaN:t("./shim")},{"./is-implemented":32,"./shim":33}],32:[function(t,e,n){e.exports=function(){var t=Number.isNaN;return"function"==typeof t&&!t({})&&t(NaN)&&!t(34)}},{}],33:[function(t,e,n){e.exports=function(t){return t!=t}},{}],34:[function(t,e,n){var r=t("../math/sign"),i=Math.abs,o=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?r(t)*o(i(t)):t}},{"../math/sign":28}],35:[function(t,e,n){var r=t("./to-integer"),i=Math.max;e.exports=function(t){return i(0,r(t))}},{"./to-integer":34}],36:[function(t,e,n){var r=t("./valid-callable"),i=t("./valid-value"),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(n,c){var l,p=arguments[2],f=arguments[3];return n=Object(i(n)),r(c),l=a(n),f&&l.sort("function"==typeof f?o.call(f,n):void 0),"function"!=typeof t&&(t=l[t]),s.call(t,l,(function(t,r){return u.call(n,t)?s.call(c,p,n[t],t,n,r):e}))}}},{"./valid-callable":54,"./valid-value":55}],37:[function(t,e,n){e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":38,"./shim":39}],38:[function(t,e,n){e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],39:[function(t,e,n){var r=t("../keys"),i=t("../valid-value"),o=Math.max;e.exports=function(t,e){var n,s,a,u=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<u;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},{"../keys":45,"../valid-value":55}],40:[function(t,e,n){var r=t("../array/from"),i=t("./assign"),o=t("./valid-value");e.exports=function(t){var e=Object(o(t)),n=arguments[1],s=Object(arguments[2]);if(e!==t&&!n)return e;var a={};return n?r(n,(function(e){(s.ensure||e in t)&&(a[e]=t[e])})):i(a,t),a}},{"../array/from":22,"./assign":37,"./valid-value":55}],41:[function(t,e,n){var r,i,o,s,a=Object.create;t("./set-prototype-of/is-implemented")()||(r=t("./set-prototype-of/shim")),e.exports=r?1!==r.level?a:(i={},o={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(t){o[t]="__proto__"!==t?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(i,o),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(t,e){return a(null===t?i:t,e)}):a},{"./set-prototype-of/is-implemented":52,"./set-prototype-of/shim":53}],42:[function(t,e,n){e.exports=t("./_iterate")("forEach")},{"./_iterate":36}],43:[function(t,e,n){var r=t("./is-value"),i={function:!0,object:!0};e.exports=function(t){return r(t)&&i[typeof t]||!1}},{"./is-value":44}],44:[function(t,e,n){var r=t("../function/noop")();e.exports=function(t){return t!==r&&null!==t}},{"../function/noop":27}],45:[function(t,e,n){e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":46,"./shim":47}],46:[function(t,e,n){e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],47:[function(t,e,n){var r=t("../is-value"),i=Object.keys;e.exports=function(t){return i(r(t)?Object(t):t)}},{"../is-value":44}],48:[function(t,e,n){var r=t("./valid-callable"),i=t("./for-each"),o=Function.prototype.call;e.exports=function(t,e){var n={},s=arguments[2];return r(e),i(t,(function(t,r,i,a){n[r]=o.call(e,s,t,r,i,a)})),n}},{"./for-each":42,"./valid-callable":54}],49:[function(t,e,n){var r=t("./is-value"),i=Array.prototype.forEach,o=Object.create,s=function(t,e){var n;for(n in t)e[n]=t[n]};e.exports=function(t){var e=o(null);return i.call(arguments,(function(t){r(t)&&s(Object(t),e)})),e}},{"./is-value":44}],50:[function(t,e,n){var r=Array.prototype.forEach,i=Object.create;e.exports=function(t){var e=i(null);return r.call(arguments,(function(t){e[t]=!0})),e}},{}],51:[function(t,e,n){e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":52,"./shim":53}],52:[function(t,e,n){var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||r;return"function"==typeof t&&i(t(e(null),o))===o}},{}],53:[function(t,e,n){var r,i=t("../is-object"),o=t("../valid-value"),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(t,e){if(o(t),null===e||i(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=function(t){var e,n;return t?(2===t.level?t.set?(n=t.set,e=function(t,e){return n.call(r(t,e),e),t}):e=function(t,e){return r(t,e).__proto__=e,t}:e=function t(e,n){var i;return r(e,n),(i=s.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===n&&(n=t.nullPolyfill),e.__proto__=n,i&&a(t.nullPolyfill,"__proto__",u),e},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(t=r.set).call(e,n)}catch(t){}if(Object.getPrototypeOf(e)===n)return{set:t,level:2}}return e.__proto__=n,Object.getPrototypeOf(e)===n?{level:2}:((e={}).__proto__=n,Object.getPrototypeOf(e)===n&&{level:1})}()),t("../create")},{"../create":41,"../is-object":43,"../valid-value":55}],54:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],55:[function(t,e,n){var r=t("./is-value");e.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":44}],56:[function(t,e,n){e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":57,"./shim":58}],57:[function(t,e,n){var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},{}],58:[function(t,e,n){var r=String.prototype.indexOf;e.exports=function(t){return r.call(this,t,arguments[1])>-1}},{}],59:[function(t,e,n){var r=Object.prototype.toString,i=r.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||r.call(t)===i)||!1}},{}],60:[function(t,e,n){var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),s=t("d"),a=t("es6-symbol"),u=t("./"),c=Object.defineProperty;r=e.exports=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",c(this,"__kind__",s("",e))},i&&i(r,u),delete r.prototype.constructor,r.prototype=Object.create(u.prototype,{_resolve:s((function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}))}),c(r.prototype,a.toStringTag,s("c","Array Iterator"))},{"./":63,d:15,"es5-ext/object/set-prototype-of":51,"es5-ext/string/#/contains":56,"es6-symbol":73}],61:[function(t,e,n){var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/valid-callable"),o=t("es5-ext/string/is-string"),s=t("./get"),a=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;e.exports=function(t,e){var n,l,p,f,h,d,g,y,m=arguments[2];if(a(t)||r(t)?n="array":o(t)?n="string":t=s(t),i(e),p=function(){f=!0},"array"!==n)if("string"!==n)for(l=t.next();!l.done;){if(u.call(e,m,l.value,p),f)return;l=t.next()}else for(d=t.length,h=0;h<d&&(g=t[h],h+1<d&&(y=g.charCodeAt(0))>=55296&&y<=56319&&(g+=t[++h]),u.call(e,m,g,p),!f);++h);else c.call(t,(function(t){return u.call(e,m,t,p),f}))}},{"./get":62,"es5-ext/function/is-arguments":25,"es5-ext/object/valid-callable":54,"es5-ext/string/is-string":59}],62:[function(t,e,n){var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/string/is-string"),o=t("./array"),s=t("./string"),a=t("./valid-iterable"),u=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof a(t)[u]?t[u]():r(t)?new o(t):i(t)?new s(t):new o(t)}},{"./array":60,"./string":65,"./valid-iterable":66,"es5-ext/function/is-arguments":25,"es5-ext/string/is-string":59,"es6-symbol":73}],63:[function(t,e,n){var r,i=t("es5-ext/array/#/clear"),o=t("es5-ext/object/assign"),s=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/valid-value"),u=t("d"),c=t("d/auto-bind"),l=t("es6-symbol"),p=Object.defineProperty,f=Object.defineProperties;e.exports=r=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");f(this,{__list__:u("w",a(t)),__context__:u("w",e),__nextIndex__:u("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete r.prototype.constructor,f(r.prototype,o({_next:u((function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:u((function(){return this._createResult(this._next())})),_createResult:u((function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}})),_resolve:u((function(t){return this.__list__[t]})),_unBind:u((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:u((function(){return"[object "+(this[l.toStringTag]||"Object")+"]"}))},c({_onAdd:u((function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(e,n){e>=t&&(this.__redo__[n]=++e)}),this),this.__redo__.push(t)):p(this,"__redo__",u("c",[t])))})),_onDelete:u((function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach((function(e,n){e>t&&(this.__redo__[n]=--e)}),this)))})),_onClear:u((function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0}))}))),p(r.prototype,l.iterator,u((function(){return this})))},{d:15,"d/auto-bind":14,"es5-ext/array/#/clear":20,"es5-ext/object/assign":37,"es5-ext/object/valid-callable":54,"es5-ext/object/valid-value":55,"es6-symbol":73}],64:[function(t,e,n){var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/is-value"),o=t("es5-ext/string/is-string"),s=t("es6-symbol").iterator,a=Array.isArray;e.exports=function(t){return!(!i(t)||!a(t)&&!o(t)&&!r(t)&&"function"!=typeof t[s])}},{"es5-ext/function/is-arguments":25,"es5-ext/object/is-value":44,"es5-ext/string/is-string":59,"es6-symbol":73}],65:[function(t,e,n){var r,i=t("es5-ext/object/set-prototype-of"),o=t("d"),s=t("es6-symbol"),a=t("./"),u=Object.defineProperty;r=e.exports=function(t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");t=String(t),a.call(this,t),u(this,"__length__",o("",t.length))},i&&i(r,a),delete r.prototype.constructor,r.prototype=Object.create(a.prototype,{_next:o((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:o((function(t){var e,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(e=n.charCodeAt(0))>=55296&&e<=56319?n+this.__list__[this.__nextIndex__++]:n}))}),u(r.prototype,s.toStringTag,o("c","String Iterator"))},{"./":63,d:15,"es5-ext/object/set-prototype-of":51,"es6-symbol":73}],66:[function(t,e,n){var r=t("./is-iterable");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":64}],67:[function(t,e,n){e.exports=t("./is-implemented")()?Map:t("./polyfill")},{"./is-implemented":68,"./polyfill":72}],68:[function(t,e,n){e.exports=function(){var t,e;if("function"!=typeof Map)return!1;try{t=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(t){return!1}return"[object Map]"===String(t)&&3===t.size&&"function"==typeof t.clear&&"function"==typeof t.delete&&"function"==typeof t.entries&&"function"==typeof t.forEach&&"function"==typeof t.get&&"function"==typeof t.has&&"function"==typeof t.keys&&"function"==typeof t.set&&"function"==typeof t.values&&!1===(e=t.entries().next()).done&&!!e.value&&"raz"===e.value[0]&&"one"===e.value[1]}},{}],69:[function(t,e,n){e.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},{}],70:[function(t,e,n){e.exports=t("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":50}],71:[function(t,e,n){var r,i=t("es5-ext/object/set-prototype-of"),o=t("d"),s=t("es6-iterator"),a=t("es6-symbol").toStringTag,u=t("./iterator-kinds"),c=Object.defineProperties,l=s.prototype._unBind;r=e.exports=function(t,e){if(!(this instanceof r))return new r(t,e);s.call(this,t.__mapKeysData__,t),e&&u[e]||(e="key+value"),c(this,{__kind__:o("",e),__values__:o("w",t.__mapValuesData__)})},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:o(r),_resolve:o((function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]})),_unBind:o((function(){this.__values__=null,l.call(this)})),toString:o((function(){return"[object Map Iterator]"}))}),Object.defineProperty(r.prototype,a,o("c","Map Iterator"))},{"./iterator-kinds":70,d:15,"es5-ext/object/set-prototype-of":51,"es6-iterator":63,"es6-symbol":73}],72:[function(t,e,n){var r,i=t("es5-ext/array/#/clear"),o=t("es5-ext/array/#/e-index-of"),s=t("es5-ext/object/set-prototype-of"),a=t("es5-ext/object/valid-callable"),u=t("es5-ext/object/valid-value"),c=t("d"),l=t("event-emitter"),p=t("es6-symbol"),f=t("es6-iterator/valid-iterable"),h=t("es6-iterator/for-of"),d=t("./lib/iterator"),g=t("./is-native-implemented"),y=Function.prototype.call,m=Object.defineProperties,_=Object.getPrototypeOf;e.exports=r=function(){var t,e,n,i=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return n=g&&s&&Map!==r?s(new Map,_(this)):this,null!=i&&f(i),m(n,{__mapKeysData__:c("c",t=[]),__mapValuesData__:c("c",e=[])}),i?(h(i,(function(n){var r=u(n)[0];n=n[1],-1===o.call(t,r)&&(t.push(r),e.push(n))}),n),n):n},g&&(s&&s(r,Map),r.prototype=Object.create(Map.prototype,{constructor:c(r)})),l(m(r.prototype,{clear:c((function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))})),delete:c((function(t){var e=o.call(this.__mapKeysData__,t);return-1!==e&&(this.__mapKeysData__.splice(e,1),this.__mapValuesData__.splice(e,1),this.emit("_delete",e,t),!0)})),entries:c((function(){return new d(this,"key+value")})),forEach:c((function(t){var e,n,r=arguments[1];for(a(t),n=(e=this.entries())._next();void 0!==n;)y.call(t,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=e._next()})),get:c((function(t){var e=o.call(this.__mapKeysData__,t);if(-1!==e)return this.__mapValuesData__[e]})),has:c((function(t){return-1!==o.call(this.__mapKeysData__,t)})),keys:c((function(){return new d(this,"key")})),set:c((function(t,e){var n,r=o.call(this.__mapKeysData__,t);return-1===r&&(r=this.__mapKeysData__.push(t)-1,n=!0),this.__mapValuesData__[r]=e,n&&this.emit("_add",r,t),this})),size:c.gs((function(){return this.__mapKeysData__.length})),values:c((function(){return new d(this,"value")})),toString:c((function(){return"[object Map]"}))})),Object.defineProperty(r.prototype,p.iterator,c((function(){return this.entries()}))),Object.defineProperty(r.prototype,p.toStringTag,c("c","Map"))},{"./is-native-implemented":69,"./lib/iterator":71,d:15,"es5-ext/array/#/clear":20,"es5-ext/array/#/e-index-of":21,"es5-ext/object/set-prototype-of":51,"es5-ext/object/valid-callable":54,"es5-ext/object/valid-value":55,"es6-iterator/for-of":61,"es6-iterator/valid-iterable":66,"es6-symbol":73,"event-emitter":81}],73:[function(t,e,n){e.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":74,"./polyfill":79,"ext/global-this":84}],74:[function(t,e,n){var r=t("ext/global-this"),i={object:!0,symbol:!0};e.exports=function(){var t,e=r.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!i[typeof e.iterator]&&!!i[typeof e.toPrimitive]&&!!i[typeof e.toStringTag]}},{"ext/global-this":84}],75:[function(t,e,n){e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&"Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag])}},{}],76:[function(t,e,n){var r=t("d"),i=Object.create,o=Object.defineProperty,s=Object.prototype,a=i(null);e.exports=function(t){for(var e,n,i=0;a[t+(i||"")];)++i;return a[t+=i||""]=!0,o(s,e="@@"+t,r.gs(null,(function(t){n||(n=!0,o(this,e,r(t)),n=!1)}))),e}},{d:15}],77:[function(t,e,n){var r=t("d"),i=t("ext/global-this").Symbol;e.exports=function(t){return Object.defineProperties(t,{hasInstance:r("",i&&i.hasInstance||t("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||t("isConcatSpreadable")),iterator:r("",i&&i.iterator||t("iterator")),match:r("",i&&i.match||t("match")),replace:r("",i&&i.replace||t("replace")),search:r("",i&&i.search||t("search")),species:r("",i&&i.species||t("species")),split:r("",i&&i.split||t("split")),toPrimitive:r("",i&&i.toPrimitive||t("toPrimitive")),toStringTag:r("",i&&i.toStringTag||t("toStringTag")),unscopables:r("",i&&i.unscopables||t("unscopables"))})}},{d:15,"ext/global-this":84}],78:[function(t,e,n){var r=t("d"),i=t("../../../validate-symbol"),o=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:r((function(e){return o[e]?o[e]:o[e]=t(String(e))})),keyFor:r((function(t){var e;for(e in i(t),o)if(o[e]===t)return e}))})}},{"../../../validate-symbol":80,d:15}],79:[function(t,e,n){var r,i,o,s=t("d"),a=t("./validate-symbol"),u=t("ext/global-this").Symbol,c=t("./lib/private/generate-name"),l=t("./lib/private/setup/standard-symbols"),p=t("./lib/private/setup/symbol-registry"),f=Object.create,h=Object.defineProperties,d=Object.defineProperty;if("function"==typeof u)try{String(u()),o=!0}catch(t){}else u=null;i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(t)},e.exports=r=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return o?u(e):(n=f(i.prototype),e=void 0===e?"":String(e),h(n,{__description__:s("",e),__name__:s("",c(e))}))},l(r),p(r),h(i.prototype,{constructor:s(r),toString:s("",(function(){return this.__name__}))}),h(r.prototype,{toString:s((function(){return"Symbol ("+a(this).__description__+")"})),valueOf:s((function(){return a(this)}))}),d(r.prototype,r.toPrimitive,s("",(function(){var t=a(this);return"symbol"==typeof t?t:t.toString()}))),d(r.prototype,r.toStringTag,s("c","Symbol")),d(i.prototype,r.toStringTag,s("c",r.prototype[r.toStringTag])),d(i.prototype,r.toPrimitive,s("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":76,"./lib/private/setup/standard-symbols":77,"./lib/private/setup/symbol-registry":78,"./validate-symbol":80,d:15,"ext/global-this":84}],80:[function(t,e,n){var r=t("./is-symbol");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":75}],81:[function(t,e,n){var r,i,o,s,a,u,c,l=t("d"),p=t("es5-ext/object/valid-callable"),f=Function.prototype.apply,h=Function.prototype.call,d=Object.create,g=Object.defineProperty,y=Object.defineProperties,m=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var n,i;return p(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),f.call(e,this,arguments)}),n.__eeOnceListener__=e,this},a={on:r=function(t,e){var n;return p(e),m.call(this,"__ee__")?n=this.__ee__:(n=_.value=d(null),g(this,"__ee__",_),_.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:i,off:o=function(t,e){var n,r,i,o;if(p(e),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:s=function(t){var e,n,r,i,o;if(m.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)f.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];f.call(i,this,o)}}},u={on:l(r),once:l(i),off:l(o),emit:l(s)},c=y({},u),e.exports=n=function(t){return null==t?d(c):y(Object(t),u)},n.methods=a},{d:15,"es5-ext/object/valid-callable":54}],82:[function(t,e,n){var r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e);return e},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(t){a=!1}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function p(t,e,n){if(e)t.call(n);else for(var r=t.length,i=w(t,r),o=0;o<r;++o)i[o].call(n)}function f(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=w(t,i),s=0;s<i;++s)o[s].call(n,r)}function h(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=w(t,o),a=0;a<o;++a)s[a].call(n,r,i)}function d(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=w(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}function g(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=w(t,i),s=0;s<i;++s)o[s].apply(n,r)}function y(t,e,n,i){var o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=r(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),!a.warned&&(o=l(t))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=n,++t._eventsCount;return t}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function _(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=o.call(m,r);return i.listener=n,r.wrapFn=i,i}function v(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):w(i,i.length):[]}function b(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function w(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){var e,n,r,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(n=s[t]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:p(n,c,this);break;case 2:f(n,c,this,arguments[1]);break;case 3:h(n,c,this,arguments[1],arguments[2]);break;case 4:d(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];g(n,c,this,i)}return!0},s.prototype.addListener=function(t,e){return y(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return y(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,_(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,o,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=r(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=r(null):delete n[t]),this;if(0===arguments.length){var s,a=i(n);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},s.prototype.listeners=function(t){return v(this,t,!0)},s.prototype.rawListeners=function(t){return v(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):b.call(t,e)},s.prototype.listenerCount=b,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],83:[function(t,e,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],84:[function(t,e,n){e.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":83,"./is-implemented":85}],85:[function(t,e,n){e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],86:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,f=n?-1:1,h=t[e+p];for(p+=f,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+t[e+p],p+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+p],p+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,p=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=l?(a=0,s=l):s+p>=1?(a=(e*u-1)*Math.pow(2,i),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*g}},{}],87:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],88:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */
e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],89:[function(t,e,n){var r=t("safe-buffer").Buffer,i=e.exports;for(var o in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.codes={},i.types){var s=i.types[o];i.codes[s]=o}for(var a in i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=r.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=r.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=r.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={},i.properties){var u=i.properties[a];i.propertiesCodes[u]=a}function c(t){return[0,1,2].map((function(e){return[0,1].map((function(n){return[0,1].map((function(o){var s=new r(1);return s.writeUInt8(i.codes[t]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|e<<i.QOS_SHIFT|o,0,!0),s}))}))}))}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int32",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},i.PUBLISH_HEADER=c("publish"),i.SUBSCRIBE_HEADER=c("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=c("unsubscribe"),i.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},i.SUBACK_HEADER=r.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=r.from([3]),i.VERSION4=r.from([4]),i.VERSION5=r.from([5]),i.QOS=[0,1,2].map((function(t){return r.from([t])})),i.EMPTY={pingreq:r.from([i.codes.pingreq<<4,0]),pingresp:r.from([i.codes.pingresp<<4,0]),disconnect:r.from([i.codes.disconnect<<4,0])}},{"safe-buffer":118}],90:[function(t,e,n){var r=t("safe-buffer").Buffer,i=t("./writeToStream"),o=t("events").EventEmitter;function s(){this._array=new Array(20),this._i=0}t("inherits")(s,o),s.prototype.write=function(t){return this._array[this._i++]=t,!0},s.prototype.concat=function(){var t,e,n=0,i=new Array(this._array.length),o=this._array,s=0;for(t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?i[t]=o[t].length:i[t]=r.byteLength(o[t]),n+=i[t];for(e=r.allocUnsafe(n),t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?(o[t].copy(e,s),s+=i[t]):(e.write(o[t],s),s+=i[t]);return e},e.exports=function(t,e){var n=new s;return i(t,n,e),n.concat()}},{"./writeToStream":96,events:82,inherits:87,"safe-buffer":118}],91:[function(t,e,n){n.parser=t("./parser"),n.generate=t("./generate"),n.writeToStream=t("./writeToStream")},{"./generate":90,"./parser":95,"./writeToStream":96}],92:[function(t,e,n){var r=t("readable-stream/duplex"),i=t("util"),o=t("safe-buffer").Buffer;function s(t){if(!(this instanceof s))return new s(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",e)})),this.on("unpipe",(function(t){t.removeListener("error",e)}))}else this.append(t);r.call(this)}i.inherits(s,r),s.prototype._offset=function(t){var e,n=0,r=0;if(0===t)return[0,0];for(;r<this._bufs.length;r++){if(t<(e=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,t-n];n=e}},s.prototype.append=function(t){var e=0;if(o.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof s)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(o.from(t)));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(t){return this.slice(t,t+1)[0]},s.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,n,r){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return t||o.alloc(0);if(r<=0)return t||o.alloc(0);var i,s,a=!!t,u=this._offset(n),c=r-n,l=c,p=a&&e||0,f=u[1];if(0===n&&r==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,p),p+=this._bufs[s].length;return t}if(l<=this._bufs[u[0]].length-f)return a?this._bufs[u[0]].copy(t,e,f,f+l):this._bufs[u[0]].slice(f,f+l);for(a||(t=o.allocUnsafe(c)),s=u[0];s<this._bufs.length;s++){if(!(l>(i=this._bufs[s].length-f))){this._bufs[s].copy(t,p,f,f+l);break}this._bufs[s].copy(t,p,f),p+=i,l-=i,f&&(f=0)}return t},s.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!=n[1]&&(i[0]=i[0].slice(n[1])),new s(i)},s.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},s.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var t=0,e=new s;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){s.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),e.exports=s},{"readable-stream/duplex":105,"safe-buffer":118,util:136}],93:[function(t,e,n){var r=t("safe-buffer").Buffer,i={};function o(t){var e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}e.exports={cache:i,generateCache:function(){for(var t=0;t<65536;t++)i[t]=o(t)},generateNumber:o,genBufVariableByteInt:function(t){var e=0,n=0,i=function(t){return t>=0&&t<128?1:t>=128&&t<16384?2:t>=16384&&t<2097152?3:t>=2097152&&t<268435456?4:0}(t),o=r.allocUnsafe(i);do{e=t%128|0,(t=t/128|0)>0&&(e|=128),o.writeUInt8(e,n++)}while(t>0);return{data:o,length:i}},generate4ByteBuffer:function(t){var e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}}},{"safe-buffer":118}],94:[function(t,e,n){e.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},{}],95:[function(t,e,n){var r=t("bl"),i=t("inherits"),o=t("events").EventEmitter,s=t("./packet"),a=t("./constants");function u(t){if(!(this instanceof u))return new u(t);this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(u,o),u.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=r(),this._stateCounter=0},u.prototype.parse=function(t){for(this.error&&this._resetState(),this._list.append(t);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},u.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=a.types[t>>a.CMD_SHIFT],this.packet.retain=0!=(t&a.RETAIN_MASK),this.packet.qos=t>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(t&a.DUP_MASK),this._list.consume(1),!0},u.prototype._parseLength=function(){var t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),!!t},u.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return t},u.prototype._parseConnect=function(){var t,e,n,r,i,o,s={},u=this.packet;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==t&&"MQIsdp"!==t)return this._emitError(new Error("Invalid protocolId"));if(u.protocolId=t,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(u.protocolVersion=this._list.readUInt8(this._pos),3!==u.protocolVersion&&4!==u.protocolVersion&&5!==u.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(u.will={},u.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),u.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),u.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,u.keepalive=this._parseNum(),-1===u.keepalive)return this._emitError(new Error("Packet too short"));if(5===u.protocolVersion){var c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}if(null===(e=this._parseString()))return this._emitError(new Error("Packet too short"));if(u.clientId=e,s.will){if(5===u.protocolVersion){var l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(u.will.properties=l)}if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(u.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));u.will.payload=r}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));u.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));u.password=i}return this.settings=u,u},u.prototype._parseConnack=function(){var t=this.packet;if(this._list.length<2)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion?t.reasonCode=this._list.readUInt8(this._pos++):t.returnCode=this._list.readUInt8(this._pos++),-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}},u.prototype._parsePublish=function(){var t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}t.payload=this._list.slice(this._pos,t.length)}},u.prototype._parseSubscribe=function(){var t,e,n,r,i,o,s,u=this.packet;if(1!==u.qos)return this._emitError(new Error("Wrong subscribe header"));if(u.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}for(;this._pos<u.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));n=(e=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,o=0!=(e>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),i=0!=(e>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),r=e>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,s={topic:t,qos:n},5===this.settings.protocolVersion&&(s.nl=o,s.rap=i,s.rh=r),u.subscriptions.push(s)}}},u.prototype._parseSuback=function(){var t=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}},u.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){var n;if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t.unsubscriptions.push(n)}}},u.prototype._parseUnsuback=function(){var t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}},u.prototype._parseConfirmation=function(){var t=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&t.length>2){t.reasonCode=this._parseByte();var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return!0},u.prototype._parseDisconnect=function(){var t=this.packet;if(5===this.settings.protocolVersion){t.reasonCode=this._parseByte();var e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return!0},u.prototype._parseAuth=function(){var t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();var e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),!0},u.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},u.prototype._parseString=function(t){var e,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(e=this._list.toString("utf8",this._pos,r),this._pos+=n,e)},u.prototype._parseStringPair=function(){return{name:this._parseString(),value:this._parseString()}},u.prototype._parseBuffer=function(){var t,e=this._parseNum(),n=e+this._pos;return-1===e||n>this._list.length||n>this.packet.length?null:(t=this._list.slice(this._pos,n),this._pos+=e,t)},u.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},u.prototype._parse4ByteNum=function(){if(this._list.length-this._pos<4)return-1;var t=this._list.readUInt32BE(this._pos);return this._pos+=4,t},u.prototype._parseVarByteNum=function(t){for(var e,n=0,r=1,i=0,o=!0,s=this._pos?this._pos:0;n<5&&(i+=r*((e=this._list.readUInt8(s+n++))&a.LENGTH_MASK),r*=128,0!=(e&a.LENGTH_FIN_MASK));)if(this._list.length<=n){o=!1;break}return s&&(this._pos+=n),o=!!o&&(t?{bytes:n,value:i}:i)},u.prototype._parseByte=function(){var t=this._list.readUInt8(this._pos);return this._pos++,t},u.prototype._parseByType=function(t){switch(t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}},u.prototype._parseProperties=function(){for(var t=this._parseVarByteNum(),e=this._pos+t,n={};this._pos<e;){var r=this._parseByte(),i=a.propertiesCodes[r];if(!i)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==i)n[i]=this._parseByType(a.propertiesTypes[i]);else{n[i]||(n[i]={});var o=this._parseByType(a.propertiesTypes[i]);n[i][o.name]=o.value}}return n},u.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,this._pos=0,!0},u.prototype._emitError=function(t){this.error=t,this.emit("error",t)},e.exports=u},{"./constants":89,"./packet":94,bl:92,events:82,inherits:87}],96:[function(t,e,n){var r=t("./constants"),i=t("safe-buffer").Buffer,o=i.allocUnsafe(0),s=i.from([0]),a=t("./numbers"),u=t("process-nextick-args").nextTick,c=a.cache,l=a.generateNumber,p=a.generateCache,f=a.genBufVariableByteInt,h=a.generate4ByteBuffer,d=x,g=!0;function y(t,e,n){switch(e.cork&&(e.cork(),u(m,e)),g&&(g=!1,p()),t.cmd){case"connect":return function(t,e,n){var o=t||{},s=o.protocolId||"MQTT",a=o.protocolVersion||4,u=o.will,c=o.clean,l=o.keepalive||0,p=o.clientId||"",f=o.username,h=o.password,g=o.properties;void 0===c&&(c=!0);var y=0;if(!s||"string"!=typeof s&&!i.isBuffer(s))return e.emit("error",new Error("Invalid protocolId")),!1;if(y+=s.length+2,3!==a&&4!==a&&5!==a)return e.emit("error",new Error("Invalid protocol version")),!1;if(y+=1,"string"!=typeof p&&!i.isBuffer(p)||!p&&4!==a||!p&&!c){if(a<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else y+=p.length+2;if("number"!=typeof l||l<0||l>65535||l%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;if(y+=2,y+=1,5===a){var m=C(e,g);y+=m.length}if(u){if("object"!=typeof u)return e.emit("error",new Error("Invalid will")),!1;if(!u.topic||"string"!=typeof u.topic)return e.emit("error",new Error("Invalid will topic")),!1;if(y+=i.byteLength(u.topic)+2,u.payload){if(!(u.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;"string"==typeof u.payload?y+=i.byteLength(u.payload)+2:y+=u.payload.length+2;var _={};5===a&&(_=C(e,u.properties),y+=_.length)}}var w=!1;if(null!=f){if(!L(f))return e.emit("error",new Error("Invalid username")),!1;w=!0,y+=i.byteLength(f)+2}if(null!=h){if(!w)return e.emit("error",new Error("Username is required to use password")),!1;if(!L(h))return e.emit("error",new Error("Invalid password")),!1;y+=T(h)+2}e.write(r.CONNECT_HEADER),v(e,y),S(e,s),e.write(4===a?r.VERSION4:5===a?r.VERSION5:r.VERSION3);var x=0;return x|=null!=f?r.USERNAME_MASK:0,x|=null!=h?r.PASSWORD_MASK:0,x|=u&&u.retain?r.WILL_RETAIN_MASK:0,x|=u&&u.qos?u.qos<<r.WILL_QOS_SHIFT:0,x|=u?r.WILL_FLAG_MASK:0,x|=c?r.CLEAN_SESSION_MASK:0,e.write(i.from([x])),d(e,l),5===a&&m.write(),S(e,p),u&&(5===a&&_.write(),b(e,u.topic),S(e,u.payload)),null!=f&&S(e,f),null!=h&&S(e,h),!0}(t,e);case"connack":return function(t,e,n){var o=n?n.protocolVersion:4,a=t||{},u=5===o?a.reasonCode:a.returnCode,c=a.properties,l=2;if("number"!=typeof u)return e.emit("error",new Error("Invalid return code")),!1;var p=null;return 5===o&&(p=C(e,c),l+=p.length),e.write(r.CONNACK_HEADER),v(e,l),e.write(a.sessionPresent?r.SESSIONPRESENT_HEADER:s),e.write(i.from([u])),null!=p&&p.write(),!0}(t,e,n);case"publish":return function(t,e,n){var s=n?n.protocolVersion:4,a=t||{},u=a.qos||0,c=a.retain?r.RETAIN_MASK:0,l=a.topic,p=a.payload||o,f=a.messageId,h=a.properties,g=0;if("string"==typeof l)g+=i.byteLength(l)+2;else{if(!i.isBuffer(l))return e.emit("error",new Error("Invalid topic")),!1;g+=l.length+2}if(i.isBuffer(p)?g+=p.length:g+=i.byteLength(p),u&&"number"!=typeof f)return e.emit("error",new Error("Invalid messageId")),!1;u&&(g+=2);var y=null;return 5===s&&(y=C(e,h),g+=y.length),e.write(r.PUBLISH_HEADER[u][a.dup?1:0][c?1:0]),v(e,g),d(e,T(l)),e.write(l),u>0&&d(e,f),null!=y&&y.write(),e.write(p)}(t,e,n);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.cmd||"puback",u=s.messageId,c=s.dup&&"pubrel"===a?r.DUP_MASK:0,l=0,p=s.reasonCode,f=s.properties,h=5===o?3:2;if("pubrel"===a&&(l=1),"number"!=typeof u)return e.emit("error",new Error("Invalid messageId")),!1;var g=null;if(5===o){if(!(g=N(e,f,n,h)))return!1;h+=g.length}return e.write(r.ACKS[a][l][c][0]),v(e,h),d(e,u),5===o&&e.write(i.from([p])),null!==g&&g.write(),!0}(t,e,n);case"subscribe":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.dup?r.DUP_MASK:0,u=s.messageId,c=s.subscriptions,l=s.properties,p=0;if("number"!=typeof u)return e.emit("error",new Error("Invalid messageId")),!1;p+=2;var f=null;if(5===o&&(f=C(e,l),p+=f.length),"object"!=typeof c||!c.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(var h=0;h<c.length;h+=1){var g=c[h].topic,y=c[h].qos;if("string"!=typeof g)return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof y)return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(c[h].nl||!1))return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[h].rap||!1))return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;var m=c[h].rh||0;if("number"!=typeof m||m>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}p+=i.byteLength(g)+2+1}e.write(r.SUBSCRIBE_HEADER[1][a?1:0][0]),v(e,p),d(e,u),null!==f&&f.write();for(var _=!0,w=0;w<c.length;w++){var x,E=c[w],I=E.topic,S=E.qos,N=+E.nl,O=+E.rap,T=E.rh;b(e,I),x=r.SUBSCRIBE_OPTIONS_QOS[S],5===o&&(x|=N?r.SUBSCRIBE_OPTIONS_NL:0,x|=O?r.SUBSCRIBE_OPTIONS_RAP:0,x|=T?r.SUBSCRIBE_OPTIONS_RH[T]:0),_=e.write(i.from([x]))}return _}(t,e,n);case"suback":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.messageId,u=s.granted,c=s.properties,l=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(l+=2,"object"!=typeof u||!u.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(var p=0;p<u.length;p+=1){if("number"!=typeof u[p])return e.emit("error",new Error("Invalid qos vector")),!1;l+=1}var f=null;if(5===o){if(!(f=N(e,c,n,l)))return!1;l+=f.length}return e.write(r.SUBACK_HEADER),v(e,l),d(e,a),null!==f&&f.write(),e.write(i.from(u))}(t,e,n);case"unsubscribe":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.messageId,u=s.dup?r.DUP_MASK:0,c=s.unsubscriptions,l=s.properties,p=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(p+=2,"object"!=typeof c||!c.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(var f=0;f<c.length;f+=1){if("string"!=typeof c[f])return e.emit("error",new Error("Invalid unsubscriptions")),!1;p+=i.byteLength(c[f])+2}var h=null;5===o&&(h=C(e,l),p+=h.length),e.write(r.UNSUBSCRIBE_HEADER[1][u?1:0][0]),v(e,p),d(e,a),null!==h&&h.write();for(var g=!0,y=0;y<c.length;y++)g=b(e,c[y]);return g}(t,e,n);case"unsuback":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.messageId,u=s.dup?r.DUP_MASK:0,c=s.granted,l=s.properties,p=s.cmd,f=2;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof c||!c.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(var h=0;h<c.length;h+=1){if("number"!=typeof c[h])return e.emit("error",new Error("Invalid qos vector")),!1;f+=1}}var g=null;if(5===o){if(!(g=N(e,l,n,f)))return!1;f+=g.length}return e.write(r.ACKS[p][0][u][0]),v(e,f),d(e,a),null!==g&&g.write(),5===o&&e.write(i.from(c)),!0}(t,e,n);case"pingreq":case"pingresp":return function(t,e,n){return e.write(r.EMPTY[t.cmd])}(t,e);case"disconnect":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.reasonCode,u=s.properties,c=5===o?1:0,l=null;if(5===o){if(!(l=N(e,u,n,c)))return!1;c+=l.length}return e.write(i.from([r.codes.disconnect<<4])),v(e,c),5===o&&e.write(i.from([a])),null!==l&&l.write(),!0}(t,e,n);case"auth":return function(t,e,n){var o=n?n.protocolVersion:4,s=t||{},a=s.reasonCode,u=s.properties,c=5===o?1:0;5!==o&&e.emit("error",new Error("Invalid mqtt version for auth packet"));var l=N(e,u,n,c);return!!l&&(c+=l.length,e.write(i.from([r.codes.auth<<4])),v(e,c),e.write(i.from([a])),null!==l&&l.write(),!0)}(t,e,n);default:return e.emit("error",new Error("Unknown command")),!1}}function m(t){t.uncork()}Object.defineProperty(y,"cacheNumbers",{get:function(){return d===x},set:function(t){t?(c&&0!==Object.keys(c).length||(g=!0),d=x):(g=!1,d=E)}});var _={};function v(t,e){var n=_[e];n||(n=f(e).data,e<16384&&(_[e]=n)),t.write(n)}function b(t,e){var n=i.byteLength(e);d(t,n),t.write(e,"utf8")}function w(t,e,n){b(t,e),b(t,n)}function x(t,e){return t.write(c[e])}function E(t,e){return t.write(l(e))}function I(t,e){return t.write(h(e))}function S(t,e){"string"==typeof e?b(t,e):e?(d(t,e.length),t.write(e)):d(t,0)}function C(t,e){if("object"!=typeof e||null!=e.length)return{length:1,write:function(){O(t,{},0)}};var n=0;function o(n){var o=r.propertiesTypes[n],s=e[n],a=0;switch(o){case"byte":if("boolean"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=2;break;case"int8":if("number"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=2;break;case"binary":if(s&&null===s)return t.emit("error",new Error("Invalid "+n)),!1;a+=1+i.byteLength(s)+2;break;case"int16":if("number"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=3;break;case"int32":if("number"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=5;break;case"var":if("number"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=1+f(s).length;break;case"string":if("string"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=3+i.byteLength(s.toString());break;case"pair":if("object"!=typeof s)return t.emit("error",new Error("Invalid "+n)),!1;a+=Object.getOwnPropertyNames(s).reduce((function(t,e){return t+=3+i.byteLength(e.toString())+2+i.byteLength(s[e].toString())}),0);break;default:return t.emit("error",new Error("Invalid property "+n)),!1}return a}if(e)for(var s in e){var a=o(s);if(!a)return!1;n+=a}return{length:f(n).length+n,write:function(){O(t,e,n)}}}function N(t,e,n,r){var i=["reasonString","userProperties"],o=n&&n.properties&&n.properties.maximumPacketSize?n.properties.maximumPacketSize:0,s=C(t,e);if(o)for(;r+s.length>o;){var a=i.shift();if(!a||!e[a])return!1;delete e[a],s=C(t,e)}return s}function O(t,e,n){for(var o in v(t,n),e)if(e.hasOwnProperty(o)&&null!==e[o]){var s=e[o];switch(r.propertiesTypes[o]){case"byte":t.write(i.from([r.properties[o]])),t.write(i.from([+s]));break;case"int8":t.write(i.from([r.properties[o]])),t.write(i.from([s]));break;case"binary":t.write(i.from([r.properties[o]])),S(t,s);break;case"int16":t.write(i.from([r.properties[o]])),d(t,s);break;case"int32":t.write(i.from([r.properties[o]])),I(t,s);break;case"var":t.write(i.from([r.properties[o]])),v(t,s);break;case"string":t.write(i.from([r.properties[o]])),b(t,s);break;case"pair":Object.getOwnPropertyNames(s).forEach((function(e){t.write(i.from([r.properties[o]])),w(t,e.toString(),s[e].toString())}));break;default:return t.emit("error",new Error("Invalid property "+o)),!1}}}function T(t){return t?t instanceof i?t.length:i.byteLength(t):0}function L(t){return"string"==typeof t||t instanceof i}e.exports=y},{"./constants":89,"./numbers":93,"process-nextick-args":99,"safe-buffer":118}],97:[function(t,e,n){var r=1e3,i=6e4,o=60*i,s=24*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){e=e||{};var n,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(t);if("number"===u&&!1===isNaN(t))return e.long?a(n=t,s,"day")||a(n,o,"hour")||a(n,i,"minute")||a(n,r,"second")||n+" ms":function(t){return t>=s?Math.round(t/s)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],98:[function(t,e,n){var r=t("wrappy");function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},{wrappy:139}],99:[function(t,e,n){(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,t("_process"))},{_process:100}],100:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],p=!1,f=-1;function h(){p&&c&&(p=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!p){var t=u(h);p=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new g(t,e)),1!==l.length||p||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],101:[function(t,e,n){(function(t){!function(r){var i="object"==typeof n&&n&&!n.nodeType&&n,o="object"==typeof e&&e&&!e.nodeType&&e,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var a,u,c=2147483647,l=/^xn--/,p=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function y(t){throw new RangeError(h[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function _(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(f,".")).split("."),e).join(".")}function v(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return m(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=g(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=36)t=d(t/35);return d(r+36*t/(t+38))}function E(t){var e,n,r,i,o,s,a,u,l,p,f,h=[],g=t.length,m=0,_=128,v=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),h.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=m,s=1,a=36;i>=g&&y("invalid-input"),((u=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>d((c-m)/s))&&y("overflow"),m+=u*s,!(u<(l=a<=v?1:a>=v+26?26:a-v));a+=36)s>d(c/(p=36-l))&&y("overflow"),s*=p;v=x(m-o,e=h.length+1,0==o),d(m/e)>c-_&&y("overflow"),_+=d(m/e),m%=e,h.splice(m++,0,_)}return b(h)}function I(t){var e,n,r,i,o,s,a,u,l,p,f,h,m,_,b,E=[];for(h=(t=v(t)).length,e=128,n=0,o=72,s=0;s<h;++s)(f=t[s])<128&&E.push(g(f));for(r=i=E.length,i&&E.push("-");r<h;){for(a=c,s=0;s<h;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>d((c-n)/(m=r+1))&&y("overflow"),n+=(a-e)*m,e=a,s=0;s<h;++s)if((f=t[s])<e&&++n>c&&y("overflow"),f==e){for(u=n,l=36;!(u<(p=l<=o?1:l>=o+26?26:l-o));l+=36)b=u-p,_=36-p,E.push(g(w(p+b%_,0))),u=d(b/_);E.push(g(w(u,0))),o=x(n,m,r==i),n=0,++r}++n,++e}return E.join("")}if(a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:E,encode:I,toASCII:function(t){return _(t,(function(t){return p.test(t)?"xn--"+I(t):t}))},toUnicode:function(t){return _(t,(function(t){return l.test(t)?E(t.slice(4).toLowerCase()):t}))}},i&&o)if(e.exports==i)o.exports=a;else for(u in a)a.hasOwnProperty(u)&&(i[u]=a[u]);else r.punycode=a}(this)}).call(this,void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],102:[function(t,e,n){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var p,f,h,d,g=t[l].replace(a,"%20"),y=g.indexOf(n);y>=0?(p=g.substr(0,y),f=g.substr(y+1)):(p=g,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),r(s,h)?i(s[h])?s[h].push(d):s[h]=[s[h],d]:s[h]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],103:[function(t,e,n){var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],104:[function(t,e,n){n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":102,"./encode":103}],105:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":106}],106:[function(t,e,n){var r=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=p;var o=t("core-util-is");o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(p,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];p.prototype[l]||(p.prototype[l]=a.prototype[l])}function p(t){if(!(this instanceof p))return new p(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),p.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},{"./_stream_readable":108,"./_stream_writable":110,"core-util-is":13,inherits:87,"process-nextick-args":99}],107:[function(t,e,n){e.exports=o;var r=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":109,"core-util-is":13,inherits:87}],108:[function(t,e,n){(function(n,r){var i=t("process-nextick-args");e.exports=v;var o,s=t("isarray");v.ReadableState=_,t("events").EventEmitter;var a=function(t,e){return t.listeners(e).length},u=t("./internal/streams/stream"),c=t("safe-buffer").Buffer,l=r.Uint8Array||function(){},p=t("core-util-is");p.inherits=t("inherits");var f=t("util"),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=t("./internal/streams/BufferList"),y=t("./internal/streams/destroy");p.inherits(v,u);var m=["error","close","destroy","pause","resume"];function _(e,n){e=e||{};var r=n instanceof(o=o||t("./_stream_duplex"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=t("string_decoder/").StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function v(e){if(o=o||t("./_stream_duplex"),!(this instanceof v))return new v(e);this._readableState=new _(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function b(t,e,n,r,i){var o,s=t._readableState;return null===e?(s.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,E(t)}}(t,s)):(i||(o=function(t,e){var n,r;return r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):S(t,s)):w(t,s,e,!1))):r||(s.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&E(t)),S(t,e)}function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(I,t):I(t))}function I(t){h("emit readable"),t.emit("readable"),T(t)}function S(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(C,t,e))}function C(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function N(t){h("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0==(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0==(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},v.prototype.unshift=function(t){return b(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return d||(d=t("string_decoder/").StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this},v.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):E(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(r=t>0?L(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,e);var u=e&&!1===e.end||t===n.stdout||t===n.stderr?v:l;function c(e,n){h("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,h("cleanup"),t.removeListener("close",m),t.removeListener("finish",_),t.removeListener("drain",p),t.removeListener("error",y),t.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",v),r.removeListener("data",g),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||p())}function l(){h("onend"),t.end()}o.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",c);var p=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,T(t))}}(r);t.on("drain",p);var f=!1,d=!1;function g(e){h("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==A(o.pipes,t))&&!f&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function y(e){h("onerror",e),v(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",_),v()}function _(){h("onfinish"),t.removeListener("close",m),v()}function v(){h("unpipe"),r.unpipe(t)}return r.on("data",g),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",m),t.once("finish",_),t.emit("pipe",r),o.flowing||(h("pipe resume"),r.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=A(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},v.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(N,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(O,t,e))}(this,t)),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=L}).call(this,t("_process"),void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":106,"./internal/streams/BufferList":111,"./internal/streams/destroy":112,"./internal/streams/stream":113,_process:100,"core-util-is":13,events:82,inherits:87,isarray:114,"process-nextick-args":99,"safe-buffer":118,"string_decoder/":115,util:11}],109:[function(t,e,n){e.exports=s;var r=t("./_stream_duplex"),i=t("core-util-is");function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},{"./_stream_duplex":106,"core-util-is":13,inherits:87}],110:[function(t,e,n){(function(n,r,i){var o=t("process-nextick-args");function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}e.exports=_;var a,u=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:o.nextTick;_.WritableState=m;var c=t("core-util-is");c.inherits=t("inherits");var l,p={deprecate:t("util-deprecate")},f=t("./internal/streams/stream"),h=t("safe-buffer").Buffer,d=r.Uint8Array||function(){},g=t("./internal/streams/destroy");function y(){}function m(e,n){a=a||t("./_stream_duplex"),e=e||{};var r=n instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===e.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(I,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),I(t,e))}(t,n,r,e,i);else{var s=x(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,s,i):b(t,n,s,i)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function _(e){if(a=a||t("./_stream_duplex"),!(l.call(_,this)||this instanceof a))return new _(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function v(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),I(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,p=n.callback;if(v(t,e,!1,e.objectMode?1:c.length,c,l,p),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var n=x(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(_,f),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:p.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===_&&t&&t._writableState instanceof m}})):l=function(t){return t instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof d);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=y),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n)),e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},_.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,I(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{"./_stream_duplex":106,"./internal/streams/destroy":112,"./internal/streams/stream":113,_process:100,"core-util-is":13,inherits:87,"process-nextick-args":99,"safe-buffer":118,timers:120,"util-deprecate":134}],111:[function(t,e,n){var r=t("safe-buffer").Buffer,i=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":118,util:11}],112:[function(t,e,n){var r=t("process-nextick-args");function i(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":99}],113:[function(t,e,n){e.exports=t("events").EventEmitter},{events:82}],114:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],115:[function(t,e,n){var r=t("safe-buffer").Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=p,e=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":118}],116:[function(t,e,n){(n=e.exports=t("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":106,"./lib/_stream_passthrough.js":107,"./lib/_stream_readable.js":108,"./lib/_stream_transform.js":109,"./lib/_stream_writable.js":110}],117:[function(t,e,n){function r(t,e,n){var r=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}e.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new r(arguments[0],arguments[1],t)}},{}],118:[function(t,e,n){var r=t("buffer"),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,n),n.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},{buffer:12}],119:[function(t,e,n){e.exports=function(t){var e=t._readableState;return e?e.objectMode||"number"==typeof t._duplexState?t.read():t.read(function(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}(e)):null}},{}],120:[function(t,e,n){(function(e,r){var i=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;function c(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=u++,r=!(arguments.length<2)&&s.call(arguments,1);return a[e]=!0,i((function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":100,timers:120}],121:[function(t,e,n){var r=t("../prototype/is");e.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!r(t)}},{"../prototype/is":128}],122:[function(t,e,n){var r=t("../value/is"),i=t("../object/is"),o=t("../string/coerce"),s=t("./to-short-string"),a=function(t,e){return t.replace("%v",s(e))};e.exports=function(t,e,n){if(!i(n))throw new TypeError(a(e,t));if(!r(t)){if("default"in n)return n.default;if(n.isOptional)return null}var s=o(n.errorMessage);throw r(s)||(s=e),new TypeError(a(s,t))}},{"../object/is":125,"../string/coerce":129,"../value/is":131,"./to-short-string":124}],123:[function(t,e,n){e.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(t){return null}}}},{}],124:[function(t,e,n){var r=t("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;e.exports=function(t){var e=r(t);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+""),e=e.replace(i,(function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},{"./safe-to-string":123}],125:[function(t,e,n){var r=t("../value/is"),i={object:!0,function:!0,undefined:!0};e.exports=function(t){return!!r(t)&&hasOwnProperty.call(i,typeof t)}},{"../value/is":131}],126:[function(t,e,n){var r=t("../lib/resolve-exception"),i=t("./is");e.exports=function(t){return i(t)?t:r(t,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":122,"./is":127}],127:[function(t,e,n){var r=t("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(t){return!!r(t)&&!i.test(o.call(t))}},{"../function/is":121}],128:[function(t,e,n){var r=t("../object/is");e.exports=function(t){if(!r(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},{"../object/is":125}],129:[function(t,e,n){var r=t("../value/is"),i=t("../object/is"),o=Object.prototype.toString;e.exports=function(t){if(!r(t))return null;if(i(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===o)return null}try{return""+t}catch(t){return null}}},{"../object/is":125,"../value/is":131}],130:[function(t,e,n){var r=t("../lib/resolve-exception"),i=t("./is");e.exports=function(t){return i(t)?t:r(t,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":122,"./is":131}],131:[function(t,e,n){e.exports=function(t){return null!=t}},{}],132:[function(t,e,n){var r=t("punycode"),i=t("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=v,n.resolve=function(t,e){return v(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},n.format=function(t){return i.isString(t)&&(t=v(t)),t instanceof o?t.format():o.prototype.format.call(t)},n.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),p=["%","/","?",";","#"].concat(l),f=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=t("querystring");function v(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var v=t=c.join(a);if(v=v.trim(),!n&&1===t.split("#").length){var b=u.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(v);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,v=v.substr(w.length)}if(n||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||w&&y[w]||(v=v.substr(2),this.slashes=!0)}if(!y[w]&&(E||w&&!m[w])){for(var I,S,C=-1,N=0;N<f.length;N++)-1!==(O=v.indexOf(f[N]))&&(-1===C||O<C)&&(C=O);for(-1!==(S=-1===C?v.lastIndexOf("@"):v.lastIndexOf("@",C))&&(I=v.slice(0,S),v=v.slice(S+1),this.auth=decodeURIComponent(I)),C=-1,N=0;N<p.length;N++){var O;-1!==(O=v.indexOf(p[N]))&&(-1===C||O<C)&&(C=O)}-1===C&&(C=v.length),this.host=v.slice(0,C),v=v.slice(C),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var L=this.hostname.split(/\./),P=(N=0,L.length);N<P;N++){var R=L[N];if(R&&!R.match(h)){for(var A="",M=0,D=R.length;M<D;M++)R.charCodeAt(M)>127?A+="x":A+=R[M];if(!A.match(h)){var k=L.slice(0,N),F=L.slice(N+1),j=R.match(d);j&&(k.push(j[1]),F.unshift(j[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var $=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+$,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[x])for(N=0,P=l.length;N<P;N++){var U=l[N];if(-1!==v.indexOf(U)){var q=encodeURIComponent(U);q===U&&(q=escape(U)),v=v.split(U).join(q)}}var G=v.indexOf("#");-1!==G&&(this.hash=v.substr(G),v=v.slice(0,G));var z=v.indexOf("?");if(-1!==z?(this.search=v.substr(z),this.query=v.substr(z+1),e&&(this.query=_.parse(this.query)),v=v.slice(0,z)):e&&(this.search="",this.query={}),v&&(this.pathname=v),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){$=this.pathname||"";var V=this.search||"";this.path=$+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var p=Object.keys(t),f=0;f<p.length;f++){var h=p[f];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",_=n.search||"";n.path=g+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||v||n.host&&t.pathname,x=w,E=n.pathname&&n.pathname.split("/")||[],I=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===E[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return I&&(n.hostname=n.host=E.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=E.slice(-1)[0],C=(n.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,N=0,O=E.length;O>=0;O--)"."===(S=E[O])?E.splice(O,1):".."===S?(E.splice(O,1),N++):N&&(E.splice(O,1),N--);if(!w&&!x)for(;N--;N)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var T,L=""===E[0]||E[0]&&"/"===E[0].charAt(0);return I&&(n.hostname=n.host=L?"":E.length?E.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(w=w||n.host&&E.length)&&!L&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":133,punycode:101,querystring:104}],133:[function(t,e,n){e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],134:[function(t,e,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],135:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],136:[function(t,e,n){(function(e,r){var i=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),u=r[n];n<o;u=r[++n])g(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},n.deprecate=function(t,i){if(_(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var o,s={};function a(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function l(t,e,r){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return m(i)||(i=l(t,i,r)),i}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,e);if(o)return o;var s=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),x(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(e);if(0===s.length){if(E(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(w(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return p(e)}var c,b="",I=!1,S=["{","}"];return h(e)&&(I=!0,S=["[","]"]),E(e)&&(b=" [Function"+(e.name?": "+e.name:"")+"]"),v(e)&&(b=" "+RegExp.prototype.toString.call(e)),w(e)&&(b=" "+Date.prototype.toUTCString.call(e)),x(e)&&(b=" "+p(e)),0!==s.length||I&&0!=e.length?r<0?v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=I?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))})),o}(t,e,r,a,s):s.map((function(n){return f(t,e,r,a,n,I)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,S)):S[0]+b+S[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),O(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=g(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function _(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===I(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===I(t)}function x(t){return b(t)&&("[object Error]"===I(t)||t instanceof Error)}function E(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(_(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=e.pid;s[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else s[t]=function(){};return s[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=d,n.isNull=g,n.isNullOrUndefined=function(t){return null==t},n.isNumber=y,n.isString=m,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=_,n.isRegExp=v,n.isObject=b,n.isDate=w,n.isError=x,n.isFunction=E,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){console.log("%s - %s",N(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":135,_process:100,inherits:87}],137:[function(t,e,n){(function(n,r){var i=t("readable-stream").Transform,o=t("duplexify"),s=t("ws"),a=t("safe-buffer").Buffer;e.exports=function(t,e,u){var c,l,p="browser"===n.title,f=!!r.WebSocket,h=p?function t(e,n,r){if(l.bufferedAmount>g)setTimeout(t,y,e,n,r);else{m&&"string"==typeof e&&(e=a.from(e,"utf8"));try{l.send(e)}catch(t){return r(t)}r()}}:function(t,e,n){l.readyState===l.OPEN?(m&&"string"==typeof t&&(t=a.from(t,"utf8")),l.send(t,n)):n()};e&&!Array.isArray(e)&&"object"==typeof e&&(u=e,e=null,("string"==typeof u.protocol||Array.isArray(u.protocol))&&(e=u.protocol)),u||(u={}),void 0===u.objectMode&&(u.objectMode=!(!0===u.binary||void 0===u.binary));var d=function(t,e,n){var r=new i({objectMode:t.objectMode});return r._write=e,r._flush=n,r}(u,h,(function(t){l.close(),t()}));u.objectMode||(d._writev=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"string"==typeof t[r].chunk?n[r]=a.from(t[r],"utf8"):n[r]=t[r].chunk;this._write(a.concat(n),"binary",e)});var g=u.browserBufferSize||524288,y=u.browserBufferTimeout||1e3;"object"==typeof t?l=t:(l=f&&p?new s(t,e):new s(t,e,u)).binaryType="arraybuffer",l.readyState===l.OPEN?c=d:(c=o.obj(),l.onopen=function(){c.setReadable(d),c.setWritable(d),c.emit("connect")}),c.socket=l,l.onclose=function(){c.end(),c.destroy()},l.onerror=function(t){c.destroy(t)},l.onmessage=function(t){var e=t.data;e=e instanceof ArrayBuffer?a.from(e):a.from(e,"utf8"),d.push(e)},d.on("close",(function(){l.close()}));var m=!u.objectMode;return c}}).call(this,t("_process"),void 0!==Yi?Yi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:100,duplexify:18,"readable-stream":116,"safe-buffer":118,ws:138}],138:[function(t,e,n){var r=null;"undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof MozWebSocket?r=MozWebSocket:"undefined"!=typeof window&&(r=window.WebSocket||window.MozWebSocket),e.exports=r},{}],139:[function(t,e,n){e.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}},{}],140:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}]},{},[9])(9)})),Rh=Ki((function(e,n){var r;e.exports=(r=r||function(e,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==Yi&&Yi.crypto&&(r=Yi.crypto),!r)try{r=t}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),s={},a=s.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||p).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new c.init(e,t)}}),l=s.enc={},p=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},f=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},d=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*u,o);if(u){for(var p=0;p<u;p+=s)this._doProcessBlock(i,p);n=i.splice(0,u),r.sigBytes-=l}return new c.init(n,l)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(a.Hasher=d.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),s.algo={});return s}(Math),r)})),Ah=Ki((function(t,e){var n;t.exports=(n=Rh,function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],p=n[6],f=n[7],h=0;h<64;h++){if(h<16)c[h]=0|t[e+h];else{var d=c[h-15],g=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=c[h-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[h]=g+c[h-7]+m+c[h-16]}var _=r&i^r&o^i&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&p)+u[h]+c[h];f=p,p=l,l=a,a=s+b|0,s=o,o=i,i=r,r=b+(v+_)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+p|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(l),e.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)})),Mh=(Ki((function(t,e){var n,r,i;t.exports=(r=(n=Rh).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),Ki((function(t,e){t.exports=Rh.HmacSHA256}))),Dh=Ki((function(t,e){t.exports=Rh.enc.Hex}));function kh(t){return new Date(t).toISOString().replace(/[:\-]|\.\d{3}/g,"")}const Fh={};function jh(t,e,n,r){var i=new Date,o=function(t){return kh(t).substring(0,8)}(i),s=kh(i),a=t,u=(r=r,n=n,e),c=o+"/"+a+"/iotdevicegateway/aws4_request",l="X-Amz-Algorithm=AWS4-HMAC-SHA256";l+="&X-Amz-Credential="+encodeURIComponent(n+"/"+c),l+="&X-Amz-Date="+s;var p="GET\n/mqtt\n"+(l+="&X-Amz-SignedHeaders=host")+"\n"+("host:"+u+"\n")+"\nhost\n"+Fh.sha256(""),f="AWS4-HMAC-SHA256\n"+s+"\n"+c+"\n"+Fh.sha256(p),h=Fh.getSignatureKey(r,o,a,"iotdevicegateway");return"wss://"+u+"/mqtt?"+(l+="&X-Amz-Signature="+Fh.sign(h,f))}Fh.sign=function(t,e){return Mh(e,t).toString(Dh)},Fh.sha256=function(t){return Ah(t).toString(Dh)},Fh.getSignatureKey=function(t,e,n,r){var i=Mh(e,"AWS4"+t),o=Mh(n,i),s=Mh(r,o);return Mh("aws4_request",s)};const $h=window.Intl&&window.Intl.Collator?new Intl.Collator(void 0,{numeric:!0,sensitivity:"base",caseFirst:"lower"}).compare:(t,e)=>t<e?-1:t>e?1:0,Bh=Pi(new Date,t=>{t(new Date);const e=setInterval(()=>t(new Date),6e4);return()=>clearInterval(e)}),Uh=Pi(new Date,t=>{t(new Date);const e=setInterval(()=>t(new Date),1e3);return()=>clearInterval(e)}),qh=Bl,Gh=Ri(null),zh=Ri(null),Vh=Ri({}),Hh=Ai([Vh],([t])=>t.policy&&t.policy.toLowerCase()),Yh=Ai([Vh],([t])=>t.property&&t.property.toLowerCase()),Xh=Ai([Vh],([t])=>t.permit&&t.permit.toLowerCase()),Wh=Ai([Vh],([t])=>t.view),Kh=Ai([Vh],([t])=>t.valid),Qh=Ai([Vh],([t])=>t.q||t.search);let Jh=null;const Zh=Ai([Yh,Ih,Bh],([t,e,n],r)=>{if(t){if(!e)return r(null);var i=Me(e,t);if(!i)return r(null);if(new Date(i.expires)<function(t,e){Vl(2,arguments);var n=zl(e);return Yl(t,6e4*n)}(n,1))return r(null);i.subject!==Jh&&r(i),Jh=i.subject}}),td=Ai(Zh,t=>t&&t.item),ed=Ri({});let nd=null;const rd=function(t,e,n){const r=Ph(null,{transformWsUrl:function(n,r,i){return jh("us-east-1","a2rxme8um7p462-ats.iot.us-east-1.amazonaws.com",t,e)}});return n&&r.on("message",(function(t,e){n(JSON.parse(e.toString()))})),r.on("error",t=>{}),r.on("connect",(function(t){})),r}("AKIAIUPPRVWKBYHY4UWQ","GQQeZRDLfbR9JpVeIuAJzcAOgSlaJXABCRsqR3M8",t=>{ed.set({scope:nd,type:Object.keys(t)[0],updated:t[Object.keys(t)[0]]})});Yh.subscribe(t=>{t&&nd!=t&&(nd&&rd.unsubscribe(`locations/${nd}`),rd.subscribe(`locations/${nd=t}`))}),ed.subscribe(t=>{t&&t.scope&&cd(t.scope)});const id=function(t){let e=null,n=!1,r=!t.settings.skipNormalization;function i(t){return[t.coords.longitude,t.coords.latitude]}function o(t,e){return!n&&(null==t||(r=t,Zi(i(e),i(r),{units:"meters"})>=10));var r}return Ai(Hi,({position:s},a)=>{if(null==s)return a(null);o(e,s)&&async function(o){n=!0,e=o,r=!t.settings.skipNormalization;try{return await t.geoProperties(i(o),{}).then(t=>Gl(t))}catch(t){console.warn("Failed to fetch property for current location.")}finally{n=!1}}(s).then(t=>{void 0!==t&&a(t)})},null)}(Eh),od=Ai([id,qh],([t,e])=>t?mr(t.properties.items,t=>e[t]||t).filter(t=>!!t):null),sd={},ad=Ai(Qh,async(t,e)=>{if(!t)return e(null);if(t.length<4)return e(null);e({query:t,loading:!0}),e({query:t,loading:!1,items:sd[t]||(sd[t]=(await ud(t)).filter(t=>t.amenities.items.includes("amenity")))})},null);async function ud(t){if(!t||!t.length)return{};var e="string"==typeof t?`${Eh.settings.apiBase}/properties?viewpoint=${(new Date).toISOString()}&q=${t}`:`${Eh.settings.apiBase}/properties?viewpoint=${(new Date).toISOString()}${t.map(t=>"&property="+t).join("")}`;const n=await fetch(e),r=await n.json();return Gl(r),mr(Me(r,"properties.items"),t=>md(r.items[t],r.items))}const cd=ir((async function(t){const e=await Promise.all([fetch(`${Eh.settings.apiBase}/permits/policies/issue/statistics?scope=${t}&viewpoint=${(new Date).toISOString()}&valid=${nf(new Date).toISOString()}/&public=true&actual=false`)]).then(t=>Promise.all(t.map(t=>t.json()))).then(t=>Er({},...t));pr(e,(t,n)=>{wr(t,"items")&&(e.items[n]=t.items)}),Gl(e)}),1e3,{trailing:!0,leading:!0});const ld=Ri(Xf.get("properties",{}));ld.subscribe(t=>{Xf.set("properties",t)}),Vh.subscribe(t=>{t&&t.reset&&ld.set({})});const pd=Ri(Xf.get("permits",{}));pd.subscribe(t=>{Xf.set("permits",t)});let fd=null;Xh.subscribe(async t=>{fd&&clearInterval(fd),t&&(await Th([t]),fd=setInterval(()=>Th([t]),6e4),pd.update(e=>Er(Cr(e,t=>Date.now()<new Date(t).getTime()+864e5),{[t]:(new Date).toISOString()})))});let hd=null;pd.subscribe(async t=>{if(hd&&clearInterval(hd),!t)return null;var e=mr(t,(t,e)=>e);if(!e.length)return null;await Th(e),hd=setInterval(()=>Th(e),6e4)});let dd=null,gd=null;Yh.subscribe(async t=>{t&&t!==gd&&(qh.update(t=>(Mr(t,"policies"),t)),dd&&clearInterval(dd),gd=t,await async function(t){const e=await Promise.all([fetch(`${Eh.settings.apiBase}/permits/policies/issue/statistics?scope=${t}&viewpoint=${(new Date).toISOString()}&valid=${nf(new Date).toISOString()}/&public=true&actual=false&slots=true`),fetch(`${Eh.settings.apiBase}/units?scope=${t}&viewpoint=${(new Date).toISOString()}`)]).then(t=>Promise.all(t.map(t=>t.json()))).then(t=>Er({},...t));pr(e,(t,n)=>{wr(t,"items")&&(e.items[n]=t.items)}),Gl(e)}(t),dd=setInterval(()=>cd(t),3e5),ld.update(e=>Er(e,{[t]:(new Date).toISOString()})))});let yd=null;function md(t,e){return t?("string"==typeof t&&(t=e[t]),function(t,e){return t?(t.address=e[t.address]||t.address,t):t}(t,e)):t}ld.subscribe(async t=>{if(yd&&clearInterval(yd),!t)return null;var e=mr(t,(t,e)=>e);if(!e.length)return null;await ud(e),yd=setInterval(()=>ud(e),6e4)});const _d=Ai([Xh,qh],([t,e])=>{if(!t)return null;const n=e[t];return n?Er(n,{property:md(e[n.location]||n.location,e),address:e[n.address]||n.address,policy:e[n.issued.policy]||e[n.issued.issuer]||n.issued.issuer,vehicle:e[n.vehicle]||n.vehicle,spaces:(n.spaces||[]).map(t=>e[t]||t),tenant:e[n.tenant]||n.tenant}):null}),vd=Ai([Yh,qh],([t,e])=>md(e[t],e)),bd=Ai([vd,qh],([t,e])=>{if(!t)return null;if(!e.policies)return null;var n=mr(e.policies,(t,n)=>e[n]||e[t]);return n.every(t=>!!t)?n.filter(e=>!!e&&e.scope===t.id&&"parking"!==e.amenity).map(t=>(t.statistics=Me(e,["statistics",t.id])||Me(e,["statistics",t.subject]),t.meters.items=mr(t.meters.items,t=>e[t]||t),t.property=md(t.location,e),t)).sort((t,e)=>$h(t.title,e.title)):null}),wd=Ai([Hh,bd,qh],([t,e,n])=>!!t&&!!e&&e.find(e=>e.id===t||e.subject===t)),xd=Ai([Zh,ed],async([t],e)=>{if(!t)return e(null);const n=await Ch(t.item,t),r=n.items;var i,o;e((i=Me(n,"permits.items",{}),o=t=>t&&t.issued.policy&&"parking"!==t.amenity,(V(i)?fn:fr)(i,Qn(o))).map(t=>t?Er(t,{property:md(r[t.location]||t.location,r),address:r[t.address]||t.address,policy:r[t.issued.policy]||r[t.issued.issuer]||t.issued.policy,vehicle:r[t.vehicle]||t.vehicle,spaces:(t.spaces||[]).map(t=>r[t]||t),tenant:r[t.tenant]||t.tenant}):t))}),Ed=Ai([ld,qh],([t,e])=>{if(!t)return null;const n=(r=mr(t,(t,e)=>({id:e,time:t})),i=["time"],o=["desc"],null==r?[]:(V(i)||(i=null==i?[]:[i]),V(o=s?void 0:o)||(o=null==o?[]:[o]),Or(r,i,o))).map(({id:t})=>md(e[t],e));var r,i,o,s;return n.every(t=>!!t)?n:null}),Id=Ai([vd,qh],([t,e])=>t?mr(e.units,(t,n)=>e[n]).filter(e=>!!e&&e.scope===t.id).sort((t,e)=>$h(t.display,e.display)):null);Ai([vd,qh],([t,e])=>t?mr(e.spaces,(t,n)=>e[n]).filter(e=>!!e&&e.scope===t.id):null),Ai([zh,qh],([t,e])=>e[t]),Ai([Gh,qh],([t,e])=>e[t]);wd.subscribe(t=>{t&&Vh.update(e=>Er(e,{property:t.property.id||t.property||t.location}))}),_d.subscribe(t=>{t&&Vh.update(e=>Er(e,{property:t.location.id||t.location,policy:t.policy.id}))});var Sd=t=>{if("number"!=typeof t)throw new TypeError("Expected a number");const e=t>0?Math.floor:Math.ceil;return{days:e(t/864e5),hours:e(t/36e5)%24,minutes:e(t/6e4)%60,seconds:e(t/1e3)%60,milliseconds:e(t)%1e3,microseconds:e(1e3*t)%1e3,nanoseconds:e(1e6*t)%1e3}};const Cd=/P(?:(\d+(?:\.\d+)?)Y)?(?:(\d+(?:\.\d+)?)M)?(?:(\d+(?:\.\d+)?)W)?(?:(\d+(?:\.\d+)?)D)?(?:T(?:(\d+(?:\.\d+)?)H)?(?:(\d+(?:\.\d+)?)M)?(?:(\d+(?:\.\d+)?)S)?)?/u;var Nd=function(t=""){if("string"!=typeof t)return 0;const[,e=0,n=0,r=0,i=0,o=0,s=0,a=0]=Cd.exec(t)||[];return 31536e3*e+2592e3*n+604800*r+86400*i+3600*o+60*s+Number(a)};function Od(t){let e;return{c(){e=Yr("data"),Jr(e,"value",t[2]),Jr(e,"class","used")},m(t,n){zr(t,e,n)},p(t,n){4&n&&Jr(e,"value",t[2])},d(t){t&&Vr(e)}}}function Td(t){let e;return{c(){e=Yr("data"),Jr(e,"value",t[0]),Jr(e,"class","available")},m(t,n){zr(t,e,n)},p(t,n){1&n&&Jr(e,"value",t[0])},d(t){t&&Vr(e)}}}function Ld(t){let e,n,r=(t[3]||"")+"";return{c(){e=Yr("data"),n=Xr(r),Jr(e,"value",t[1]),Jr(e,"class","capacity")},m(t,r){zr(t,e,r),Gr(e,n)},p(t,i){8&i&&r!==(r=(t[3]||"")+"")&&Zr(n,r),2&i&&Jr(e,"value",t[1])},d(t){t&&Vr(e)}}}function Pd(t){let e,n,r,i=!1!==t[2]&&Od(t),o=!1!==t[0]&&Td(t),s=!1!==t[1]&&Ld(t);return{c(){e=Yr("p"),i&&i.c(),n=Wr(),o&&o.c(),r=Wr(),s&&s.c()},m(t,a){zr(t,e,a),i&&i.m(e,null),Gr(e,n),o&&o.m(e,null),Gr(e,r),s&&s.m(e,null)},p(t,[a]){!1!==t[2]?i?i.p(t,a):(i=Od(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),!1!==t[0]?o?o.p(t,a):(o=Td(t),o.c(),o.m(e,r)):o&&(o.d(1),o=null),!1!==t[1]?s?s.p(t,a):(s=Ld(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Dr,o:Dr,d(t){t&&Vr(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function Rd(t,e,n){let{available:r=!1}=e,{capacity:i=!1}=e,{used:o=!1}=e,{title:s=null}=e;return t.$set=t=>{"available"in t&&n(0,r=t.available),"capacity"in t&&n(1,i=t.capacity),"used"in t&&n(2,o=t.used),"title"in t&&n(3,s=t.title)},[r,i,o,s]}class Ad extends Ti{constructor(t){super(),Oi(this,t,Rd,Pd,Br,{available:0,capacity:1,used:2,title:3})}}function Md(t){let e,n,r=t[2]&&t[2][0]&&kd(t),i=t[2]&&t[2][1]&&Fd(t);return{c(){r&&r.c(),e=Wr(),i&&i.c(),n=Kr()},m(t,o){r&&r.m(t,o),zr(t,e,o),i&&i.m(t,o),zr(t,n,o)},p(t,o){t[2]&&t[2][0]?r?r.p(t,o):(r=kd(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),t[2]&&t[2][1]?i?i.p(t,o):(i=Fd(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(t){r&&r.d(t),t&&Vr(e),i&&i.d(t),t&&Vr(n)}}}function Dd(t){let e,n,r,i,o,s,a,u,c,l,p,f=Wp(t[2][0],"E h:mm a")+"",h=Wp(t[2][1],Zl(t[2][0],t[2][1])?"h:mm a":"E h:mm a")+"";return{c(){e=Yr("time"),n=Yr("dfn"),n.textContent="Start",r=Wr(),i=Xr(f),s=Wr(),a=Yr("time"),u=Yr("dfn"),u.textContent="End",c=Wr(),l=Xr(h),Jr(e,"class","start min"),Jr(e,"datetime",o=t[1][0]),Jr(a,"class","end max"),Jr(a,"datetime",p=t[1][1])},m(t,o){zr(t,e,o),Gr(e,n),Gr(e,r),Gr(e,i),zr(t,s,o),zr(t,a,o),Gr(a,u),Gr(a,c),Gr(a,l)},p(t,n){4&n&&f!==(f=Wp(t[2][0],"E h:mm a")+"")&&Zr(i,f),2&n&&o!==(o=t[1][0])&&Jr(e,"datetime",o),4&n&&h!==(h=Wp(t[2][1],Zl(t[2][0],t[2][1])?"h:mm a":"E h:mm a")+"")&&Zr(l,h),2&n&&p!==(p=t[1][1])&&Jr(a,"datetime",p)},d(t){t&&Vr(e),t&&Vr(s),t&&Vr(a)}}}function kd(t){let e,n,r,i=$d(t[2][0],t[3])+"";return{c(){e=Yr("abbr"),n=Xr(i),Jr(e,"title",r=gh(t[2][0]))},m(t,r){zr(t,e,r),Gr(e,n)},p(t,o){12&o&&i!==(i=$d(t[2][0],t[3])+"")&&Zr(n,i),4&o&&r!==(r=gh(t[2][0]))&&Jr(e,"title",r)},d(t){t&&Vr(e)}}}function Fd(t){let e,n,r,i=$d(t[2][1])+"";return{c(){e=Yr("abbr"),n=Xr(i),Jr(e,"title",r=gh(t[2][1]))},m(t,r){zr(t,e,r),Gr(e,n)},p(t,o){4&o&&i!==(i=$d(t[2][1])+"")&&Zr(n,i),4&o&&r!==(r=gh(t[2][1]))&&Jr(e,"title",r)},d(t){t&&Vr(e)}}}function jd(t){let e,n,r;function i(t,e){return t[4]?Dd:Md}let o=i(t),s=o(t);return{c(){e=Yr("time"),s.c(),Jr(e,"datetime",n=t[0]||""),Jr(e,"style",r=t[5]?`top:${t[5]}%;`:""),ti(e,"past",t[6]),ti(e,"now",t[8]),ti(e,"future",t[7]),ti(e,"hourstart",t[9]),ti(e,"daystart",t[10])},m(t,n){zr(t,e,n),s.m(e,null)},p(t,[a]){o===(o=i(t))&&s?s.p(t,a):(s.d(1),s=o(t),s&&(s.c(),s.m(e,null))),1&a&&n!==(n=t[0]||"")&&Jr(e,"datetime",n),32&a&&r!==(r=t[5]?`top:${t[5]}%;`:"")&&Jr(e,"style",r),64&a&&ti(e,"past",t[6]),256&a&&ti(e,"now",t[8]),128&a&&ti(e,"future",t[7]),512&a&&ti(e,"hourstart",t[9]),1024&a&&ti(e,"daystart",t[10])},i:Dr,o:Dr,d(t){t&&Vr(e),s.d()}}}function $d(t,e){return t?t.getHours()%12==0&&0==t.getMinutes()?Wp(t,"E h:mm a"):e?e.getDay()!==t.getDay()?(t.getMinutes(),Wp(t,"E h:mm a")):e.getHours()!==t.getHours()?(t.getMinutes(),Wp(t,"h:mm a")):Wp(t,"h:mm a"):(t.getMinutes(),Wp(t,"E h:mm a")):""}function Bd(t,e,n){let r;qr(t,Bh,t=>n(14,r=t));let i,o,s,a,u,c,l,p,f,h,d,{value:g=null}=e,{previous:y=null}=e,{relativeTo:m=null}=e;return t.$set=t=>{"value"in t&&n(0,g=t.value),"previous"in t&&n(11,y=t.previous),"relativeTo"in t&&n(12,m=t.relativeTo)},t.$$.update=()=>{1&t.$$.dirty&&n(1,i=!!g&&g.split("/")),1&t.$$.dirty&&n(13,o=!!g&&(g.toISOString?[g]:vh(g))),1&t.$$.dirty&&n(2,s=!!g&&(g.toISOString?[g]:vh(g,mh))),2048&t.$$.dirty&&n(3,a=y&&vh(y,mh)[0]),2&t.$$.dirty&&n(4,u=i&&2==i.length),12288&t.$$.dirty&&n(5,c=o&&o[0]&&m?function(t,e,n){return t&&e&&n?(t-e)/(n-e)*100:null}(o[0],...vh(m)):null),24576&t.$$.dirty&&n(6,l=o&&o[o.length-1]<r),24576&t.$$.dirty&&n(7,p=o&&o[0]>r),192&t.$$.dirty&&n(8,f=!l&&!p),4&t.$$.dirty&&n(9,h=s&&s[0]&&0==s[0].getMinutes()),516&t.$$.dirty&&n(10,d=h&&0==s[0].getHours())},[g,i,s,a,u,c,l,p,f,h,d,y,m]}class Ud extends Ti{constructor(t){super(),Oi(this,t,Bd,jd,Br,{value:0,previous:11,relativeTo:12})}}function qd(t,e,n){const r=t.slice();return r[35]=e[n],r}function Gd(t,e,n){const r=t.slice();return r[35]=e[n],r}function zd(t,e,n){const r=t.slice();return r[35]=e[n],r}function Vd(t,e,n){const r=t.slice();return r[35]=e[n],r}function Hd(t,e,n){const r=t.slice();return r[35]=e[n],r}function Yd(t){let e,n,r=t[8],i=[];for(let e=0;e<r.length;e+=1)i[e]=Kd(qd(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Kr()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);zr(t,e,r),n=!0},p(t,n){if(860&n[0]){let s;for(r=t[8],s=0;s<r.length;s+=1){const o=qd(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=Kd(o),i[s].c(),wi(i[s],1),i[s].m(e.parentNode,e))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){Hr(i,t),t&&Vr(e)}}}function Xd(t){let e,n,r,i,o,s,a,u=t[8].filter(t[30]),c=[];for(let e=0;e<u.length;e+=1)c[e]=Jd(Hd(t,u,e));const l=t=>xi(c[t],1,1,()=>{c[t]=null}),p=[tg,Zd],f=[];function h(t,e){return 384&e[0]&&(n=!(1!=t[8].filter(t[29]).length)),n?0:1}r=h(t,[-1]),i=f[r]=p[r](t);let d=t[8].filter(t[33]),g=[];for(let e=0;e<d.length;e+=1)g[e]=sg(Gd(t,d,e));const y=t=>xi(g[t],1,1,()=>{g[t]=null});return{c(){for(let t=0;t<c.length;t+=1)c[t].c();e=Wr(),i.c(),o=Wr();for(let t=0;t<g.length;t+=1)g[t].c();s=Kr()},m(t,n){for(let e=0;e<c.length;e+=1)c[e].m(t,n);zr(t,e,n),f[r].m(t,n),zr(t,o,n);for(let e=0;e<g.length;e+=1)g[e].m(t,n);zr(t,s,n),a=!0},p(t,n){if(988&n[0]){let r;for(u=t[8].filter(t[30]),r=0;r<u.length;r+=1){const i=Hd(t,u,r);c[r]?(c[r].p(i,n),wi(c[r],1)):(c[r]=Jd(i),c[r].c(),wi(c[r],1),c[r].m(e.parentNode,e))}for(vi(),r=u.length;r<c.length;r+=1)l(r);bi()}let a=r;if(r=h(t,n),r===a?f[r].p(t,n):(vi(),xi(f[a],1,1,()=>{f[a]=null}),bi(),i=f[r],i||(i=f[r]=p[r](t),i.c()),wi(i,1),i.m(o.parentNode,o)),988&n[0]){let e;for(d=t[8].filter(t[33]),e=0;e<d.length;e+=1){const r=Gd(t,d,e);g[e]?(g[e].p(r,n),wi(g[e],1)):(g[e]=sg(r),g[e].c(),wi(g[e],1),g[e].m(s.parentNode,s))}for(vi(),e=d.length;e<g.length;e+=1)y(e);bi()}},i(t){if(!a){for(let t=0;t<u.length;t+=1)wi(c[t]);wi(i);for(let t=0;t<d.length;t+=1)wi(g[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)xi(c[t]);xi(i),g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)xi(g[t]);a=!1},d(t){Hr(c,t),t&&Vr(e),f[r].d(t),t&&Vr(o),Hr(g,t),t&&Vr(s)}}}function Wd(t){let e,n,r,i,o;return{c(){e=Yr("input"),i=Wr(),o=Yr("span"),Jr(e,"type",n=t[6]?"checkbox":"radio"),Jr(e,"name","valid"),e.value=r=t[35].interval},m(t,n){zr(t,e,n),zr(t,i,n),zr(t,o,n)},p(t,i){64&i[0]&&n!==(n=t[6]?"checkbox":"radio")&&Jr(e,"type",n),256&i[0]&&r!==(r=t[35].interval)&&e.value!==r&&(e.value=r)},d(t){t&&Vr(e),t&&Vr(i),t&&Vr(o)}}}function Kd(t){let e,n,r,i,o,s;const a=new Ud({props:{value:t[35].original[0],previous:t[35].prev}}),u=new Ad({props:{title:t[35].title,available:t[2]&&!t[35].closed&&t[35].available,capacity:(t[3]||t[35].closed)&&t[35].capacity,used:t[4]&&t[35].used}});let c=t[35].selectable&&Wd(t);return{c(){Ii(a.$$.fragment),e=Wr(),n=Yr("time"),Ii(u.$$.fragment),r=Wr(),c&&c.c(),i=Wr(),Jr(n,"datetime",o=t[35].interval),ti(n,"past",wh(t[35].interval)<t[9]),ti(n,"future",xh(t[35].interval)>t[9]),ti(n,"closed",t[35].closed)},m(t,o){Si(a,t,o),zr(t,e,o),zr(t,n,o),Si(u,n,null),Gr(n,r),c&&c.m(n,null),Gr(n,i),s=!0},p(t,e){const r={};256&e[0]&&(r.value=t[35].original[0]),256&e[0]&&(r.previous=t[35].prev),a.$set(r);const l={};256&e[0]&&(l.title=t[35].title),260&e[0]&&(l.available=t[2]&&!t[35].closed&&t[35].available),264&e[0]&&(l.capacity=(t[3]||t[35].closed)&&t[35].capacity),272&e[0]&&(l.used=t[4]&&t[35].used),u.$set(l),t[35].selectable?c?c.p(t,e):(c=Wd(t),c.c(),c.m(n,i)):c&&(c.d(1),c=null),(!s||256&e[0]&&o!==(o=t[35].interval))&&Jr(n,"datetime",o),768&e[0]&&ti(n,"past",wh(t[35].interval)<t[9]),768&e[0]&&ti(n,"future",xh(t[35].interval)>t[9]),256&e[0]&&ti(n,"closed",t[35].closed)},i(t){s||(wi(a.$$.fragment,t),wi(u.$$.fragment,t),s=!0)},o(t){xi(a.$$.fragment,t),xi(u.$$.fragment,t),s=!1},d(t){Ci(a,t),t&&Vr(e),t&&Vr(n),Ci(u),c&&c.d()}}}function Qd(t){let e,n,r,i,o;return{c(){e=Yr("input"),i=Wr(),o=Yr("span"),Jr(e,"type",n=t[6]?"checkbox":"radio"),Jr(e,"name","valid"),e.value=r=t[35].interval},m(t,n){zr(t,e,n),zr(t,i,n),zr(t,o,n)},p(t,i){64&i[0]&&n!==(n=t[6]?"checkbox":"radio")&&Jr(e,"type",n),384&i[0]&&r!==(r=t[35].interval)&&e.value!==r&&(e.value=r)},d(t){t&&Vr(e),t&&Vr(i),t&&Vr(o)}}}function Jd(t){let e,n,r,i,o;const s=new Ud({props:{value:t[35].original[0],previous:t[35].prev}}),a=new Ad({props:{title:t[35].title,available:t[2]&&!t[35].closed&&t[35].available,capacity:(t[3]||t[35].closed)&&t[35].capacity,used:t[4]&&t[35].used}});let u=t[35].selectable&&Qd(t);return{c(){Ii(s.$$.fragment),e=Wr(),n=Yr("time"),Ii(a.$$.fragment),r=Wr(),u&&u.c(),Jr(n,"datetime",i=t[35].interval),ti(n,"past",wh(t[35].interval)<t[9]),ti(n,"future",xh(t[35].interval)>t[9]),ti(n,"closed",t[35].closed)},m(t,i){Si(s,t,i),zr(t,e,i),zr(t,n,i),Si(a,n,null),Gr(n,r),u&&u.m(n,null),o=!0},p(t,e){const r={};384&e[0]&&(r.value=t[35].original[0]),384&e[0]&&(r.previous=t[35].prev),s.$set(r);const c={};384&e[0]&&(c.title=t[35].title),388&e[0]&&(c.available=t[2]&&!t[35].closed&&t[35].available),392&e[0]&&(c.capacity=(t[3]||t[35].closed)&&t[35].capacity),400&e[0]&&(c.used=t[4]&&t[35].used),a.$set(c),t[35].selectable?u?u.p(t,e):(u=Qd(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!o||384&e[0]&&i!==(i=t[35].interval))&&Jr(n,"datetime",i),896&e[0]&&ti(n,"past",wh(t[35].interval)<t[9]),896&e[0]&&ti(n,"future",xh(t[35].interval)>t[9]),384&e[0]&&ti(n,"closed",t[35].closed)},i(t){o||(wi(s.$$.fragment,t),wi(a.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),xi(a.$$.fragment,t),o=!1},d(t){Ci(s,t),t&&Vr(e),t&&Vr(n),Ci(a),u&&u.d()}}}function Zd(t){let e,n,r,i=t[8].filter(t[32]),o=[];for(let e=0;e<i.length;e+=1)o[e]=ng(zd(t,i,e));const s=t=>xi(o[t],1,1,()=>{o[t]=null});return{c(){e=Yr("time");for(let t=0;t<o.length;t+=1)o[t].c();Jr(e,"datetime",n=t[7].start.toISOString()+"/"+t[7].end.toISOString()),Jr(e,"class","selected")},m(t,n){zr(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,a){if(988&a[0]){let n;for(i=t[8].filter(t[32]),n=0;n<i.length;n+=1){const r=zd(t,i,n);o[n]?(o[n].p(r,a),wi(o[n],1)):(o[n]=ng(r),o[n].c(),wi(o[n],1),o[n].m(e,null))}for(vi(),n=i.length;n<o.length;n+=1)s(n);bi()}(!r||128&a[0]&&n!==(n=t[7].start.toISOString()+"/"+t[7].end.toISOString()))&&Jr(e,"datetime",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)wi(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)xi(o[t]);r=!1},d(t){t&&Vr(e),Hr(o,t)}}}function tg(t){let e,n,r=t[8].filter(t[31]),i=[];for(let e=0;e<r.length;e+=1)i[e]=ig(Vd(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Kr()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);zr(t,e,r),n=!0},p(t,n){if(988&n[0]){let s;for(r=t[8].filter(t[31]),s=0;s<r.length;s+=1){const o=Vd(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=ig(o),i[s].c(),wi(i[s],1),i[s].m(e.parentNode,e))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){Hr(i,t),t&&Vr(e)}}}function eg(t){let e,n,r,i,o;return{c(){e=Yr("input"),i=Wr(),o=Yr("span"),Jr(e,"type",n=t[6]?"checkbox":"radio"),Jr(e,"name","valid"),e.value=r=t[35].interval},m(t,n){zr(t,e,n),zr(t,i,n),zr(t,o,n)},p(t,i){64&i[0]&&n!==(n=t[6]?"checkbox":"radio")&&Jr(e,"type",n),384&i[0]&&r!==(r=t[35].interval)&&e.value!==r&&(e.value=r)},d(t){t&&Vr(e),t&&Vr(i),t&&Vr(o)}}}function ng(t){let e,n,r,i,o,s;const a=new Ud({props:{value:t[35].original[0],previous:t[35].prev}}),u=new Ad({props:{title:t[35].title,available:t[2]&&!t[35].closed&&t[35].available,capacity:(t[3]||t[35].closed)&&t[35].capacity,used:t[4]&&t[35].used}});let c=t[35].selectable&&eg(t);return{c(){Ii(a.$$.fragment),e=Wr(),n=Yr("time"),Ii(u.$$.fragment),r=Wr(),c&&c.c(),i=Wr(),Jr(n,"datetime",o=t[35].interval),ti(n,"past",wh(t[35].interval)<t[9]),ti(n,"future",xh(t[35].interval)>t[9]),ti(n,"closed",t[35].closed)},m(t,o){Si(a,t,o),zr(t,e,o),zr(t,n,o),Si(u,n,null),Gr(n,r),c&&c.m(n,null),Gr(n,i),s=!0},p(t,e){const r={};384&e[0]&&(r.value=t[35].original[0]),384&e[0]&&(r.previous=t[35].prev),a.$set(r);const l={};384&e[0]&&(l.title=t[35].title),388&e[0]&&(l.available=t[2]&&!t[35].closed&&t[35].available),392&e[0]&&(l.capacity=(t[3]||t[35].closed)&&t[35].capacity),400&e[0]&&(l.used=t[4]&&t[35].used),u.$set(l),t[35].selectable?c?c.p(t,e):(c=eg(t),c.c(),c.m(n,i)):c&&(c.d(1),c=null),(!s||384&e[0]&&o!==(o=t[35].interval))&&Jr(n,"datetime",o),896&e[0]&&ti(n,"past",wh(t[35].interval)<t[9]),896&e[0]&&ti(n,"future",xh(t[35].interval)>t[9]),384&e[0]&&ti(n,"closed",t[35].closed)},i(t){s||(wi(a.$$.fragment,t),wi(u.$$.fragment,t),s=!0)},o(t){xi(a.$$.fragment,t),xi(u.$$.fragment,t),s=!1},d(t){Ci(a,t),t&&Vr(e),t&&Vr(n),Ci(u),c&&c.d()}}}function rg(t){let e,n,r,i,o;return{c(){e=Yr("input"),i=Wr(),o=Yr("span"),Jr(e,"type",n=t[6]?"checkbox":"radio"),Jr(e,"name","valid"),e.value=r=t[35].interval},m(t,n){zr(t,e,n),zr(t,i,n),zr(t,o,n)},p(t,i){64&i[0]&&n!==(n=t[6]?"checkbox":"radio")&&Jr(e,"type",n),384&i[0]&&r!==(r=t[35].interval)&&e.value!==r&&(e.value=r)},d(t){t&&Vr(e),t&&Vr(i),t&&Vr(o)}}}function ig(t){let e,n,r,i,o,s;const a=new Ud({props:{value:t[35].original[0],previous:t[35].prev}}),u=new Ad({props:{title:t[35].title,available:t[2]&&!t[35].closed&&t[35].available,capacity:(t[3]||t[35].closed)&&t[35].capacity,used:t[4]&&t[35].used}});let c=t[35].selectable&&rg(t);return{c(){Ii(a.$$.fragment),e=Wr(),n=Yr("time"),Ii(u.$$.fragment),r=Wr(),c&&c.c(),i=Wr(),Jr(n,"datetime",o=t[35].interval),Jr(n,"class","selected"),ti(n,"past",wh(t[35].interval)<t[9]),ti(n,"future",xh(t[35].interval)>t[9]),ti(n,"closed",t[35].closed)},m(t,o){Si(a,t,o),zr(t,e,o),zr(t,n,o),Si(u,n,null),Gr(n,r),c&&c.m(n,null),Gr(n,i),s=!0},p(t,e){const r={};384&e[0]&&(r.value=t[35].original[0]),384&e[0]&&(r.previous=t[35].prev),a.$set(r);const l={};384&e[0]&&(l.title=t[35].title),388&e[0]&&(l.available=t[2]&&!t[35].closed&&t[35].available),392&e[0]&&(l.capacity=(t[3]||t[35].closed)&&t[35].capacity),400&e[0]&&(l.used=t[4]&&t[35].used),u.$set(l),t[35].selectable?c?c.p(t,e):(c=rg(t),c.c(),c.m(n,i)):c&&(c.d(1),c=null),(!s||384&e[0]&&o!==(o=t[35].interval))&&Jr(n,"datetime",o),896&e[0]&&ti(n,"past",wh(t[35].interval)<t[9]),896&e[0]&&ti(n,"future",xh(t[35].interval)>t[9]),384&e[0]&&ti(n,"closed",t[35].closed)},i(t){s||(wi(a.$$.fragment,t),wi(u.$$.fragment,t),s=!0)},o(t){xi(a.$$.fragment,t),xi(u.$$.fragment,t),s=!1},d(t){Ci(a,t),t&&Vr(e),t&&Vr(n),Ci(u),c&&c.d()}}}function og(t){let e,n,r,i,o;return{c(){e=Yr("input"),i=Wr(),o=Yr("span"),Jr(e,"type",n=t[6]?"checkbox":"radio"),Jr(e,"name","valid"),e.value=r=t[35].interval},m(t,n){zr(t,e,n),zr(t,i,n),zr(t,o,n)},p(t,i){64&i[0]&&n!==(n=t[6]?"checkbox":"radio")&&Jr(e,"type",n),384&i[0]&&r!==(r=t[35].interval)&&e.value!==r&&(e.value=r)},d(t){t&&Vr(e),t&&Vr(i),t&&Vr(o)}}}function sg(t){let e,n,r,i,o,s;const a=new Ud({props:{value:t[35].original[0],previous:t[35].prev}}),u=new Ad({props:{title:t[35].title,available:t[2]&&!t[35].closed&&t[35].available,capacity:(t[3]||t[35].closed)&&t[35].capacity,used:t[4]&&t[35].used}});let c=t[35].selectable&&og(t);return{c(){Ii(a.$$.fragment),e=Wr(),n=Yr("time"),Ii(u.$$.fragment),r=Wr(),c&&c.c(),i=Wr(),Jr(n,"datetime",o=t[35].interval),ti(n,"past",wh(t[35].interval)<t[9]),ti(n,"future",xh(t[35].interval)>t[9]),ti(n,"closed",t[35].closed)},m(t,o){Si(a,t,o),zr(t,e,o),zr(t,n,o),Si(u,n,null),Gr(n,r),c&&c.m(n,null),Gr(n,i),s=!0},p(t,e){const r={};384&e[0]&&(r.value=t[35].original[0]),384&e[0]&&(r.previous=t[35].prev),a.$set(r);const l={};384&e[0]&&(l.title=t[35].title),388&e[0]&&(l.available=t[2]&&!t[35].closed&&t[35].available),392&e[0]&&(l.capacity=(t[3]||t[35].closed)&&t[35].capacity),400&e[0]&&(l.used=t[4]&&t[35].used),u.$set(l),t[35].selectable?c?c.p(t,e):(c=og(t),c.c(),c.m(n,i)):c&&(c.d(1),c=null),(!s||384&e[0]&&o!==(o=t[35].interval))&&Jr(n,"datetime",o),896&e[0]&&ti(n,"past",wh(t[35].interval)<t[9]),896&e[0]&&ti(n,"future",xh(t[35].interval)>t[9]),384&e[0]&&ti(n,"closed",t[35].closed)},i(t){s||(wi(a.$$.fragment,t),wi(u.$$.fragment,t),s=!0)},o(t){xi(a.$$.fragment,t),xi(u.$$.fragment,t),s=!1},d(t){Ci(a,t),t&&Vr(e),t&&Vr(n),Ci(u),c&&c.d()}}}function ag(t){let e,n,r,i,o,s,a,u,c;const l=[Xd,Yd],p=[];function f(t,e){return t[12]?0:1}i=f(t),o=p[i]=l[i](t);const h=new Ud({props:{value:t[11],previous:t[8]&&t[8].length&&Me(t[8],[t[8].length-1,"original",0])}});return{c(){e=Yr("figure"),n=Wr(),r=Yr("time"),o.c(),s=Wr(),Ii(h.$$.fragment),Jr(r,"class","range"),Jr(r,"datetime",a=t[10]+"/"+t[11]),Jr(e,"class","agenda")},m(o,a,l){zr(o,e,a),Gr(e,n),Gr(e,r),p[i].m(r,null),Gr(r,s),Si(h,r,null),t[34](e),u=!0,l&&c(),c=Qr(r,"change",t[13])},p(t,e){let n=i;i=f(t),i===n?p[i].p(t,e):(vi(),xi(p[n],1,1,()=>{p[n]=null}),bi(),o=p[i],o||(o=p[i]=l[i](t),o.c()),wi(o,1),o.m(r,s));const c={};2048&e[0]&&(c.value=t[11]),256&e[0]&&(c.previous=t[8]&&t[8].length&&Me(t[8],[t[8].length-1,"original",0])),h.$set(c),(!u||3072&e[0]&&a!==(a=t[10]+"/"+t[11]))&&Jr(r,"datetime",a)},i(t){u||(wi(!1),wi(o),wi(h.$$.fragment,t),u=!0)},o(t){xi(!1),xi(o),xi(h.$$.fragment,t),u=!1},d(n){n&&Vr(e),p[i].d(),Ci(h),t[34](null),c()}}}function ug(t){if(!t)return null;var e=_h(t);return e.end-e.start<=0?null:t}function cg(t,e){return!(!t||!e)&&("string"==typeof t&&(t=_h(t)),"string"==typeof e&&(e=_h(e)),e.start>=t.start&&e.end<=t.end)}function lg(t,e,n){let r;qr(t,Bh,t=>n(9,r=t));let{policy:i=null}=e,{selectable:o=!1}=e,{minDuration:s="PT0S"}=e,{maxDuration:a=s}=e,{available:u=!1}=e,{capacity:c=!1}=e,{used:l=!1}=e,{selected:p=null}=e,f=null;function h(t,e,n,r,i,o){const s=_h(e);if(n&&n.end<t)return!1;if(!e)return!0;if(!i)return!0;if(s.end-s.start<=0)return!0;if(!n)return e.end-e.start<o;const a=Math.min(s.start,n.start),u=Math.max(s.end,n.end);return!(u-a>o)&&!r.some(t=>t.start>=a&&t.end<=u&&t.block)}function d(t,e,n,r,i,o){const s=function(t,e,n){var r=V(t)?sn:Tr,i=arguments.length<3;return r(t,Qn(e),n,i,tr)}(e,(e,n,r)=>{let[i,o]=n.split("=");i=i.split("/").map(t=>parseInt(t));const s=vh(r,mh),a=vh(r);var u=e[e.length-1];const c={prev:u&&u.original[0],original:r.split("/"),interval:r,title:o,utc:a,local:s,used:i[0],capacity:i[1],available:i[1]-i[0],full:i[0]>=i[1],closed:0===i[1],block:i[0]>=i[1]||0===i[1],past:a[1]<t,start:a[0],end:a[1]};return e.push(c),e},[]);return s.map(e=>{const a=cg(n,e);return Object.assign(e,{selected:a,selectable:a||!!r&&!e.block&&h(t,n,e,s,i,o)})})}let g,y,m,_,v,b,w,x,E,I,S,C,N,O,L,P;return t.$set=t=>{"policy"in t&&n(0,i=t.policy),"selectable"in t&&n(1,o=t.selectable),"minDuration"in t&&n(14,s=t.minDuration),"maxDuration"in t&&n(15,a=t.maxDuration),"available"in t&&n(2,u=t.available),"capacity"in t&&n(3,c=t.capacity),"used"in t&&n(4,l=t.used),"selected"in t&&n(16,p=t.selected)},t.$$.update=()=>{var e;1&t.$$.dirty[0]&&n(17,g=Me(i,"statistics.intervals")),1&t.$$.dirty[0]&&n(14,s=Me(i,"duration.min")||Me(i,"duration")),1&t.$$.dirty[0]&&n(15,a=Me(i,"duration.max")||Me(i,"duration")),16384&t.$$.dirty[0]&&n(18,y=1e3*Nd(s)),32768&t.$$.dirty[0]&&n(19,m=1e3*Nd(a)),524288&t.$$.dirty[0]&&(_=Sd(m)),262144&t.$$.dirty[0]&&n(21,v=y),2097152&t.$$.dirty[0]&&(b=v/1e3/60),786432&t.$$.dirty[0]&&n(6,w=m>y),65536&t.$$.dirty[0]&&n(7,x=(e=p)?e.toISOString?{start:e,end:e}:Array.isArray(e)?{start:e[0]&&new Date(e[0]),end:e[1]&&new Date(e[1])}:_h(e):null),721474&t.$$.dirty[0]&&n(8,E=d(r,g,p,o,w,m)),256&t.$$.dirty[0]&&(I=E[0].utc[0]),256&t.$$.dirty[0]&&(S=E[E.length-1].utc[1]),256&t.$$.dirty[0]&&(C=E[0].local[0]),256&t.$$.dirty[0]&&(N=E[E.length-1].local[1]),256&t.$$.dirty[0]&&n(10,O=E[0].original[0]),256&t.$$.dirty[0]&&n(11,L=E[E.length-1].original[1]),128&t.$$.dirty[0]&&n(12,P=!!x&&x.end-x.start>0)},[i,o,u,c,l,f,w,x,E,r,O,L,P,function(t){var e=t.target.value;return"radio"===t.target.type?e=ug(e):cg(p,e)?e=function(t,e){if(!cg(t,e))return ug(t);var n=e.split("/"),r=t&&t.split("/");return e=_h(e),t=_h(t),e.start<=t.start?ug(`${n[1]}/${r[1]}`):(e.end,t.end,ug(`${r[0]}/${n[0]}`))}(p,e):cg(p,e)||(e=function(t,e){if(!t)return ug(e);if(cg(t,e))return ug(t);var n=e.split("/"),r=t&&t.split("/");return e=_h(e),t=_h(t),e.start<t.start&&e.end<t.end?ug(`${n[0]}/${r[1]}`):e.start<t.start&&e.end>t.end?ug(`${n[0]}/${n[1]}`):e.start>t.start&&e.end>t.end?ug(`${r[0]}/${n[1]}`):void 0}(p,e)),T(`${location.pathname}?selected=${e||""}`)},s,a,p,g,y,m,_,v,b,I,S,C,N,h,d,t=>t.start>=x.start&&t.end<=x.end,t=>t.end<=x.start,t=>t.start>=x.start&&t.end<=x.end,t=>t.start>=x.start&&t.end<=x.end,t=>t.start>=x.end,function(t){si[t?"unshift":"push"](()=>{n(5,f=t)})}]}class pg extends Ti{constructor(t){super(),Oi(this,t,lg,ag,Br,{policy:0,selectable:1,minDuration:14,maxDuration:15,available:2,capacity:3,used:4,selected:16},[-1,-1])}}function fg(t){let e,n,r,i,o,s,a,u=t[0].title+"";function c(t,e){return t[0].photo?dg:hg}let l=c(t),p=l(t);return{c(){e=Yr("data"),n=Yr("figure"),p.c(),r=Wr(),i=Yr("h1"),o=Xr(u),Jr(e,"class",s=t[0].type),Jr(e,"value",a=t[0].id)},m(t,s){zr(t,e,s),Gr(e,n),p.m(n,null),Gr(e,r),Gr(e,i),Gr(i,o)},p(t,r){l===(l=c(t))&&p?p.p(t,r):(p.d(1),p=l(t),p&&(p.c(),p.m(n,null))),1&r&&u!==(u=t[0].title+"")&&Zr(o,u),1&r&&s!==(s=t[0].type)&&Jr(e,"class",s),1&r&&a!==(a=t[0].id)&&Jr(e,"value",a)},d(t){t&&Vr(e),p.d()}}}function hg(t){let e,n;return{c(){e=Yr("img"),Jr(e,"class",n="policy "+t[0].title.toLowerCase().split(/[^a-z]+/gi).join(" ")),Jr(e,"alt","amenity")},m(t,n){zr(t,e,n)},p(t,r){1&r&&n!==(n="policy "+t[0].title.toLowerCase().split(/[^a-z]+/gi).join(" "))&&Jr(e,"class",n)},d(t){t&&Vr(e)}}}function dg(t){let e,n;return{c(){e=Yr("img"),Jr(e,"alt","amenity"),e.src!==(n=t[0].photo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=500")&&Jr(e,"src",n)},m(t,n){zr(t,e,n)},p(t,r){1&r&&e.src!==(n=t[0].photo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=500")&&Jr(e,"src",n)},d(t){t&&Vr(e)}}}function gg(t){let e,n=!!t[0]&&!!t[0].id&&fg(t);return{c(){n&&n.c(),e=Kr()},m(t,r){n&&n.m(t,r),zr(t,e,r)},p(t,[r]){t[0]&&t[0].id?n?n.p(t,r):(n=fg(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Dr,o:Dr,d(t){n&&n.d(t),t&&Vr(e)}}}function yg(t,e,n){let{policy:r=null}=e;return t.$set=t=>{"policy"in t&&n(0,r=t.policy)},[r]}class mg extends Ti{constructor(t){super(),Oi(this,t,yg,gg,Br,{policy:0})}}function _g(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,_,v,b,w,x=t[0].name+"",E=t[0].address.street+"",I=t[0].address.city+"",S=t[0].address.state+"",C=t[0].address.postal+"",N=t[0].photo&&vg(t),O=t[0].contact&&bg(t);return{c(){e=Yr("data"),n=Yr("figure"),N&&N.c(),r=Wr(),i=Yr("h1"),o=Xr(x),s=Wr(),a=Yr("address"),u=Yr("span"),c=Xr(E),l=Wr(),p=Yr("span"),f=Xr(I),h=Wr(),d=Yr("span"),g=Xr(S),y=Wr(),m=Yr("span"),_=Xr(C),v=Wr(),O&&O.c(),Jr(u,"class","street"),Jr(p,"class","city"),Jr(d,"class","state"),Jr(m,"class","postal"),Jr(e,"class",b=t[0].type),Jr(e,"value",w=t[0].id)},m(t,b){zr(t,e,b),Gr(e,n),N&&N.m(n,null),Gr(e,r),Gr(e,i),Gr(i,o),Gr(e,s),Gr(e,a),Gr(a,u),Gr(u,c),Gr(a,l),Gr(a,p),Gr(p,f),Gr(a,h),Gr(a,d),Gr(d,g),Gr(a,y),Gr(a,m),Gr(m,_),Gr(e,v),O&&O.m(e,null)},p(t,r){t[0].photo?N?N.p(t,r):(N=vg(t),N.c(),N.m(n,null)):N&&(N.d(1),N=null),1&r&&x!==(x=t[0].name+"")&&Zr(o,x),1&r&&E!==(E=t[0].address.street+"")&&Zr(c,E),1&r&&I!==(I=t[0].address.city+"")&&Zr(f,I),1&r&&S!==(S=t[0].address.state+"")&&Zr(g,S),1&r&&C!==(C=t[0].address.postal+"")&&Zr(_,C),t[0].contact?O?O.p(t,r):(O=bg(t),O.c(),O.m(e,null)):O&&(O.d(1),O=null),1&r&&b!==(b=t[0].type)&&Jr(e,"class",b),1&r&&w!==(w=t[0].id)&&Jr(e,"value",w)},d(t){t&&Vr(e),N&&N.d(),O&&O.d()}}}function vg(t){let e,n;return{c(){e=Yr("img"),Jr(e,"alt","property photo"),e.src!==(n=t[0].photo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&fit=crop&h=250&w=500&crop=focalpoint")&&Jr(e,"src",n)},m(t,n){zr(t,e,n)},p(t,r){1&r&&e.src!==(n=t[0].photo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&fit=crop&h=250&w=500&crop=focalpoint")&&Jr(e,"src",n)},d(t){t&&Vr(e)}}}function bg(t){let e,n,r,i,o,s=(t[0].contact.name||"management office")+"",a=t[0].contact.email&&wg(t),u=t[0].contact.tel&&xg(t);return{c(){e=Yr("aside"),n=Xr(s),r=Wr(),i=Yr("address"),a&&a.c(),o=Wr(),u&&u.c(),Jr(e,"class","contact")},m(t,s){zr(t,e,s),Gr(e,n),Gr(e,r),Gr(e,i),a&&a.m(i,null),Gr(i,o),u&&u.m(i,null)},p(t,e){1&e&&s!==(s=(t[0].contact.name||"management office")+"")&&Zr(n,s),t[0].contact.email?a?a.p(t,e):(a=wg(t),a.c(),a.m(i,o)):a&&(a.d(1),a=null),t[0].contact.tel?u?u.p(t,e):(u=xg(t),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},d(t){t&&Vr(e),a&&a.d(),u&&u.d()}}}function wg(t){let e,n,r,i,o=t[0].contact.email+"";return{c(){e=Yr("a"),n=Xr(o),i=Yr("br"),Jr(e,"href",r="mailto:"+t[0].contact.email)},m(t,r){zr(t,e,r),Gr(e,n),zr(t,i,r)},p(t,i){1&i&&o!==(o=t[0].contact.email+"")&&Zr(n,o),1&i&&r!==(r="mailto:"+t[0].contact.email)&&Jr(e,"href",r)},d(t){t&&Vr(e),t&&Vr(i)}}}function xg(t){let e,n,r,i=t[0].contact.tel+"";return{c(){e=Yr("a"),n=Xr(i),Jr(e,"href",r="tel:+"+t[0].contact.tel)},m(t,r){zr(t,e,r),Gr(e,n)},p(t,o){1&o&&i!==(i=t[0].contact.tel+"")&&Zr(n,i),1&o&&r!==(r="tel:+"+t[0].contact.tel)&&Jr(e,"href",r)},d(t){t&&Vr(e)}}}function Eg(t){let e,n=t[0]&&t[0].id&&_g(t);return{c(){n&&n.c(),e=Kr()},m(t,r){n&&n.m(t,r),zr(t,e,r)},p(t,[r]){t[0]&&t[0].id?n?n.p(t,r):(n=_g(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Dr,o:Dr,d(t){n&&n.d(t),t&&Vr(e)}}}function Ig(t,e,n){let{property:r=null}=e;return t.$set=t=>{"property"in t&&n(0,r=t.property)},[r]}class Sg extends Ti{constructor(t){super(),Oi(this,t,Ig,Eg,Br,{property:0})}}function Cg(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,_,v,b=Jp(t[1],t[8],{addSuffix:!0})+"",w=Jp(t[2],t[8],{addSuffix:!0})+"";return{c(){e=Yr("time"),n=Yr("dfn"),n.textContent="Start",r=Wr(),i=Yr("abbr"),o=Xr(t[1]),s=Wr(),a=Yr("time"),u=Xr(b),l=Wr(),p=Yr("time"),f=Yr("dfn"),f.textContent="End",h=Wr(),d=Yr("abbr"),g=Xr(t[2]),y=Wr(),m=Yr("time"),_=Xr(w),Jr(i,"value",t[1]),Jr(a,"class","relative"),Jr(e,"class","valid min start"),Jr(e,"datetime",c=t[0][0]),ti(e,"past",tf(t[1],t[8])),ti(e,"future",Zp(t[1],t[8])),Jr(d,"value",t[2]),Jr(m,"class","relative"),Jr(p,"class","valid max end"),Jr(p,"datetime",v=t[0][1]),ti(p,"past",tf(t[2],t[8])),ti(p,"future",Zp(t[2],t[8]))},m(t,c){zr(t,e,c),Gr(e,n),Gr(e,r),Gr(e,i),Gr(i,o),Gr(e,s),Gr(e,a),Gr(a,u),zr(t,l,c),zr(t,p,c),Gr(p,f),Gr(p,h),Gr(p,d),Gr(d,g),Gr(p,y),Gr(p,m),Gr(m,_)},p(t,n){2&n&&Zr(o,t[1]),2&n&&Jr(i,"value",t[1]),258&n&&b!==(b=Jp(t[1],t[8],{addSuffix:!0})+"")&&Zr(u,b),1&n&&c!==(c=t[0][0])&&Jr(e,"datetime",c),258&n&&ti(e,"past",tf(t[1],t[8])),258&n&&ti(e,"future",Zp(t[1],t[8])),4&n&&Zr(g,t[2]),4&n&&Jr(d,"value",t[2]),260&n&&w!==(w=Jp(t[2],t[8],{addSuffix:!0})+"")&&Zr(_,w),1&n&&v!==(v=t[0][1])&&Jr(p,"datetime",v),260&n&&ti(p,"past",tf(t[2],t[8])),260&n&&ti(p,"future",Zp(t[2],t[8]))},d(t){t&&Vr(e),t&&Vr(l),t&&Vr(p)}}}function Ng(t){let e;return{c(){e=Xr("Cancelled")},m(t,n){zr(t,e,n)},p:Dr,d(t){t&&Vr(e)}}}function Og(t){let e,n;function r(t,e){return t[6]?Ng:Cg}let i=r(t),o=i(t);return{c(){e=Yr("time"),o.c(),Jr(e,"class","valid min max interval"),Jr(e,"datetime",n=t[0].join("/")),ti(e,"future",t[5]),ti(e,"past",t[4]),ti(e,"expired",t[4]),ti(e,"pending",t[5]),ti(e,"current",t[3]),ti(e,"cancelled",t[6])},m(t,n){zr(t,e,n),o.m(e,null)},p(t,[s]){i===(i=r(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),1&s&&n!==(n=t[0].join("/"))&&Jr(e,"datetime",n),32&s&&ti(e,"future",t[5]),16&s&&ti(e,"past",t[4]),16&s&&ti(e,"expired",t[4]),32&s&&ti(e,"pending",t[5]),8&s&&ti(e,"current",t[3]),64&s&&ti(e,"cancelled",t[6])},i:Dr,o:Dr,d(t){t&&Vr(e),o.d()}}}function Tg(t,e,n){let r,i=Dr;t.$$.on_destroy.push(()=>i());let o,s,a,u,c,l,p,f,h,d,g,{interval:y=""}=e,{status:m=(d?"cancelled":f?"expired":h?"pending":p?"current":null)}=e;return t.$set=t=>{"interval"in t&&n(10,y=t.interval),"status"in t&&n(9,m=t.status)},t.$$.update=()=>{1024&t.$$.dirty&&n(0,o=y?y.split("/"):[]),1&t.$$.dirty&&n(1,s=o[0]&&new Date(o[0])),1&t.$$.dirty&&n(2,a=o[1]&&new Date(o[1])),6&t.$$.dirty&&n(11,u=a-s),2054&t.$$.dirty&&n(12,c=a<new Date?0:s>new Date?u:a-new Date),2310&t.$$.dirty&&n(12,c=a<(r||new Date)?0:s>(r||new Date)?u:a-(r||new Date)),t.$$.dirty,4096&t.$$.dirty&&(l=Sd(c)),6&t.$$.dirty&&n(3,p=!!s&&!!a&&rf(new Date,{start:s,end:a})),4&t.$$.dirty&&n(4,f=a&&tf(a,new Date)),2&t.$$.dirty&&n(5,h=s&&Zp(s,new Date)),6&t.$$.dirty&&n(6,d=ef(s,a)),4096&t.$$.dirty&&(n(7,g=c>0&&c<=12e4?Uh:Bh),i(),i=Ur(g,t=>n(8,r=t))),4096&t.$$.dirty&&(l=Sd(c)),262&t.$$.dirty&&n(3,p=!!s&&!!a&&rf(r||new Date,{start:s,end:a})),258&t.$$.dirty&&n(5,h=s&&Zp(s,r||new Date)),260&t.$$.dirty&&n(4,f=a&&tf(a,r||new Date)),t.$$.dirty,64&t.$$.dirty&&d&&n(3,p=n(4,f=n(5,h=!1))),120&t.$$.dirty&&n(9,m=d?"cancelled":f?"expired":h?"pending":p?"current":null)},[o,s,a,p,f,h,d,g,r,m,y]}class Lg extends Ti{constructor(t){super(),Oi(this,t,Tg,Og,Br,{interval:10,status:9})}}function Pg(t,e,n){const r=t.slice();return r[6]=e[n],r}function Rg(t){let e,n,r,i,o,s,a,u,c,l,p,f,h=t[1].title.toLowerCase()+"",d=(t[1].name||"Any Resident")+"";function g(e){t[5].call(null,e)}let y={interval:t[3]};void 0!==t[0]&&(y.status=t[0]);const m=new Lg({props:y});si.push(()=>Ei(m,"status",g));let _=!!t[1].vehicle&&Ag(t),v=t[1].spaces,b=[];for(let e=0;e<v.length;e+=1)b[e]=Mg(Pg(t,v,e));let w=!!t[1].tenant&&Dg(t);return{c(){e=Yr("h1"),n=Xr(h),r=Wr(),Ii(m.$$.fragment),o=Wr(),s=Yr("h2"),a=Xr(d),u=Wr(),_&&_.c(),c=Wr();for(let t=0;t<b.length;t+=1)b[t].c();l=Wr(),w&&w.c(),p=Kr()},m(t,i){zr(t,e,i),Gr(e,n),zr(t,r,i),Si(m,t,i),zr(t,o,i),zr(t,s,i),Gr(s,a),zr(t,u,i),_&&_.m(t,i),zr(t,c,i);for(let e=0;e<b.length;e+=1)b[e].m(t,i);zr(t,l,i),w&&w.m(t,i),zr(t,p,i),f=!0},p(t,e){(!f||2&e)&&h!==(h=t[1].title.toLowerCase()+"")&&Zr(n,h);const r={};if(8&e&&(r.interval=t[3]),!i&&1&e&&(i=!0,r.status=t[0],fi(()=>i=!1)),m.$set(r),(!f||2&e)&&d!==(d=(t[1].name||"Any Resident")+"")&&Zr(a,d),t[1].vehicle?_?_.p(t,e):(_=Ag(t),_.c(),_.m(c.parentNode,c)):_&&(_.d(1),_=null),2&e){let n;for(v=t[1].spaces,n=0;n<v.length;n+=1){const r=Pg(t,v,n);b[n]?b[n].p(r,e):(b[n]=Mg(r),b[n].c(),b[n].m(l.parentNode,l))}for(;n<b.length;n+=1)b[n].d(1);b.length=v.length}t[1].tenant?w?w.p(t,e):(w=Dg(t),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null)},i(t){f||(wi(m.$$.fragment,t),f=!0)},o(t){xi(m.$$.fragment,t),f=!1},d(t){t&&Vr(e),t&&Vr(r),Ci(m,t),t&&Vr(o),t&&Vr(s),t&&Vr(u),_&&_.d(t),t&&Vr(c),Hr(b,t),t&&Vr(l),w&&w.d(t),t&&Vr(p)}}}function Ag(t){let e,n,r,i,o=t[1].vehicle.display+"";return{c(){e=Yr("data"),n=Xr(o),Jr(e,"class",r=t[1].vehicle.type+" id "+[t[1].vehicle.format,t[1].vehicle.size].filter(Fg).join(" ")),Jr(e,"value",i=t[1].vehicle.id)},m(t,r){zr(t,e,r),Gr(e,n)},p(t,s){2&s&&o!==(o=t[1].vehicle.display+"")&&Zr(n,o),2&s&&r!==(r=t[1].vehicle.type+" id "+[t[1].vehicle.format,t[1].vehicle.size].filter(Fg).join(" "))&&Jr(e,"class",r),2&s&&i!==(i=t[1].vehicle.id)&&Jr(e,"value",i)},d(t){t&&Vr(e)}}}function Mg(t){let e,n,r,i,o=t[6].display+"";return{c(){e=Yr("data"),n=Xr(o),Jr(e,"class",r=t[6].type+" id "+[t[6].format,t[6].size].filter(jg).join(" ")),Jr(e,"value",i=t[6].id)},m(t,r){zr(t,e,r),Gr(e,n)},p(t,s){2&s&&o!==(o=t[6].display+"")&&Zr(n,o),2&s&&r!==(r=t[6].type+" id "+[t[6].format,t[6].size].filter(jg).join(" "))&&Jr(e,"class",r),2&s&&i!==(i=t[6].id)&&Jr(e,"value",i)},d(t){t&&Vr(e)}}}function Dg(t){let e,n,r,i,o=t[1].tenant.display+"";return{c(){e=Yr("data"),n=Xr(o),Jr(e,"class",r=t[1].tenant.type+" id "+[t[1].tenant.format,t[1].tenant.size].filter($g).join(" ")),Jr(e,"value",i=t[1].tenant.id)},m(t,r){zr(t,e,r),Gr(e,n)},p(t,s){2&s&&o!==(o=t[1].tenant.display+"")&&Zr(n,o),2&s&&r!==(r=t[1].tenant.type+" id "+[t[1].tenant.format,t[1].tenant.size].filter($g).join(" "))&&Jr(e,"class",r),2&s&&i!==(i=t[1].tenant.id)&&Jr(e,"value",i)},d(t){t&&Vr(e)}}}function kg(t){let e,n,r,i=t[1]&&Rg(t);return{c(){e=Yr("data"),i&&i.c(),Jr(e,"class",n=Me(t[1],"type","permit")+" "+t[0]),ti(e,"selected",t[2])},m(t,n){zr(t,e,n),i&&i.m(e,null),r=!0},p(t,[o]){t[1]?i?(i.p(t,o),wi(i,1)):(i=Rg(t),i.c(),wi(i,1),i.m(e,null)):i&&(vi(),xi(i,1,1,()=>{i=null}),bi()),(!r||3&o&&n!==(n=Me(t[1],"type","permit")+" "+t[0]))&&Jr(e,"class",n),7&o&&ti(e,"selected",t[2])},i(t){r||(wi(i),r=!0)},o(t){xi(i),r=!1},d(t){t&&Vr(e),i&&i.d()}}}const Fg=t=>!!t,jg=t=>!!t,$g=t=>!!t;function Bg(t,e,n){let r;qr(t,Xh,t=>n(4,r=t));let i,o,{permit:s=null}=e,{status:a=""}=e;return t.$set=t=>{"permit"in t&&n(1,s=t.permit),"status"in t&&n(0,a=t.status)},t.$$.update=()=>{18&t.$$.dirty&&n(2,i=!!s&&s.id===r),2&t.$$.dirty&&n(3,o=s&&s.valid.interval)},[a,s,i,o,r,function(t){a=t,n(0,a)}]}class Ug extends Ti{constructor(t){super(),Oi(this,t,Bg,kg,Br,{permit:1,status:0})}}function qg(t,e,n){const r=t.slice();return r[5]=e[n],r}function Gg(t,e,n){const r=t.slice();return r[5]=e[n],r}function zg(t){let e,n,r,i,o,s=t[0].display+"";return{c(){e=Yr("label"),n=Yr("data"),r=Xr(s),Jr(n,"class",i=t[0].type+" id "+[t[0].format,t[0].size].filter(Xg).join(" ")),Jr(n,"value",o=t[0].id),Jr(e,"for",t[2])},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r)},p(t,e){1&e&&s!==(s=t[0].display+"")&&Zr(r,s),1&e&&i!==(i=t[0].type+" id "+[t[0].format,t[0].size].filter(Xg).join(" "))&&Jr(n,"class",i),1&e&&o!==(o=t[0].id)&&Jr(n,"value",o)},d(t){t&&Vr(e)}}}function Vg(t){let e,n,r,i=t[5].display+"";return{c(){e=Yr("option"),n=Xr(i),e.__value=r=t[5].display,e.value=e.__value},m(t,r){zr(t,e,r),Gr(e,n)},p(t,o){2&o&&i!==(i=t[5].display+"")&&Zr(n,i),2&o&&r!==(r=t[5].display)&&(e.__value=r),e.value=e.__value},d(t){t&&Vr(e)}}}function Hg(t){let e,n,r,i=t[5].display+"";return{c(){e=Yr("option"),n=Xr(i),e.__value=r=t[5].id,e.value=e.__value},m(t,r){zr(t,e,r),Gr(e,n)},p(t,o){2&o&&i!==(i=t[5].display+"")&&Zr(n,i),2&o&&r!==(r=t[5].id)&&(e.__value=r),e.value=e.__value},d(t){t&&Vr(e)}}}function Yg(t){let e,n,r,i,o,s,a,u,c,l,p=t[0]&&zg(t),f=t[1],h=[];for(let e=0;e<f.length;e+=1)h[e]=Vg(Gg(t,f,e));let d=t[1],g=[];for(let e=0;e<d.length;e+=1)g[e]=Hg(qg(t,d,e));return{c(){p&&p.c(),e=Wr(),n=Yr("input"),i=Wr(),o=Yr("datalist");for(let t=0;t<h.length;t+=1)h[t].c();a=Wr(),u=Yr("select"),c=Yr("option"),c.textContent="----";for(let t=0;t<g.length;t+=1)g[t].c();Jr(n,"id",t[2]),Jr(n,"type","text"),Jr(n,"autocomplete","off"),Jr(n,"autocorrect","off"),Jr(n,"autocapitalize","characters"),Jr(n,"list",r=t[2]+"-units"),Jr(n,"spellcheck","false"),n.value="",Jr(n,"maxlength","30"),Jr(o,"id",s=t[2]+"-units"),c.__value="",c.value=c.__value,Jr(u,"tabindex","-1")},m(r,s,f){p&&p.m(r,s),zr(r,e,s),zr(r,n,s),zr(r,i,s),zr(r,o,s);for(let t=0;t<h.length;t+=1)h[t].m(o,null);zr(r,a,s),zr(r,u,s),Gr(u,c);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f&&jr(l),l=[Qr(n,"change",t[4]),Qr(n,"input",t[4]),Qr(n,"focus",t[3]),Qr(u,"change",t[4])]},p(t,[n]){if(t[0]?p?p.p(t,n):(p=zg(t),p.c(),p.m(e.parentNode,e)):p&&(p.d(1),p=null),2&n){let e;for(f=t[1],e=0;e<f.length;e+=1){const r=Gg(t,f,e);h[e]?h[e].p(r,n):(h[e]=Vg(r),h[e].c(),h[e].m(o,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=f.length}if(2&n){let e;for(d=t[1],e=0;e<d.length;e+=1){const r=qg(t,d,e);g[e]?g[e].p(r,n):(g[e]=Hg(r),g[e].c(),g[e].m(u,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=d.length}},i:Dr,o:Dr,d(t){p&&p.d(t),t&&Vr(e),t&&Vr(n),t&&Vr(i),t&&Vr(o),Hr(h,t),t&&Vr(a),t&&Vr(u),Hr(g,t),jr(l)}}}const Xg=t=>!!t;function Wg(t,e,n){let{units:r=[]}=e,{selected:i=null}=e;const o=function(t){var e=++Ar;return Le(t)+e}("unit-select-");return t.$set=t=>{"units"in t&&n(1,r=t.units),"selected"in t&&n(0,i=t.selected)},[i,r,o,function(t){n(0,i=null),t.target.value=""},function(t){n(0,i=r.find(e=>e.id===t.target.value||e.display==t.target.value)),i&&t.target.matches("select")&&(t.target.value=""),i&&t.target.blur()}]}class Kg extends Ti{constructor(t){super(),Oi(this,t,Wg,Yg,Br,{units:1,selected:0,id:2})}get id(){return this.$$.ctx[2]}}function Qg(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g=!!Me(t[0],"tenant.request",!1),y=!!Me(t[0],"name.request",!1),m=!!Me(t[0],"tel.request",!1)||!!Me(t[0],"email.request",!1),_=!!Me(t[0],"agreement.request"),v=g&&Jg(t),b=y&&ey(t),w=m&&ny(t),x=_&&oy(t);return{c(){e=Yr("input"),r=Wr(),i=Yr("input"),s=Wr(),a=Yr("input"),c=Wr(),v&&v.c(),l=Wr(),b&&b.c(),p=Wr(),w&&w.c(),f=Wr(),x&&x.c(),h=Kr(),Jr(e,"type","hidden"),Jr(e,"name","location"),e.value=n=t[0].property.id,Jr(i,"type","hidden"),Jr(i,"name","policy"),i.value=o=t[0].subject,Jr(a,"type","hidden"),Jr(a,"name","valid"),a.value=u=t[5].valid},m(t,n){zr(t,e,n),zr(t,r,n),zr(t,i,n),zr(t,s,n),zr(t,a,n),zr(t,c,n),v&&v.m(t,n),zr(t,l,n),b&&b.m(t,n),zr(t,p,n),w&&w.m(t,n),zr(t,f,n),x&&x.m(t,n),zr(t,h,n),d=!0},p(t,r){(!d||1&r&&n!==(n=t[0].property.id))&&(e.value=n),(!d||1&r&&o!==(o=t[0].subject))&&(i.value=o),(!d||32&r&&u!==(u=t[5].valid))&&(a.value=u),1&r&&(g=!!Me(t[0],"tenant.request",!1)),g?v?(v.p(t,r),wi(v,1)):(v=Jg(t),v.c(),wi(v,1),v.m(l.parentNode,l)):v&&(vi(),xi(v,1,1,()=>{v=null}),bi()),1&r&&(y=!!Me(t[0],"name.request",!1)),y?b?b.p(t,r):(b=ey(t),b.c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null),1&r&&(m=!!Me(t[0],"tel.request",!1)||!!Me(t[0],"email.request",!1)),m?w?w.p(t,r):(w=ny(t),w.c(),w.m(f.parentNode,f)):w&&(w.d(1),w=null),1&r&&(_=!!Me(t[0],"agreement.request")),_?x?x.p(t,r):(x=oy(t),x.c(),x.m(h.parentNode,h)):x&&(x.d(1),x=null)},i(t){d||(wi(v),d=!0)},o(t){xi(v),d=!1},d(t){t&&Vr(e),t&&Vr(r),t&&Vr(i),t&&Vr(s),t&&Vr(a),t&&Vr(c),v&&v.d(t),t&&Vr(l),b&&b.d(t),t&&Vr(p),w&&w.d(t),t&&Vr(f),x&&x.d(t),t&&Vr(h)}}}function Jg(t){let e,n,r,i,o,s,a,u,c,l,p,f=Me(t[0],"tenant.title","")+"",h=!!Me(t[0],"authentication",!1),d=t[9]&&Zg(t);function g(e){t[15].call(null,e)}function y(e){t[16].call(null,e)}let m={units:t[2]};void 0!==t[8]&&(m.id=t[8]),void 0!==t[9]&&(m.selected=t[9]);const _=new Kg({props:m});si.push(()=>Ei(_,"id",g)),si.push(()=>Ei(_,"selected",y));let v=h&&ty();return{c(){e=Yr("fieldset"),n=Yr("ul"),r=Yr("li"),i=Yr("label"),o=Xr(f),s=Wr(),d&&d.c(),a=Wr(),Ii(_.$$.fragment),l=Wr(),v&&v.c(),Jr(i,"for",t[8]),Jr(e,"class","tenant")},m(t,u){zr(t,e,u),Gr(e,n),Gr(n,r),Gr(r,i),Gr(i,o),Gr(r,s),d&&d.m(r,null),Gr(r,a),Si(_,r,null),Gr(n,l),v&&v.m(n,null),p=!0},p(t,e){(!p||1&e)&&f!==(f=Me(t[0],"tenant.title","")+"")&&Zr(o,f),(!p||256&e)&&Jr(i,"for",t[8]),t[9]?d?d.p(t,e):(d=Zg(t),d.c(),d.m(r,a)):d&&(d.d(1),d=null);const s={};4&e&&(s.units=t[2]),!u&&256&e&&(u=!0,s.id=t[8],fi(()=>u=!1)),!c&&512&e&&(c=!0,s.selected=t[9],fi(()=>c=!1)),_.$set(s),1&e&&(h=!!Me(t[0],"authentication",!1)),h?v||(v=ty(),v.c(),v.m(n,null)):v&&(v.d(1),v=null)},i(t){p||(wi(_.$$.fragment,t),p=!0)},o(t){xi(_.$$.fragment,t),p=!1},d(t){t&&Vr(e),d&&d.d(),Ci(_),v&&v.d()}}}function Zg(t){let e,n;return{c(){e=Yr("input"),Jr(e,"type","hidden"),Jr(e,"name","unit"),e.value=n=t[9].id},m(t,n){zr(t,e,n)},p(t,r){512&r&&n!==(n=t[9].id)&&(e.value=n)},d(t){t&&Vr(e)}}}function ty(t){let e;return{c(){e=Yr("li"),e.innerHTML='<label for="permit-auth">Passcode</label><input id="permit-auth" type="text" pattern="[0-9]*" inputmode="numeric" maxlength="6" autocorrect="off" autocomplete="off" spellcheck="false" name="token" required="">'},m(t,n){zr(t,e,n)},d(t){t&&Vr(e)}}}function ey(t){let e,n,r,i,o,s,a,u;return{c(){e=Yr("fieldset"),n=Yr("p"),n.textContent="Each person must have a passwho is this pass for?",r=Wr(),i=Yr("ul"),o=Yr("li"),s=Yr("label"),s.textContent="Name",a=Yr("input"),Jr(s,"for","permit-name"),Jr(a,"id","permit-name"),Jr(a,"type","text"),Jr(a,"name","name"),a.value="",Jr(a,"spellcheck","false"),a.required=u=!!Me(t[0],"name.required",!1),Jr(a,"autocomplete","name"),Jr(e,"class","people")},m(t,u){zr(t,e,u),Gr(e,n),Gr(e,r),Gr(e,i),Gr(i,o),Gr(o,s),Gr(o,a)},p(t,e){1&e&&u!==(u=!!Me(t[0],"name.required",!1))&&(a.required=u)},d(t){t&&Vr(e)}}}function ny(t){let e,n,r,i=!!Me(t[0],"tel.request",!1),o=!!Me(t[0],"email.request",!1),s=i&&ry(t),a=o&&iy(t);return{c(){e=Yr("fieldset"),n=Yr("ul"),s&&s.c(),r=Wr(),a&&a.c(),Jr(e,"class","contact")},m(t,i){zr(t,e,i),Gr(e,n),s&&s.m(n,null),Gr(n,r),a&&a.m(n,null)},p(t,e){1&e&&(i=!!Me(t[0],"tel.request",!1)),i?s?s.p(t,e):(s=ry(t),s.c(),s.m(n,r)):s&&(s.d(1),s=null),1&e&&(o=!!Me(t[0],"email.request",!1)),o?a?a.p(t,e):(a=iy(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},d(t){t&&Vr(e),s&&s.d(),a&&a.d()}}}function ry(t){let e,n,r,i,o;return{c(){e=Yr("li"),n=Yr("label"),n.textContent="Phone",r=Yr("input"),Jr(n,"for","permit-tel"),Jr(r,"id","permit-tel"),Jr(r,"type","tel"),Jr(r,"name","tel"),Jr(r,"placeholder",i=Me(t[0],"tel.required",!1)?"":"optional"),r.required=o=!!Me(t[0],"tel.required",!1),r.value="",Jr(r,"spellcheck","false"),Jr(r,"autocomplete","tel")},m(i,o){zr(i,e,o),Gr(e,n),Gr(e,r),t[17](r)},p(t,e){1&e&&i!==(i=Me(t[0],"tel.required",!1)?"":"optional")&&Jr(r,"placeholder",i),1&e&&o!==(o=!!Me(t[0],"tel.required",!1))&&(r.required=o)},d(n){n&&Vr(e),t[17](null)}}}function iy(t){let e,n,r,i,o;return{c(){e=Yr("li"),n=Yr("label"),n.textContent="Email",r=Yr("input"),Jr(n,"for","permit-email"),Jr(r,"id","permit-email"),Jr(r,"type","email"),Jr(r,"name","email"),Jr(r,"placeholder",i=Me(t[0],"email.required",!1)?"":"optional"),r.required=o=!!Me(t[0],"email.required",!1),r.value="",Jr(r,"spellcheck","false"),Jr(r,"autocomplete","email")},m(t,i){zr(t,e,i),Gr(e,n),Gr(e,r)},p(t,e){1&e&&i!==(i=Me(t[0],"email.required",!1)?"":"optional")&&Jr(r,"placeholder",i),1&e&&o!==(o=!!Me(t[0],"email.required",!1))&&(r.required=o)},d(t){t&&Vr(e)}}}function oy(t){let e,n,r,i,o,s=t[0].agreement.text+"";return{c(){e=Yr("p"),n=Yr("input"),i=Yr("label"),o=Xr(s),Jr(n,"id","permit-agreement"),Jr(n,"type","checkbox"),Jr(n,"name",r="agreement-"+t[0].version),n.value="true",n.required=!0,Jr(i,"for","permit-agreement")},m(t,r){zr(t,e,r),Gr(e,n),Gr(e,i),Gr(i,o)},p(t,e){1&e&&r!==(r="agreement-"+t[0].version)&&Jr(n,"name",r),1&e&&s!==(s=t[0].agreement.text+"")&&Zr(o,s)},d(t){t&&Vr(e)}}}function sy(t){let e,n,r,i,o,s,a,u,c,l,p,f=!!t[0]&&Qg(t);const h=new Ud({props:{value:t[1]}});return{c(){e=Yr("form"),n=Yr("header"),n.innerHTML="<h1>Complete Pass Details</h1>",r=Wr(),f&&f.c(),i=Wr(),o=Yr("footer"),Ii(h.$$.fragment),s=Wr(),a=Yr("button"),u=Xr("Get Pass"),Jr(a,"type","submit"),a.disabled=c=!t[3],Jr(e,"class","permit"),e.noValidate="novalidate",ti(e,"submitting",t[4])},m(c,d,g){zr(c,e,d),Gr(e,n),Gr(e,r),f&&f.m(e,null),Gr(e,i),Gr(e,o),Si(h,o,null),Gr(o,s),Gr(o,a),Gr(a,u),t[18](e),l=!0,g&&jr(p),p=[Qr(e,"submit",t[10]),Qr(e,"input",t[11]),Qr(e,"change",t[11])]},p(t,[n]){t[0]?f?(f.p(t,n),wi(f,1)):(f=Qg(t),f.c(),wi(f,1),f.m(e,i)):f&&(vi(),xi(f,1,1,()=>{f=null}),bi());const r={};2&n&&(r.value=t[1]),h.$set(r),(!l||8&n&&c!==(c=!t[3]))&&(a.disabled=c),16&n&&ti(e,"submitting",t[4])},i(t){l||(wi(f),wi(h.$$.fragment,t),l=!0)},o(t){xi(f),xi(h.$$.fragment,t),l=!1},d(n){n&&Vr(e),f&&f.d(),Ci(h),t[18](null),jr(p)}}}function ay(t,e,n){let r;qr(t,td,t=>n(12,r=t));let{policy:i=null}=e,{valid:o=null}=e,{units:s=[]}=e;ii(()=>{});let a,u,c=!1,l=!1,p={},f=null,h=null,d=s&&Me(r,"subject")&&gr(s,{id:Me(r,"subject")});function g(t,e){return!!t&&(!(Me(t,"tenant.required",!1)&&!e.tenant&&!e.unit)&&(!(Me(t,"authentication",!1)&&!e.token)&&(!(Me(t,"name.required",!1)&&!e.name)&&(!(Me(t,"email.required",!1)&&!e.email)&&!(Me(t,"tel.required",!1)&&!e.tel)))))}return t.$set=t=>{"policy"in t&&n(0,i=t.policy),"valid"in t&&n(1,o=t.valid),"units"in t&&n(2,s=t.units)},t.$$.update=()=>{2&t.$$.dirty&&(u=_h(o,mh)),546&t.$$.dirty&&n(5,p=Er(p,{unit:d?d.id:null,valid:o||""})),97&t.$$.dirty&&n(3,c=!!f&&!!f.checkValidity()&&g(i,p))},[i,o,s,c,l,p,f,h,a,d,async function(t){if(t.preventDefault(),!c)return;if(l)return;n(4,l=!0);const e=t.target;var r=await Sh(Me(e,"location.value"),Me(e,"unit.value"),Me(e,"token.value"),Me(e,"policy.value"));if(r.message)return n(4,l=!1),void alert(r.message);var i=new FormData(t.target);i.append("Authorization",`${r.type} ${r.token}`),i.delete&&i.delete("token");var o=await Oh(i);n(4,l=!1);var s=Me(o,"permits.item");if(s)return T(`/p/${s}`);alert(o.message||"Something went wrong!")},function(t){t.target.name&&n(5,p=Er(p,{[t.target.name]:t.target.value}))},r,u,g,function(t){a=t,n(8,a)},function(t){d=t,n(9,d)},function(t){si[t?"unshift":"push"](()=>{n(7,h=t)})},function(t){si[t?"unshift":"push"](()=>{n(6,f=t)})}]}class uy extends Ti{constructor(t){super(),Oi(this,t,ay,sy,Br,{policy:0,valid:1,units:2})}}function cy(t,e,n){const r=t.slice();return r[1]=e[n],r}function ly(t){let e,n,r,i,o,s,a,u,c=Me(t[0],"rules.description","")+"",l=Me(t[0],"rules.custom"),p=l&&py(t),f=mr(Me(t[0],"documents.items",[])),h=[];for(let e=0;e<f.length;e+=1)h[e]=hy(cy(t,f,e));return{c(){e=Yr("ul"),n=Yr("li"),r=Yr("p"),i=Xr(c),o=Wr(),p&&p.c(),s=Wr(),a=Yr("ul");for(let t=0;t<h.length;t+=1)h[t].c();Jr(e,"class","rules"),Jr(a,"class","documents"),Jr(a,"data-count",u=Me(t[0],"documents.count",""))},m(t,u){zr(t,e,u),Gr(e,n),Gr(n,r),Gr(r,i),Gr(e,o),p&&p.m(e,null),zr(t,s,u),zr(t,a,u);for(let t=0;t<h.length;t+=1)h[t].m(a,null)},p(t,n){if(1&n&&c!==(c=Me(t[0],"rules.description","")+"")&&Zr(i,c),1&n&&(l=Me(t[0],"rules.custom")),l?p?p.p(t,n):(p=py(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null),1&n){let e;for(f=mr(Me(t[0],"documents.items",[])),e=0;e<f.length;e+=1){const r=cy(t,f,e);h[e]?h[e].p(r,n):(h[e]=hy(r),h[e].c(),h[e].m(a,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=f.length}1&n&&u!==(u=Me(t[0],"documents.count",""))&&Jr(a,"data-count",u)},d(t){t&&Vr(e),p&&p.d(),t&&Vr(s),t&&Vr(a),Hr(h,t)}}}function py(t){let e,n,r=Me(t[0],"rules.custom","").replace(/\n|\r\n|\r/g,"<br>")+"";return{c(){e=Yr("li"),n=Yr("p")},m(t,i){zr(t,e,i),Gr(e,n),n.innerHTML=r},p(t,e){1&e&&r!==(r=Me(t[0],"rules.custom","").replace(/\n|\r\n|\r/g,"<br>")+"")&&(n.innerHTML=r)},d(t){t&&Vr(e)}}}function fy(t){let e,n,r,i=t[1].title+"";return{c(){e=Yr("figcaption"),n=Yr("h1"),r=Xr(i)},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r)},p(t,e){1&e&&i!==(i=t[1].title+"")&&Zr(r,i)},d(t){t&&Vr(e)}}}function hy(t){let e,n,r,i,o,s,a,u,c,l,p=t[1].title&&fy(t);return{c(){e=Yr("li"),n=Yr("a"),r=Yr("data"),i=Yr("figure"),o=Yr("img"),a=Wr(),p&&p.c(),l=Wr(),Jr(o,"alt","preview"),o.src!==(s=t[1].url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=200&dpr=2")&&Jr(o,"src",s),Jr(r,"class","document file"),Jr(r,"value",u=t[1].id),Jr(n,"href",c=t[1].url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")),Jr(n,"target","_blank")},m(t,s){zr(t,e,s),Gr(e,n),Gr(n,r),Gr(r,i),Gr(i,o),Gr(i,a),p&&p.m(i,null),Gr(e,l)},p(t,e){1&e&&o.src!==(s=t[1].url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=200&dpr=2")&&Jr(o,"src",s),t[1].title?p?p.p(t,e):(p=fy(t),p.c(),p.m(i,null)):p&&(p.d(1),p=null),1&e&&u!==(u=t[1].id)&&Jr(r,"value",u),1&e&&c!==(c=t[1].url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/"))&&Jr(n,"href",c)},d(t){t&&Vr(e),p&&p.d()}}}function dy(t){let e,n=t[0]&&ly(t);return{c(){n&&n.c(),e=Kr()},m(t,r){n&&n.m(t,r),zr(t,e,r)},p(t,[r]){t[0]?n?n.p(t,r):(n=ly(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Dr,o:Dr,d(t){n&&n.d(t),t&&Vr(e)}}}function gy(t,e,n){let{policy:r=null}=e;return t.$set=t=>{"policy"in t&&n(0,r=t.policy)},[r]}class yy extends Ti{constructor(t){super(),Oi(this,t,gy,dy,Br,{policy:0})}}function my(t,e,n){const r=t.slice();return r[10]=e[n],r}function _y(t){let e,n,r=Me(t[0],"alert.text"),i=Me(t[0],"info.text"),o=r&&by(t),s=i&&wy(t);return{c(){o&&o.c(),e=Wr(),s&&s.c(),n=Kr()},m(t,r){o&&o.m(t,r),zr(t,e,r),s&&s.m(t,r),zr(t,n,r)},p(t,a){1&a&&(r=Me(t[0],"alert.text")),r?o?o.p(t,a):(o=by(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),1&a&&(i=Me(t[0],"info.text")),i?s?s.p(t,a):(s=wy(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(t){o&&o.d(t),t&&Vr(e),s&&s.d(t),t&&Vr(n)}}}function vy(t){let e,n,r,i=Me(t[0],"disabled.reason","")+"";return{c(){e=Yr("aside"),n=Yr("p"),r=Xr(i),Jr(e,"class","alert info closed")},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r)},p(t,e){1&e&&i!==(i=Me(t[0],"disabled.reason","")+"")&&Zr(r,i)},d(t){t&&Vr(e)}}}function by(t){let e,n,r,i=Me(t[0],"alert.text")+"";return{c(){e=Yr("aside"),n=Yr("p"),r=Xr(i),Jr(e,"class","alert info")},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r)},p(t,e){1&e&&i!==(i=Me(t[0],"alert.text")+"")&&Zr(r,i)},d(t){t&&Vr(e)}}}function wy(t){let e,n,r,i=Me(t[0],"info.text")+"";return{c(){e=Yr("aside"),n=Yr("p"),r=Xr(i),Jr(e,"class","info")},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r)},p(t,e){1&e&&i!==(i=Me(t[0],"info.text")+"")&&Zr(r,i)},d(t){t&&Vr(e)}}}function xy(t){let e;const n=new yy({props:{policy:t[0]}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.policy=t[0]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Ey(t){let e,n,r,i,o,s,a,u;function c(t,e){return t[4]?Sy:Iy}let l=c(t),p=l(t);const f=[Ty,Oy,Ny,Cy],h=[];function d(t,e){return t[3]&&"policy"!==t[3]?"schedule"===t[3]?1:"rules"===t[3]?2:"newpermit"===t[3]?3:-1:0}~(i=d(t))&&(o=h[i]=f[i](t));let g=!t[4]&&My(t);return{c(){e=Yr("nav"),n=Yr("ul"),p.c(),r=Wr(),o&&o.c(),s=Wr(),g&&g.c(),a=Kr()},m(t,o){zr(t,e,o),Gr(e,n),p.m(n,null),zr(t,r,o),~i&&h[i].m(t,o),zr(t,s,o),g&&g.m(t,o),zr(t,a,o),u=!0},p(t,e){l===(l=c(t))&&p?p.p(t,e):(p.d(1),p=l(t),p&&(p.c(),p.m(n,null)));let r=i;i=d(t),i===r?~i&&h[i].p(t,e):(o&&(vi(),xi(h[r],1,1,()=>{h[r]=null}),bi()),~i?(o=h[i],o||(o=h[i]=f[i](t),o.c()),wi(o,1),o.m(s.parentNode,s)):o=null),t[4]?g&&(vi(),xi(g,1,1,()=>{g=null}),bi()):g?(g.p(t,e),wi(g,1)):(g=My(t),g.c(),wi(g,1),g.m(a.parentNode,a))},i(t){u||(wi(o),wi(g),u=!0)},o(t){xi(o),xi(g),u=!1},d(t){t&&Vr(e),p.d(),t&&Vr(r),~i&&h[i].d(t),t&&Vr(s),g&&g.d(t),t&&Vr(a)}}}function Iy(t){let e,n,r,i,o,s,a,u,c;return{c(){e=Yr("li"),n=Yr("a"),r=Xr("Availability"),o=Wr(),s=Yr("li"),a=Yr("a"),u=Xr("Rules"),Jr(n,"href",i=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}?selected=${t[1]||""}`),ti(n,"current",!t[3]||"policy"===t[3]),Jr(a,"href",c=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/rules?selected=${t[1]||""}`),ti(a,"current","rules"===t[3])},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r),zr(t,o,i),zr(t,s,i),Gr(s,a),Gr(a,u)},p(t,e){3&e&&i!==(i=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}?selected=${t[1]||""}`)&&Jr(n,"href",i),8&e&&ti(n,"current",!t[3]||"policy"===t[3]),3&e&&c!==(c=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/rules?selected=${t[1]||""}`)&&Jr(a,"href",c),8&e&&ti(a,"current","rules"===t[3])},d(t){t&&Vr(e),t&&Vr(o),t&&Vr(s)}}}function Sy(t){let e,n,r,i,o,s,a,u,c;return{c(){e=Yr("li"),n=Yr("a"),r=Xr("Registration"),o=Wr(),s=Yr("li"),a=Yr("a"),u=Xr("Rules"),Jr(n,"href",i=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/permits/new?valid=${t[4]||""}`),ti(n,"current","newpermit"===t[3]),Jr(a,"href",c=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/rules?valid=${t[4]||""}`),ti(a,"current","rules"===t[3])},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r),zr(t,o,i),zr(t,s,i),Gr(s,a),Gr(a,u)},p(t,e){17&e&&i!==(i=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/permits/new?valid=${t[4]||""}`)&&Jr(n,"href",i),8&e&&ti(n,"current","newpermit"===t[3]),17&e&&c!==(c=`/properties/${Me(t[0],"scope")}/amenities/${Me(t[0],"subject")}/rules?valid=${t[4]||""}`)&&Jr(a,"href",c),8&e&&ti(a,"current","rules"===t[3])},d(t){t&&Vr(e),t&&Vr(o),t&&Vr(s)}}}function Cy(t){let e,n;const r=new uy({props:{policy:t[0],valid:t[4],units:t[8]||[]}});return{c(){e=Yr("section"),Ii(r.$$.fragment)},m(t,i){zr(t,e,i),Si(r,e,null),n=!0},p(t,e){const n={};1&e&&(n.policy=t[0]),16&e&&(n.valid=t[4]),256&e&&(n.units=t[8]||[]),r.$set(n)},i(t){n||(wi(r.$$.fragment,t),n=!0)},o(t){xi(r.$$.fragment,t),n=!1},d(t){t&&Vr(e),Ci(r)}}}function Ny(t){let e,n,r;const i=new yy({props:{policy:t[0]}});return{c(){e=Yr("section"),Ii(i.$$.fragment),Jr(e,"id",n="rules-"+Me(t[0],"id")),ti(e,"current","rules"===t[3])},m(t,n){zr(t,e,n),Si(i,e,null),r=!0},p(t,o){const s={};1&o&&(s.policy=t[0]),i.$set(s),(!r||1&o&&n!==(n="rules-"+Me(t[0],"id")))&&Jr(e,"id",n),8&o&&ti(e,"current","rules"===t[3])},i(t){r||(wi(i.$$.fragment,t),r=!0)},o(t){xi(i.$$.fragment,t),r=!1},d(t){t&&Vr(e),Ci(i)}}}function Oy(t){let e,n,r,i=t[0]&&Ly(t);return{c(){e=Yr("section"),i&&i.c(),Jr(e,"id",n="schedule-"+Me(t[0],"id")),ti(e,"current","schedule"===t[3])},m(t,n){zr(t,e,n),i&&i.m(e,null),r=!0},p(t,o){t[0]?i?(i.p(t,o),wi(i,1)):(i=Ly(t),i.c(),wi(i,1),i.m(e,null)):i&&(vi(),xi(i,1,1,()=>{i=null}),bi()),(!r||1&o&&n!==(n="schedule-"+Me(t[0],"id")))&&Jr(e,"id",n),8&o&&ti(e,"current","schedule"===t[3])},i(t){r||(wi(i),r=!0)},o(t){xi(i),r=!1},d(t){t&&Vr(e),i&&i.d()}}}function Ty(t){let e,n,r,i,o=t[2]&&Py(t),s=t[0]&&Ay(t);return{c(){e=Yr("section"),o&&o.c(),n=Wr(),s&&s.c(),Jr(e,"id",r="book-"+Me(t[0],"id")),ti(e,"current",!t[3])},m(t,r){zr(t,e,r),o&&o.m(e,null),Gr(e,n),s&&s.m(e,null),i=!0},p(t,a){t[2]?o?(o.p(t,a),wi(o,1)):(o=Py(t),o.c(),wi(o,1),o.m(e,n)):o&&(vi(),xi(o,1,1,()=>{o=null}),bi()),t[0]?s?(s.p(t,a),wi(s,1)):(s=Ay(t),s.c(),wi(s,1),s.m(e,null)):s&&(vi(),xi(s,1,1,()=>{s=null}),bi()),(!i||1&a&&r!==(r="book-"+Me(t[0],"id")))&&Jr(e,"id",r),8&a&&ti(e,"current",!t[3])},i(t){i||(wi(o),wi(s),i=!0)},o(t){xi(o),xi(s),i=!1},d(t){t&&Vr(e),o&&o.d(),s&&s.d()}}}function Ly(t){let e;const n=new pg({props:{selectable:!1,policy:t[0],capacity:!0}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.policy=t[0]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Py(t){let e,n,r=t[2],i=[];for(let e=0;e<r.length;e+=1)i[e]=Ry(my(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){e=Yr("ul");for(let t=0;t<i.length;t+=1)i[t].c();Jr(e,"class","permits")},m(t,r){zr(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(4&n){let s;for(r=t[2],s=0;s<r.length;s+=1){const o=my(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=Ry(o),i[s].c(),wi(i[s],1),i[s].m(e,null))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){t&&Vr(e),Hr(i,t)}}}function Ry(t){let e,n,r,i,o;const s=new Ug({props:{permit:t[10]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r=t[10]&&t[10].id?`/p/${t[10].id}`:null)},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};4&e&&(i.permit=t[10]),s.$set(i),(!o||4&e&&r!==(r=t[10]&&t[10].id?`/p/${t[10].id}`:null))&&Jr(n,"href",r)},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function Ay(t){let e;const n=new pg({props:{selected:t[1],selectable:!0,policy:t[0],available:!0}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};2&e&&(r.selected=t[1]),1&e&&(r.policy=t[0]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function My(t){let e,n,r,i,o,s;const a=new Ud({props:{value:t[1]}});return{c(){e=Yr("footer"),Ii(a.$$.fragment),n=Wr(),r=Yr("a"),i=Xr("Continue"),Jr(r,"href",o=t[1]?`/properties/${t[0].scope}/amenities/${t[0].subject}/permits/new?valid=${t[1]}`:null)},m(t,o){zr(t,e,o),Si(a,e,null),Gr(e,n),Gr(e,r),Gr(r,i),s=!0},p(t,e){const n={};2&e&&(n.value=t[1]),a.$set(n),(!s||3&e&&o!==(o=t[1]?`/properties/${t[0].scope}/amenities/${t[0].subject}/permits/new?valid=${t[1]}`:null))&&Jr(r,"href",o)},i(t){s||(wi(a.$$.fragment,t),s=!0)},o(t){xi(a.$$.fragment,t),s=!1},d(t){t&&Vr(e),Ci(a)}}}function Dy(t){let e,n,r,i,o,s,a,u,c,l;const p=new Sg({props:{property:Me(t[0],"property")}}),f=new mg({props:{policy:t[0]}});function h(t,e){return t[7]?vy:_y}let d=h(t),g=d(t);const y=[Ey,xy],m=[];function _(t,e){return t[6]&&!t[7]?0:t[7]?-1:1}return~(u=_(t))&&(c=m[u]=y[u](t)),{c(){e=Yr("article"),n=Yr("header"),r=Yr("a"),Ii(p.$$.fragment),o=Wr(),Ii(f.$$.fragment),s=Wr(),g.c(),a=Wr(),c&&c.c(),Jr(r,"href",i=wr(t[0],"property.id")?`/properties/${t[0].property.id}`:null),Jr(e,"class","policy")},m(i,c){zr(i,e,c),Gr(e,n),Gr(n,r),Si(p,r,null),Gr(n,o),Si(f,n,null),Gr(e,s),g.m(e,null),Gr(e,a),~u&&m[u].m(e,null),t[9](e),l=!0},p(t,[n]){const o={};1&n&&(o.property=Me(t[0],"property")),p.$set(o),(!l||1&n&&i!==(i=wr(t[0],"property.id")?`/properties/${t[0].property.id}`:null))&&Jr(r,"href",i);const s={};1&n&&(s.policy=t[0]),f.$set(s),d===(d=h(t))&&g?g.p(t,n):(g.d(1),g=d(t),g&&(g.c(),g.m(e,a)));let v=u;u=_(t),u===v?~u&&m[u].p(t,n):(c&&(vi(),xi(m[v],1,1,()=>{m[v]=null}),bi()),~u?(c=m[u],c||(c=m[u]=y[u](t),c.c()),wi(c,1),c.m(e,null)):c=null)},i(t){l||(wi(p.$$.fragment,t),wi(f.$$.fragment,t),wi(c),l=!0)},o(t){xi(p.$$.fragment,t),xi(f.$$.fragment,t),xi(c),l=!1},d(n){n&&Vr(e),Ci(p),Ci(f),g.d(),~u&&m[u].d(),t[9](null)}}}function ky(t,e,n){let r;qr(t,Id,t=>n(8,r=t));let i,o,{policy:s=null}=e,{selected:a=null}=e,{permits:u=[]}=e,{section:c=null}=e,{valid:l=null}=e,p=null;return ii(()=>{p&&p.scrollIntoView()}),t.$set=t=>{"policy"in t&&n(0,s=t.policy),"selected"in t&&n(1,a=t.selected),"permits"in t&&n(2,u=t.permits),"section"in t&&n(3,c=t.section),"valid"in t&&n(4,l=t.valid)},t.$$.update=()=>{1&t.$$.dirty&&n(6,i=!!Me(s,"issue.enabled")),1&t.$$.dirty&&n(7,o=!!Me(s,"disabled.reason"))},[s,a,u,c,l,p,i,o,r,function(t){si[t?"unshift":"push"](()=>{n(5,p=t)})}]}class Fy extends Ti{constructor(t){super(),Oi(this,t,ky,Dy,Br,{policy:0,selected:1,permits:2,section:3,valid:4})}}var jy=Ki((function(t,e){var n=function(){var t=function(t,e){var n=t,r=u[e],i=null,o=0,s=null,a=[],c={},l=function(t,e){i=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(o=4*n+17),p(0,0),p(o-7,0),p(0,o-7),h(),f(),g(t,e),n>=7&&d(t),null==s&&(s=_(n,r,a)),y(s,e)},p=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||o<=e+r||(i[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},f=function(){for(var t=8;t<o-8;t+=1)null==i[t][6]&&(i[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==i[6][e]&&(i[6][e]=e%2==0)},h=function(){for(var t=m.getPatternPosition(n),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var o=t[e],s=t[r];if(null==i[o][s])for(var a=-2;a<=2;a+=1)for(var u=-2;u<=2;u+=1)i[o+a][s+u]=-2==a||2==a||-2==u||2==u||0==a&&0==u}},d=function(t){for(var e=m.getBCHTypeNumber(n),r=0;r<18;r+=1){var s=!t&&1==(e>>r&1);i[Math.floor(r/3)][r%3+o-8-3]=s}for(r=0;r<18;r+=1){s=!t&&1==(e>>r&1);i[r%3+o-8-3][Math.floor(r/3)]=s}},g=function(t,e){for(var n=r<<3|e,s=m.getBCHTypeInfo(n),a=0;a<15;a+=1){var u=!t&&1==(s>>a&1);a<6?i[a][8]=u:a<8?i[a+1][8]=u:i[o-15+a][8]=u}for(a=0;a<15;a+=1){u=!t&&1==(s>>a&1);a<8?i[8][o-a-1]=u:a<9?i[8][15-a-1+1]=u:i[8][15-a-1]=u}i[o-8][8]=!t},y=function(t,e){for(var n=-1,r=o-1,s=7,a=0,u=m.getMaskFunction(e),c=o-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var l=0;l<2;l+=1)if(null==i[r][c-l]){var p=!1;a<t.length&&(p=1==(t[a]>>>s&1)),u(r,c-l)&&(p=!p),i[r][c-l]=p,-1==(s-=1)&&(a+=1,s=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}},_=function(t,e,n){for(var r=b.getRSBlocks(t,e),i=w(),o=0;o<n.length;o+=1){var s=n[o];i.put(s.getMode(),4),i.put(s.getLength(),m.getLengthInBits(s.getMode(),t)),s.write(i)}var a=0;for(o=0;o<r.length;o+=1)a+=r[o].dataCount;if(i.getLengthInBits()>8*a)throw"code length overflow. ("+i.getLengthInBits()+">"+8*a+")";for(i.getLengthInBits()+4<=8*a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(236,8),i.getLengthInBits()>=8*a));)i.put(17,8);return function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a+=1){var u=e[a].dataCount,c=e[a].totalCount-u;r=Math.max(r,u),i=Math.max(i,c),o[a]=new Array(u);for(var l=0;l<o[a].length;l+=1)o[a][l]=255&t.getBuffer()[l+n];n+=u;var p=m.getErrorCorrectPolynomial(c),f=v(o[a],p.getLength()-1).mod(p);s[a]=new Array(p.getLength()-1);for(l=0;l<s[a].length;l+=1){var h=l+f.getLength()-s[a].length;s[a][l]=h>=0?f.getAt(h):0}}var d=0;for(l=0;l<e.length;l+=1)d+=e[l].totalCount;var g=new Array(d),y=0;for(l=0;l<r;l+=1)for(a=0;a<e.length;a+=1)l<o[a].length&&(g[y]=o[a][l],y+=1);for(l=0;l<i;l+=1)for(a=0;a<e.length;a+=1)l<s[a].length&&(g[y]=s[a][l],y+=1);return g}(i,r)};c.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=x(t);break;case"Alphanumeric":n=E(t);break;case"Byte":n=I(t);break;case"Kanji":n=S(t);break;default:throw"mode:"+e}a.push(n),s=null},c.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return i[t][e]},c.getModuleCount=function(){return o},c.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=b.getRSBlocks(t,r),i=w(),o=0;o<a.length;o++){var s=a[o];i.put(s.getMode(),4),i.put(s.getLength(),m.getLengthInBits(s.getMode(),t)),s.write(i)}var u=0;for(o=0;o<e.length;o++)u+=e[o].dataCount;if(i.getLengthInBits()<=8*u)break}n=t}l(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){l(!0,n);var r=m.getLostPoint(c);(0==n||t>r)&&(t=r,e=n)}return e}())},c.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<c.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=c.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(t,e,n,r){var i={};"object"==typeof arguments[0]&&(t=(i=arguments[0]).cellSize,e=i.margin,n=i.alt,r=i.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,s,a,u,l=c.getModuleCount()*t+2*e,p="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",p+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',p+=i.scalable?"":' width="'+l+'px" height="'+l+'px"',p+=' viewBox="0 0 '+l+" "+l+'" ',p+=' preserveAspectRatio="xMinYMin meet"',p+=r.text||n.text?' role="img" aria-labelledby="'+C([r.id,n.id].join(" ").trim())+'"':"",p+=">",p+=r.text?'<title id="'+C(r.id)+'">'+C(r.text)+"</title>":"",p+=n.text?'<description id="'+C(n.id)+'">'+C(n.text)+"</description>":"",p+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',p+='<path d="',s=0;s<c.getModuleCount();s+=1)for(a=s*t+e,o=0;o<c.getModuleCount();o+=1)c.isDark(s,o)&&(p+="M"+(o*t+e)+","+a+u);return p+='" stroke="transparent" fill="black"/>',p+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,r=e,i=n-e;return O(n,n,(function(e,n){if(r<=e&&e<i&&r<=n&&n<i){var o=Math.floor((e-r)/t),s=Math.floor((n-r)/t);return c.isDark(s,o)?0:1}return 1}))},c.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=c.getModuleCount()*t+2*e,i="";return i+="<img",i+=' src="',i+=c.createDataURL(t,e),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=C(n),i+='"'),i+="/>"};var C=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return c.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,r,i,o,s=1*c.getModuleCount()+2*t,a=t,u=s-t,l={"":""," ":""," ":"","  ":" "},p={"":""," ":""," ":" ","  ":" "},f="";for(e=0;e<s;e+=2){for(r=Math.floor((e-a)/1),i=Math.floor((e+1-a)/1),n=0;n<s;n+=1)o="",a<=n&&n<u&&a<=e&&e<u&&c.isDark(r,Math.floor((n-a)/1))&&(o=" "),a<=n&&n<u&&a<=e+1&&e+1<u&&c.isDark(i,Math.floor((n-a)/1))?o+=" ":o+="",f+=t<1&&e+1>=u?p[o]:l[o];f+="\n"}return s%2&&t>0?f.substring(0,f.length-s-1)+Array(s+1).join(""):f.substring(0,f.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,r,i,o,s=c.getModuleCount()*t+2*e,a=e,u=s-e,l=Array(t+1).join(""),p=Array(t+1).join("  "),f="",h="";for(n=0;n<s;n+=1){for(i=Math.floor((n-a)/t),h="",r=0;r<s;r+=1)o=1,a<=r&&r<u&&a<=n&&n<u&&c.isDark(i,Math.floor((r-a)/t))&&(o=0),h+=o?l:p;for(i=0;i<t;i+=1)f+=h+"\n"}return f.substring(0,f.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)t.fillStyle=c.isDark(r,i)?"black":"white",t.fillRect(r*e,i*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=N(t),r=function(){var t=n.read();if(-1==t)throw"eof";return t},i=0,o={};;){var s=n.read();if(-1==s)break;var a=r(),u=r()<<8|r();o[String.fromCharCode(s<<8|a)]=u,i+=1}if(i!=e)throw i+" != "+e;return o}(),r="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var o=t.charCodeAt(i);if(o<128)e.push(o);else{var s=n[t.charAt(i)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(r)}}return e}};var e,n,r,i=1,o=2,s=4,a=8,u={L:1,M:0,Q:3,H:2},c=0,l=1,p=2,f=3,h=4,d=5,g=6,y=7,m=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;r(e)-r(1335)>=0;)e^=1335<<r(e)-r(1335);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;r(e)-r(7973)>=0;)e^=7973<<r(e)-r(7973);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case c:return function(t,e){return(t+e)%2==0};case l:return function(t,e){return t%2==0};case p:return function(t,e){return e%3==0};case f:return function(t,e){return(t+e)%3==0};case h:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case d:return function(t,e){return t*e%2+t*e%3==0};case g:return function(t,e){return(t*e%2+t*e%3)%2==0};case y:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=v([1],0),n=0;n<t;n+=1)e=e.multiply(v([1,_.gexp(n)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case i:return 10;case o:return 9;case s:case a:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case i:return 12;case o:return 11;case s:return 16;case a:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case i:return 14;case o:return 13;case s:return 16;case a:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var i=0;i<e;i+=1){for(var o=0,s=t.isDark(r,i),a=-1;a<=1;a+=1)if(!(r+a<0||e<=r+a))for(var u=-1;u<=1;u+=1)i+u<0||e<=i+u||0==a&&0==u||s==t.isDark(r+a,i+u)&&(o+=1);o>5&&(n+=3+o-5)}for(r=0;r<e-1;r+=1)for(i=0;i<e-1;i+=1){var c=0;t.isDark(r,i)&&(c+=1),t.isDark(r+1,i)&&(c+=1),t.isDark(r,i+1)&&(c+=1),t.isDark(r+1,i+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<e;i+=1)for(r=0;r<e;r+=1)t.isDark(r,i)&&(l+=1);return n+=Math.abs(100*l/e/e-50)/5*10},n),_=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var r={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return r}();function v(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var r=new Array(t.length-n+e),i=0;i<t.length-n;i+=1)r[i]=t[i+n];return r}(),r={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(r.getLength()+t.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<t.getLength();i+=1)e[n+i]^=_.gexp(_.glog(r.getAt(n))+_.glog(t.getAt(i)));return v(e,0)},mod:function(t){if(r.getLength()-t.getLength()<0)return r;for(var e=_.glog(r.getAt(0))-_.glog(t.getAt(0)),n=new Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<t.getLength();i+=1)n[i]^=_.gexp(_.glog(t.getAt(i))+e);return v(n,0).mod(t)}};return r}var b=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,r){var i=function(e,n){switch(n){case u.L:return t[4*(e-1)+0];case u.M:return t[4*(e-1)+1];case u.Q:return t[4*(e-1)+2];case u.H:return t[4*(e-1)+3];default:return}}(n,r);if(void 0===i)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var o=i.length/3,s=[],a=0;a<o;a+=1)for(var c=i[3*a+0],l=i[3*a+1],p=i[3*a+2],f=0;f<c;f+=1)s.push(e(l,p));return s},n}(),w=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)n.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return e},putBit:function(n){var r=Math.floor(e/8);t.length<=r&&t.push(0),n&&(t[r]|=128>>>e%8),e+=1}};return n},x=function(t){var e=i,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(o(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(o(e.substring(r,r+1)),4):e.length-r==2&&t.put(o(e.substring(r,r+2)),7))}},o=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+s(t.charAt(n));return e},s=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return r},E=function(t){var e=o,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*i(e.charAt(r))+i(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(i(e.charAt(r)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},I=function(e){var n=s,r=t.stringToBytes(e),i={getMode:function(){return n},getLength:function(t){return r.length},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)}};return i},S=function(e){var n=a,r=t.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(t,e){var n=r("");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var i=r(e),o={getMode:function(){return n},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,n=0;n+1<e.length;){var r=(255&e[n])<<8|255&e[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return o},C=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,r){n=n||0,r=r||t.length;for(var i=0;i<r;i+=1)e.writeByte(t[i+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},N=function(t){var e=t,n=0,r=0,i=0,o={read:function(){for(;i<8;){if(n>=e.length){if(0==i)return-1;throw"unexpected end of file./"+i}var t=e.charAt(n);if(n+=1,"="==t)return i=0,-1;t.match(/^\s$/)||(r=r<<6|s(t.charCodeAt(0)),i+=6)}var o=r>>>i-8&255;return i-=8,o}},s=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},O=function(t,e,n){for(var r=function(t,e){var n=t,r=e,i=new Array(t*e),o={setPixel:function(t,e,r){i[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=s(2);t.writeByte(2);for(var i=0;e.length-i>255;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},s=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,o=a(),s=0;s<e;s+=1)o.add(String.fromCharCode(s));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var u=C(),c=function(t){var e=t,n=0,r=0,i={write:function(t,i){if(t>>>i!=0)throw"length over";for(;n+i>=8;)e.writeByte(255&(t<<n|r)),i-=8-n,t>>>=8-n,r=0,n=0;r|=t<<n,n+=i},flush:function(){n>0&&e.writeByte(r)}};return i}(u);c.write(e,r);var l=0,p=String.fromCharCode(i[l]);for(l+=1;l<i.length;){var f=String.fromCharCode(i[l]);l+=1,o.contains(p+f)?p+=f:(c.write(o.indexOf(p),r),o.size()<4095&&(o.size()==1<<r&&(r+=1),o.add(p+f)),p=f)}return c.write(o.indexOf(p),r),c.write(n,r),c.flush(),u.toByteArray()},a=function(){var t={},e=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;t[r]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),i=0;i<e;i+=1)for(var o=0;o<t;o+=1)r.setPixel(o,i,n(o,i));var s=C();r.write(s);for(var a=function(){var t=0,e=0,n=0,r="",i={},o=function(t){r+=String.fromCharCode(s(63&t))},s=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return i.writeByte=function(r){for(t=t<<8|255&r,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},i.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var i=3-n%3,s=0;s<i;s+=1)r+="="},i.toString=function(){return r},i}(),u=s.toByteArray(),c=0;c<u.length;c+=1)a.writeByte(u[c]);return a.flush(),"data:image/gif;base64,"+a};return t}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},t.exports=n}));function $y({mat:t,size:e=t.length},n={}){const r=function(t={}){t.corners=t.corners||"None",t.radius=null!=t.radius?t.radius:1;const e={u:"v-2",r:"h2",d:"v2",l:"h-2"};return["ld","ul","ru","dr","ur","rd","dl","lu"].forEach((n,r)=>{let i="string"==typeof t.corners?t.corners:t.corners[n]||t.corners[[...n].reverse().join("")]||"None",o="number"==typeof t.radius?t.radius:t.radius[n]||t.radius[[...n].reverse().join("")]||1;const s=[{d:[0,1],l:[-1,0],u:[0,-1],r:[1,0]}[n[0]],{u:[0,-1],r:[1,0],d:[0,1],l:[-1,0]}[n[1]]];switch(i){case"None":e[n]={d:"v",l:"h-",u:"v-",r:"h"}[n[0]]+"1"+{u:"v-",r:"h",d:"v",l:"h-"}[n[1]]+"1";break;case"Skew":e[n]=(o<1?{d:"v",l:"h-",u:"v-",r:"h"}[n[0]]+`${1-o}`:"")+"l"+(s[0][0]+s[1][0])*o+" "+(s[0][1]+s[1][1])*o+(o<1?{u:"v-",r:"h",d:"v",l:"h-"}[n[1]]+`${1-o}`:"");break;case"Rounded":e[n]=(o<1?{d:"v",l:"h-",u:"v-",r:"h"}[n[0]]+`${1-o}`:"")+"a"+`${o},${o} 0 0,${r>3?1:0}`+" "+(s[0][0]+s[1][0])*o+","+(s[0][1]+s[1][1])*o+(o<1?{u:"v-",r:"h",d:"v",l:"h-"}[n[1]]+`${1-o}`:"");break;default:e[n]=i}}),e}(n);let i=Array(2*e+3).fill(0).map(t=>Array(e+1).fill(!1)),o=[Array(e).fill(!1),...t,Array(e).fill(!1)].map(t=>[!1,...t,!1]),s=[];for(let t=0;t<e;t++)for(let n=0;n<2*e;n+=2)if(!i[n][t]&&!o[n/2][1+t]&&o[n/2+1][1+t]){let e=[`M${2*t+1} ${n}`],a=0;for(;!i[n][t];)switch(i[n][t]=!0,n%2*2+a){case 0:t++,o[n/2+1][1+t]?o[n/2][1+t]?(e.push(r.ru),a=0,n--):e.push(r.r):(e.push(r.rd),a=1,n++);break;case 1:o[n/2][t]?o[n/2+1][t]?(e.push(r.ld),a=1,n++):(e.push(r.l),t--):(e.push(r.lu),a=0,n--);break;case 2:o[(n-1)/2][1+t]?o[(n-1)/2][1+t-1]?(e.push(r.ul),a=1,t--):(e.push(r.u),n--):(e.push(r.ur),a=0),n--;break;case 3:o[(n+3)/2][1+t-1]?o[(n+3)/2][1+t]?(e.push(r.dr),a=0):(e.push(r.d),n++):(e.push(r.dl),a=1,t--),n++}s.push(e.join(""))}return s.join("")}var By={generateSvgPath:$y,generateSvg:function({mat:t,size:e=t.length},n){return`<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 ${2*e} ${2*e}"><path d="${$y({mat:t},n)}" fill-rule="evenodd"/></svg>`}};const{generateSvg:Uy}=By;var qy=function(t,e={}){let n=function(t,e={}){let n=new jy(e.version||0,e.correction||"M"),r=jy.stringToBytesFuncs[e.encoding||"default"];"string"==typeof t&&(t=String.fromCharCode(...r(t))),n.addData(t,e.mode||"Byte"),n.make();let i=n.getModuleCount(),o=[];for(let t=0;t<i;t++){o[t]=[];for(let e=0;e<i;e++)o[t][e]=n.isDark(t,e)}return{size:i,mat:o}}(t,e);return Uy(n,e)};function Gy(t){let e,n=t[3]&&zy(t);return{c(){n&&n.c(),e=Kr()},m(t,r){n&&n.m(t,r),zr(t,e,r)},p(t,r){t[3]?n?n.p(t,r):(n=zy(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&Vr(e)}}}function zy(t){let e;function n(t,e){return t[2]?Hy:Vy}let r=n(t),i=r(t);return{c(){i.c(),e=Kr()},m(t,n){i.m(t,n),zr(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&Vr(e)}}}function Vy(t){let e,n;return{c(){e=Yr("button"),e.textContent="Cancel Pass",Jr(e,"class","cancel")},m(r,i,o){zr(r,e,i),o&&n(),n=Qr(e,"click",t[14])},p:Dr,d(t){t&&Vr(e),n()}}}function Hy(t){let e,n,r,i,o,s,a,u=t[1]?"Updating":"Cancel Pass";return{c(){e=Yr("form"),n=Yr("fieldset"),n.innerHTML='<ul><li><label for="permit-cancel-auth">Passcode</label><input id="permit-cancel-auth" type="text" pattern="[0-9]*" inputmode="numeric" maxlength="6" autocorrect="off" autocomplete="off" spellcheck="false" name="token" required="" placeholder="required"></li></ul>',r=Wr(),i=Yr("button"),o=Xr(u),Jr(i,"type","submit"),i.disabled=s=!t[0]||t[1],Jr(e,"class","cancel")},m(s,u,c){zr(s,e,u),Gr(e,n),Gr(e,r),Gr(e,i),Gr(i,o),c&&jr(a),a=[Qr(e,"change",t[5]),Qr(e,"input",t[5]),Qr(e,"submit",t[6])]},p(t,e){2&e&&u!==(u=t[1]?"Updating":"Cancel Pass")&&Zr(o,u),3&e&&s!==(s=!t[0]||t[1])&&(i.disabled=s)},d(t){t&&Vr(e),jr(a)}}}function Yy(t){let e,n=!t[4]&&Gy(t);return{c(){n&&n.c(),e=Kr()},m(t,r){n&&n.m(t,r),zr(t,e,r)},p(t,[r]){t[4]?n&&(n.d(1),n=null):n?n.p(t,r):(n=Gy(t),n.c(),n.m(e.parentNode,e))},i:Dr,o:Dr,d(t){n&&n.d(t),t&&Vr(e)}}}function Xy(t,e,n){let r;qr(t,Bh,t=>n(12,r=t));let{permit:i=null}=e,o=!1,s=!1,a=!1;let u,c,l,p,f,h,d;return t.$set=t=>{"permit"in t&&n(7,i=t.permit)},t.$$.update=()=>{128&t.$$.dirty&&n(8,u=i&&i.valid&&i.valid.interval?i.valid.interval.split("/"):[]),256&t.$$.dirty&&n(9,c=u&&u[0]&&new Date(u[0])),256&t.$$.dirty&&n(10,l=u&&u[1]&&new Date(u[1])),5632&t.$$.dirty&&(p=!!c&&!!l&&rf(r,{start:c,end:l})),5120&t.$$.dirty&&(f=l&&tf(l,r)),4608&t.$$.dirty&&n(3,h=c&&Zp(c,r)),1664&t.$$.dirty&&n(4,d=i&&(i.valid.cancelled||ef(c,l)))},[o,s,a,h,d,function(t){n(0,o=t.target.form&&t.target.form.checkValidity())},async function(t){if(t.preventDefault(),!i||s||!o)return;const e=t.target,r=new FormData(e);n(1,s=!0);const a=await async function(t,e){t=t.id||t;const n=await fetch(`${Eh.settings.apiBase}/permits/${t}/expires?viewpoint=${(new Date).toISOString()}&${Nh(e).toString()}`,{method:"PATCH"});if(n.ok){const e=await Lh(n);return await Th(t),e}return await Lh(n)}(i,r);a.message&&alert(a.message),n(1,s=n(0,o=!1))},i,u,c,l,p,r,f,t=>n(2,a=!0)]}class Wy extends Ti{constructor(t){super(),Oi(this,t,Xy,Yy,Br,{permit:7})}}function Ky(t,e,n){const r=t.slice();return r[9]=e[n],r}function Qy(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,_,v,b,w,x,E,I,S,C,N,O,T,L,P,R,A,M,D,k,F,j,$,B,U,q,G,z,V,H,Y,X,W,K,Q,J,Z,tt,et,nt,rt,it,ot,st,at,ut,ct,lt,pt=t[1].title+"",ft=Wp(t[7][0],"h:mm a")+"",ht=Wp(t[7][0],"EE MMM d yyyy")+"",dt=Wp(t[7][1],"h:mm a")+"",gt=Wp(t[7][1],"EE MMM d yyyy")+"",yt=Wp(t[5],"h:mm a")+"",mt=Wp(t[5],"EE MMM d yyyy")+"",_t=(Me(t[1],"contact.name")?"person":Me(t[1],"tenant.format"))+"";const vt=new Sg({props:{property:t[1].property}}),bt=new mg({props:{policy:t[1].policy}});function wt(e){t[8].call(null,e)}let xt={permit:t[1]};void 0!==t[0]&&(xt.status=t[0]);const Et=new Ug({props:xt});si.push(()=>Ei(Et,"status",wt));let It=t[3],St=[];for(let e=0;e<It.length;e+=1)St[e]=Jy(Ky(t,It,e));const Ct=new Wy({props:{permit:t[1]}});return{c(){e=Yr("article"),n=Yr("header"),r=Yr("h1"),i=Xr(pt),o=Wr(),s=Yr("a"),Ii(vt.$$.fragment),u=Wr(),Ii(bt.$$.fragment),c=Wr(),Ii(Et.$$.fragment),p=Wr(),f=Yr("aside"),h=Yr("figure"),g=Wr(),y=Yr("figcaption");for(let t=0;t<St.length;t+=1)St[t].c();m=Wr(),_=Yr("ul"),v=Yr("li"),b=Yr("time"),w=Yr("dfn"),w.textContent="Start",x=Wr(),E=Yr("time"),I=Xr(ft),C=Wr(),N=Yr("time"),O=Xr(ht),P=Wr(),R=Yr("li"),A=Yr("time"),M=Yr("dfn"),M.textContent="End",D=Wr(),k=Yr("time"),F=Xr(dt),$=Wr(),B=Yr("time"),U=Xr(gt),z=Wr(),V=Yr("li"),H=Yr("time"),Y=Yr("dfn"),Y.textContent="Registered",X=Wr(),W=Yr("time"),K=Xr(yt),J=Wr(),Z=Yr("time"),tt=Xr(mt),nt=Wr(),rt=Yr("footer"),it=Yr("p"),ot=Xr("Pass valid for listed "),st=Xr(_t),at=Xr(" only. Please be prepared to show pass as required to occupants and authorized personnel. Pass may not be cancelled after the start time."),ut=Wr(),Ii(Ct.$$.fragment),Jr(s,"href",a="/properties/"+t[1].property.id),d=new ei(t[2],g),Jr(h,"class","validate"),Jr(E,"datetime",S=Wp(t[7][0],"HH:mm:ss")),Jr(N,"datetime",T=Wp(t[7][0],"yyyy-MM-dd")),Jr(b,"class","valid min"),Jr(b,"datetime",L=t[6][0]),Jr(k,"datetime",j=Wp(t[7][1],"HH:mm:ss")),Jr(B,"datetime",q=Wp(t[7][1],"yyyy-MM-dd")),Jr(A,"class","valid max"),Jr(A,"datetime",G=t[6][1]),Jr(W,"datetime",Q=Wp(t[5],"HH:mm:ss")),Jr(Z,"datetime",et=Wp(t[5],"yyyy-MM-dd")),Jr(H,"class","issued"),Jr(H,"datetime",t[4]),Jr(e,"class",ct=t[1].type+" "+t[0])},m(t,a){zr(t,e,a),Gr(e,n),Gr(n,r),Gr(r,i),Gr(n,o),Gr(n,s),Si(vt,s,null),Gr(n,u),Si(bt,n,null),Gr(e,c),Si(Et,e,null),Gr(e,p),Gr(e,f),Gr(f,h),d.m(h),Gr(h,g),Gr(h,y);for(let t=0;t<St.length;t+=1)St[t].m(y,null);Gr(f,m),Gr(f,_),Gr(_,v),Gr(v,b),Gr(b,w),Gr(b,x),Gr(b,E),Gr(E,I),Gr(b,C),Gr(b,N),Gr(N,O),Gr(_,P),Gr(_,R),Gr(R,A),Gr(A,M),Gr(A,D),Gr(A,k),Gr(k,F),Gr(A,$),Gr(A,B),Gr(B,U),Gr(_,z),Gr(_,V),Gr(V,H),Gr(H,Y),Gr(H,X),Gr(H,W),Gr(W,K),Gr(H,J),Gr(H,Z),Gr(Z,tt),Gr(e,nt),Gr(e,rt),Gr(rt,it),Gr(it,ot),Gr(it,st),Gr(it,at),Gr(rt,ut),Si(Ct,rt,null),lt=!0},p(t,n){(!lt||2&n)&&pt!==(pt=t[1].title+"")&&Zr(i,pt);const r={};2&n&&(r.property=t[1].property),vt.$set(r),(!lt||2&n&&a!==(a="/properties/"+t[1].property.id))&&Jr(s,"href",a);const o={};2&n&&(o.policy=t[1].policy),bt.$set(o);const u={};if(2&n&&(u.permit=t[1]),!l&&1&n&&(l=!0,u.status=t[0],fi(()=>l=!1)),Et.$set(u),(!lt||4&n)&&d.p(t[2]),8&n){let e;for(It=t[3],e=0;e<It.length;e+=1){const r=Ky(t,It,e);St[e]?St[e].p(r,n):(St[e]=Jy(r),St[e].c(),St[e].m(y,null))}for(;e<St.length;e+=1)St[e].d(1);St.length=It.length}(!lt||128&n)&&ft!==(ft=Wp(t[7][0],"h:mm a")+"")&&Zr(I,ft),(!lt||128&n&&S!==(S=Wp(t[7][0],"HH:mm:ss")))&&Jr(E,"datetime",S),(!lt||128&n)&&ht!==(ht=Wp(t[7][0],"EE MMM d yyyy")+"")&&Zr(O,ht),(!lt||128&n&&T!==(T=Wp(t[7][0],"yyyy-MM-dd")))&&Jr(N,"datetime",T),(!lt||64&n&&L!==(L=t[6][0]))&&Jr(b,"datetime",L),(!lt||128&n)&&dt!==(dt=Wp(t[7][1],"h:mm a")+"")&&Zr(F,dt),(!lt||128&n&&j!==(j=Wp(t[7][1],"HH:mm:ss")))&&Jr(k,"datetime",j),(!lt||128&n)&&gt!==(gt=Wp(t[7][1],"EE MMM d yyyy")+"")&&Zr(U,gt),(!lt||128&n&&q!==(q=Wp(t[7][1],"yyyy-MM-dd")))&&Jr(B,"datetime",q),(!lt||64&n&&G!==(G=t[6][1]))&&Jr(A,"datetime",G),(!lt||32&n)&&yt!==(yt=Wp(t[5],"h:mm a")+"")&&Zr(K,yt),(!lt||32&n&&Q!==(Q=Wp(t[5],"HH:mm:ss")))&&Jr(W,"datetime",Q),(!lt||32&n)&&mt!==(mt=Wp(t[5],"EE MMM d yyyy")+"")&&Zr(tt,mt),(!lt||32&n&&et!==(et=Wp(t[5],"yyyy-MM-dd")))&&Jr(Z,"datetime",et),(!lt||16&n)&&Jr(H,"datetime",t[4]),(!lt||2&n)&&_t!==(_t=(Me(t[1],"contact.name")?"person":Me(t[1],"tenant.format"))+"")&&Zr(st,_t);const c={};2&n&&(c.permit=t[1]),Ct.$set(c),(!lt||3&n&&ct!==(ct=t[1].type+" "+t[0]))&&Jr(e,"class",ct)},i(t){lt||(wi(vt.$$.fragment,t),wi(bt.$$.fragment,t),wi(Et.$$.fragment,t),wi(Ct.$$.fragment,t),lt=!0)},o(t){xi(vt.$$.fragment,t),xi(bt.$$.fragment,t),xi(Et.$$.fragment,t),xi(Ct.$$.fragment,t),lt=!1},d(t){t&&Vr(e),Ci(vt),Ci(bt),Ci(Et),Hr(St,t),Ci(Ct)}}}function Jy(t){let e,n,r=t[9]+"";return{c(){e=Yr("span"),n=Xr(r)},m(t,r){zr(t,e,r),Gr(e,n)},p(t,e){8&e&&r!==(r=t[9]+"")&&Zr(n,r)},d(t){t&&Vr(e)}}}function Zy(t){let e,n,r=t[1]&&t[1].id&&Qy(t);return{c(){r&&r.c(),e=Kr()},m(t,i){r&&r.m(t,i),zr(t,e,i),n=!0},p(t,[n]){t[1]&&t[1].id?r?(r.p(t,n),wi(r,1)):(r=Qy(t),r.c(),wi(r,1),r.m(e.parentNode,e)):r&&(vi(),xi(r,1,1,()=>{r=null}),bi())},i(t){n||(wi(r),n=!0)},o(t){xi(r),n=!1},d(t){r&&r.d(t),t&&Vr(e)}}}function tm(t,e,n){let r,i,o,s,a,u,{permit:c=null}=e,{status:l=null}=e;return t.$set=t=>{"permit"in t&&n(1,c=t.permit),"status"in t&&n(0,l=t.status)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=c?qy(`https://amenitypass.app/p/${c.id}`.toUpperCase(),{correction:"M",mode:"Alphanumeric"}):""),2&t.$$.dirty&&n(3,i=c?parseInt(c.number).toString(16).padStart(8,"0"):""),2&t.$$.dirty&&n(4,o=!!c&&c.issued.datetime),2&t.$$.dirty&&n(5,s=!!c&&mh(c.issued.datetime)),2&t.$$.dirty&&n(6,a=c?c.valid.interval.split("/"):[]),64&t.$$.dirty&&n(7,u=a.map(mh))},[l,c,r,i,o,s,a,u,function(t){l=t,n(0,l)}]}class em extends Ti{constructor(t){super(),Oi(this,t,tm,Zy,Br,{permit:1,status:0})}}function nm(t,e,n){const r=t.slice();return r[3]=e[n],r}function rm(t,e,n){const r=t.slice();return r[6]=e[n],r}function im(t){let e,n,r=t[2],i=[];for(let e=0;e<r.length;e+=1)i[e]=om(rm(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){e=Yr("ul");for(let t=0;t<i.length;t+=1)i[t].c();Jr(e,"class","permits")},m(t,r){zr(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(4&n){let s;for(r=t[2],s=0;s<r.length;s+=1){const o=rm(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=om(o),i[s].c(),wi(i[s],1),i[s].m(e,null))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){t&&Vr(e),Hr(i,t)}}}function om(t){let e,n,r,i,o;const s=new Ug({props:{permit:t[6]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r=t[6]&&t[6].id?`/p/${t[6].id}`:null)},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};4&e&&(i.permit=t[6]),s.$set(i),(!o||4&e&&r!==(r=t[6]&&t[6].id?`/p/${t[6].id}`:null))&&Jr(n,"href",r)},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function sm(t){let e,n,r=t[1],i=[];for(let e=0;e<r.length;e+=1)i[e]=am(nm(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Kr()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);zr(t,e,r),n=!0},p(t,n){if(2&n){let s;for(r=t[1],s=0;s<r.length;s+=1){const o=nm(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=am(o),i[s].c(),wi(i[s],1),i[s].m(e.parentNode,e))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){Hr(i,t),t&&Vr(e)}}}function am(t){let e,n,r,i,o;const s=new mg({props:{policy:t[3]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r="/properties/"+t[3].scope+"/amenities/"+t[3].subject)},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};2&e&&(i.policy=t[3]),s.$set(i),(!o||2&e&&r!==(r="/properties/"+t[3].scope+"/amenities/"+t[3].subject))&&Jr(n,"href",r)},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function um(t){let e,n,r,i,o,s,a,u,c,l;const p=new Sg({props:{property:t[0]}});let f=t[2]&&im(t),h=!!t[1]&&sm(t);return{c(){e=Yr("article"),n=Yr("header"),Ii(p.$$.fragment),r=Wr(),f&&f.c(),i=Wr(),o=Yr("nav"),s=Yr("h1"),s.textContent="All Amenities",a=Wr(),u=Yr("ul"),h&&h.c(),Jr(u,"class","policies"),Jr(u,"data-count",c=Me(t[1],"length","")),Jr(o,"class","policies"),Jr(e,"class","property")},m(t,c){zr(t,e,c),Gr(e,n),Si(p,n,null),Gr(e,r),f&&f.m(e,null),Gr(e,i),Gr(e,o),Gr(o,s),Gr(o,a),Gr(o,u),h&&h.m(u,null),l=!0},p(t,[n]){const r={};1&n&&(r.property=t[0]),p.$set(r),t[2]?f?(f.p(t,n),wi(f,1)):(f=im(t),f.c(),wi(f,1),f.m(e,i)):f&&(vi(),xi(f,1,1,()=>{f=null}),bi()),t[1]?h?(h.p(t,n),wi(h,1)):(h=sm(t),h.c(),wi(h,1),h.m(u,null)):h&&(vi(),xi(h,1,1,()=>{h=null}),bi()),(!l||2&n&&c!==(c=Me(t[1],"length","")))&&Jr(u,"data-count",c)},i(t){l||(wi(p.$$.fragment,t),wi(f),wi(h),l=!0)},o(t){xi(p.$$.fragment,t),xi(f),xi(h),l=!1},d(t){t&&Vr(e),Ci(p),f&&f.d(),h&&h.d()}}}function cm(t,e,n){let{property:r=null}=e,{policies:i=null}=e,{permits:o=null}=e;return t.$set=t=>{"property"in t&&n(0,r=t.property),"policies"in t&&n(1,i=t.policies),"permits"in t&&n(2,o=t.permits)},[r,i,o]}class lm extends Ti{constructor(t){super(),Oi(this,t,cm,um,Br,{property:0,policies:1,permits:2})}}function pm(t,e,n){const r=t.slice();return r[6]=e[n],r}function fm(t){let e,n,r,i;const o=[dm,hm],s=[];function a(t,e){return t[0].loading?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=Kr()},m(t,n){s[e].m(t,n),zr(t,r,n),i=!0},p(t,i){let u=e;e=a(t),e===u?s[e].p(t,i):(vi(),xi(s[u],1,1,()=>{s[u]=null}),bi(),n=s[e],n||(n=s[e]=o[e](t),n.c()),wi(n,1),n.m(r.parentNode,r))},i(t){i||(wi(n),i=!0)},o(t){xi(n),i=!1},d(t){s[e].d(t),t&&Vr(r)}}}function hm(t){let e,n,r,i=t[0].items,o=[];for(let e=0;e<i.length;e+=1)o[e]=gm(pm(t,i,e));const s=t=>xi(o[t],1,1,()=>{o[t]=null});return{c(){e=Yr("ul");for(let t=0;t<o.length;t+=1)o[t].c();Jr(e,"class","properties"),Jr(e,"data-count",n=Me(t[0].items,"length",""))},m(t,n){zr(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,a){if(1&a){let n;for(i=t[0].items,n=0;n<i.length;n+=1){const r=pm(t,i,n);o[n]?(o[n].p(r,a),wi(o[n],1)):(o[n]=gm(r),o[n].c(),wi(o[n],1),o[n].m(e,null))}for(vi(),n=i.length;n<o.length;n+=1)s(n);bi()}(!r||1&a&&n!==(n=Me(t[0].items,"length","")))&&Jr(e,"data-count",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)wi(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)xi(o[t]);r=!1},d(t){t&&Vr(e),Hr(o,t)}}}function dm(t){let e;return{c(){e=Yr("ul"),Jr(e,"class","properties"),Jr(e,"data-count","")},m(t,n){zr(t,e,n)},p:Dr,i:Dr,o:Dr,d(t){t&&Vr(e)}}}function gm(t){let e,n,r,i,o;const s=new Sg({props:{property:t[6]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r="/properties/"+t[6].id)},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};1&e&&(i.property=t[6]),s.$set(i),(!o||1&e&&r!==(r="/properties/"+t[6].id))&&Jr(n,"href",r)},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function ym(t){let e,n,r,i,o,s,a,u=t[0]&&fm(t);return{c(){e=Yr("form"),n=Yr("input"),i=Wr(),u&&u.c(),o=Kr(),Jr(n,"placeholder","Find location by name"),Jr(n,"autocomplete","off"),Jr(n,"type","search"),Jr(n,"name","q"),n.value=r=t[1]||"",Jr(e,"class","properties")},m(r,c,l){zr(r,e,c),Gr(e,n),zr(r,i,c),u&&u.m(r,c),zr(r,o,c),s=!0,l&&jr(a),a=[Qr(n,"input",t[2]),Qr(n,"change",t[2]),Qr(n,"submit",t[2])]},p(t,[e]){t[0]?u?(u.p(t,e),wi(u,1)):(u=fm(t),u.c(),wi(u,1),u.m(o.parentNode,o)):u&&(vi(),xi(u,1,1,()=>{u=null}),bi())},i(t){s||(wi(u),s=!0)},o(t){xi(u),s=!1},d(t){t&&Vr(e),t&&Vr(i),u&&u.d(t),t&&Vr(o),jr(a)}}}function mm(t,e,n){let r,i;qr(t,Qh,t=>n(3,r=t)),qr(t,ad,t=>n(4,i=t));let o=r;const s=ir((function(t){var e=new URLSearchParams(location.search);t?e.set("q",t):e.delete("q"),T(`${location.pathname}?${e.toString()}`)}),500,{trailing:!0});let a;return t.$$.update=()=>{16&t.$$.dirty&&n(0,a=i)},[a,o,function(t){s(t.target.value)}]}class _m extends Ti{constructor(t){super(),Oi(this,t,mm,ym,Br,{})}}function vm(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,_,v,b,w,x=Me(t[0],"tenants.title","")+"",E=t[5]?"Validating":"Continue",I=t[3]&&bm(t);function S(e){t[8].call(null,e)}function C(e){t[9].call(null,e)}let N={units:t[1]};void 0!==t[2]&&(N.id=t[2]),void 0!==t[3]&&(N.selected=t[3]);const O=new Kg({props:N});return si.push(()=>Ei(O,"id",S)),si.push(()=>Ei(O,"selected",C)),{c(){e=Yr("form"),n=Yr("input"),i=Wr(),o=Yr("fieldset"),s=Yr("ul"),a=Yr("li"),u=Yr("label"),c=Xr(x),l=Wr(),I&&I.c(),p=Wr(),Ii(O.$$.fragment),d=Wr(),g=Yr("li"),g.innerHTML='<label for="permit-auth">Passcode</label><input id="permit-auth" type="text" pattern="[0-9]*" inputmode="numeric" maxlength="6" autocorrect="off" autocomplete="off" spellcheck="false" name="password" required="">',y=Wr(),m=Yr("button"),_=Xr(E),Jr(n,"type","hidden"),Jr(n,"name","scope"),n.value=r=t[0].id,Jr(u,"for",t[2]),Jr(o,"class","tenant"),Jr(m,"type","submit"),m.disabled=v=!t[4]||t[5]},m(r,f,h){zr(r,e,f),Gr(e,n),Gr(e,i),Gr(e,o),Gr(o,s),Gr(s,a),Gr(a,u),Gr(u,c),Gr(a,l),I&&I.m(a,null),Gr(a,p),Si(O,a,null),Gr(s,d),Gr(s,g),Gr(e,y),Gr(e,m),Gr(m,_),b=!0,h&&jr(w),w=[Qr(e,"change",t[6]),Qr(e,"input",t[6]),Qr(e,"submit",t[7])]},p(t,e){(!b||1&e&&r!==(r=t[0].id))&&(n.value=r),(!b||1&e)&&x!==(x=Me(t[0],"tenants.title","")+"")&&Zr(c,x),(!b||4&e)&&Jr(u,"for",t[2]),t[3]?I?I.p(t,e):(I=bm(t),I.c(),I.m(a,p)):I&&(I.d(1),I=null);const i={};2&e&&(i.units=t[1]),!f&&4&e&&(f=!0,i.id=t[2],fi(()=>f=!1)),!h&&8&e&&(h=!0,i.selected=t[3],fi(()=>h=!1)),O.$set(i),(!b||32&e)&&E!==(E=t[5]?"Validating":"Continue")&&Zr(_,E),(!b||48&e&&v!==(v=!t[4]||t[5]))&&(m.disabled=v)},i(t){b||(wi(O.$$.fragment,t),b=!0)},o(t){xi(O.$$.fragment,t),b=!1},d(t){t&&Vr(e),I&&I.d(),Ci(O),jr(w)}}}function bm(t){let e,n;return{c(){e=Yr("input"),Jr(e,"type","hidden"),Jr(e,"name","unit"),e.value=n=t[3].id},m(t,n){zr(t,e,n)},p(t,r){8&r&&n!==(n=t[3].id)&&(e.value=n)},d(t){t&&Vr(e)}}}function wm(t){let e,n,r=t[0]&&vm(t);return{c(){r&&r.c(),e=Kr()},m(t,i){r&&r.m(t,i),zr(t,e,i),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),wi(r,1)):(r=vm(t),r.c(),wi(r,1),r.m(e.parentNode,e)):r&&(vi(),xi(r,1,1,()=>{r=null}),bi())},i(t){n||(wi(r),n=!0)},o(t){xi(r),n=!1},d(t){r&&r.d(t),t&&Vr(e)}}}function xm(t,e,n){let r,{property:i=null}=e,{units:o=[]}=e,s=null,a=!1,u=!1;return t.$set=t=>{"property"in t&&n(0,i=t.property),"units"in t&&n(1,o=t.units)},[i,o,r,s,a,u,function(t){const e=t.target.form;n(4,a=e&&e.checkValidity()&&e.unit&&e.unit.value&&e.password&&e.password.value)},async function(t){if(t.preventDefault(),u||!a)return;const e=t.target;new FormData(e),n(5,u=!0);const r=await Sh(e.scope.value,e.unit&&e.unit.value,e.password.value);r.message&&alert(r.message),n(5,u=n(4,a=!1))},function(t){r=t,n(2,r)},function(t){s=t,n(3,s)}]}class Em extends Ti{constructor(t){super(),Oi(this,t,xm,wm,Br,{property:0,units:1})}}function Im(t,e,n){const r=t.slice();return r[16]=e[n],r}function Sm(t,e,n){const r=t.slice();return r[16]=e[n],r}function Cm(t,e,n){const r=t.slice();return r[21]=e[n],r}function Nm(t,e,n){const r=t.slice();return r[24]=e[n],r}function Om(t){let e;return{c(){e=Yr("li"),e.innerHTML='<a href="/">Select Location</a>'},m(t,n){zr(t,e,n)},d(t){t&&Vr(e)}}}function Tm(t){let e;const n=new Sg({props:{property:t[4]}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};16&e&&(r.property=t[4]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Lm(t){let e,n,r,i,o,s,a,u,c;return{c(){e=Yr("li"),n=Yr("a"),r=Xr("All Amenities"),o=Wr(),s=Yr("li"),a=Yr("a"),u=Xr("Your Passes"),Jr(n,"href",i="/properties/"+t[1]),Jr(a,"href",c="/properties/"+t[1]+"/permits")},m(t,i){zr(t,e,i),Gr(e,n),Gr(n,r),zr(t,o,i),zr(t,s,i),Gr(s,a),Gr(a,u)},p(t,e){2&e&&i!==(i="/properties/"+t[1])&&Jr(n,"href",i),2&e&&c!==(c="/properties/"+t[1]+"/permits")&&Jr(a,"href",c)},d(t){t&&Vr(e),t&&Vr(o),t&&Vr(s)}}}function Pm(t){let e,n,r,i,o,s,a,u;const c=new _m({});let l=!!t[12]&&km(t),p=!!t[13]&&$m(t);return{c(){e=Yr("nav"),Ii(c.$$.fragment),n=Wr(),r=Yr("h1"),r.textContent="Recent",i=Wr(),o=Yr("ul"),l&&l.c(),a=Wr(),p&&p.c(),Jr(o,"class","properties recent"),Jr(o,"data-count",s=Me(t[12],"length","")),Jr(e,"class","properties")},m(t,s){zr(t,e,s),Si(c,e,null),Gr(e,n),Gr(e,r),Gr(e,i),Gr(e,o),l&&l.m(o,null),Gr(e,a),p&&p.m(e,null),u=!0},p(t,n){t[12]?l?(l.p(t,n),wi(l,1)):(l=km(t),l.c(),wi(l,1),l.m(o,null)):l&&(vi(),xi(l,1,1,()=>{l=null}),bi()),(!u||4096&n&&s!==(s=Me(t[12],"length","")))&&Jr(o,"data-count",s),t[13]?p?(p.p(t,n),wi(p,1)):(p=$m(t),p.c(),wi(p,1),p.m(e,null)):p&&(vi(),xi(p,1,1,()=>{p=null}),bi())},i(t){u||(wi(c.$$.fragment,t),wi(l),wi(p),u=!0)},o(t){xi(c.$$.fragment,t),xi(l),xi(p),u=!1},d(t){t&&Vr(e),Ci(c),l&&l.d(),p&&p.d()}}}function Rm(t){let e;const n=new uy({props:{policy:t[6],valid:t[8],units:t[11]||[]}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};64&e&&(r.policy=t[6]),256&e&&(r.valid=t[8]),2048&e&&(r.units=t[11]||[]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Am(t){let e;const n=new lm({props:{property:t[4],policies:t[10],permits:t[9]&&t[9].filter(t_)}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};16&e&&(r.property=t[4]),1024&e&&(r.policies=t[10]),512&e&&(r.permits=t[9]&&t[9].filter(t_)),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Mm(t){let e;const n=new Fy({props:{policy:t[6],selected:Me(t[7],"selected"),valid:t[8],section:t[7].subview||t[0],permits:t[9]&&t[9].filter(t[15])}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};64&e&&(r.policy=t[6]),128&e&&(r.selected=Me(t[7],"selected")),256&e&&(r.valid=t[8]),129&e&&(r.section=t[7].subview||t[0]),516&e&&(r.permits=t[9]&&t[9].filter(t[15])),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Dm(t){let e,n;const r=new em({props:{permit:t[5]}});return{c(){e=Yr("section"),Ii(r.$$.fragment)},m(t,i){zr(t,e,i),Si(r,e,null),n=!0},p(t,e){const n={};32&e&&(n.permit=t[5]),r.$set(n)},i(t){n||(wi(r.$$.fragment,t),n=!0)},o(t){xi(r.$$.fragment,t),n=!1},d(t){t&&Vr(e),Ci(r)}}}function km(t){let e,n,r=t[12],i=[];for(let e=0;e<r.length;e+=1)i[e]=jm(Nm(t,r,e));const o=t=>xi(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Kr()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);zr(t,e,r),n=!0},p(t,n){if(4096&n){let s;for(r=t[12],s=0;s<r.length;s+=1){const o=Nm(t,r,s);i[s]?(i[s].p(o,n),wi(i[s],1)):(i[s]=jm(o),i[s].c(),wi(i[s],1),i[s].m(e.parentNode,e))}for(vi(),s=r.length;s<i.length;s+=1)o(s);bi()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)wi(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xi(i[t]);n=!1},d(t){Hr(i,t),t&&Vr(e)}}}function Fm(t){let e,n,r;const i=new Sg({props:{property:t[24]}});return{c(){e=Yr("a"),Ii(i.$$.fragment),Jr(e,"href",n="/properties/"+t[24].id)},m(t,n){zr(t,e,n),Si(i,e,null),r=!0},p(t,o){const s={};4096&o&&(s.property=t[24]),i.$set(s),(!r||4096&o&&n!==(n="/properties/"+t[24].id))&&Jr(e,"href",n)},i(t){r||(wi(i.$$.fragment,t),r=!0)},o(t){xi(i.$$.fragment,t),r=!1},d(t){t&&Vr(e),Ci(i)}}}function jm(t){let e,n,r,i=!!t[24]&&Fm(t);return{c(){e=Yr("li"),i&&i.c(),n=Wr()},m(t,o){zr(t,e,o),i&&i.m(e,null),Gr(e,n),r=!0},p(t,r){t[24]?i?(i.p(t,r),wi(i,1)):(i=Fm(t),i.c(),wi(i,1),i.m(e,n)):i&&(vi(),xi(i,1,1,()=>{i=null}),bi())},i(t){r||(wi(i),r=!0)},o(t){xi(i),r=!1},d(t){t&&Vr(e),i&&i.d()}}}function $m(t){let e,n,r,i,o,s=t[13],a=[];for(let e=0;e<s.length;e+=1)a[e]=Bm(Cm(t,s,e));const u=t=>xi(a[t],1,1,()=>{a[t]=null});return{c(){e=Yr("h1"),e.textContent="Nearby",n=Wr(),r=Yr("ul");for(let t=0;t<a.length;t+=1)a[t].c();Jr(r,"class","properties nearby"),Jr(r,"data-count",i=Me(t[13],"length",""))},m(t,i){zr(t,e,i),zr(t,n,i),zr(t,r,i);for(let t=0;t<a.length;t+=1)a[t].m(r,null);o=!0},p(t,e){if(8192&e){let n;for(s=t[13],n=0;n<s.length;n+=1){const i=Cm(t,s,n);a[n]?(a[n].p(i,e),wi(a[n],1)):(a[n]=Bm(i),a[n].c(),wi(a[n],1),a[n].m(r,null))}for(vi(),n=s.length;n<a.length;n+=1)u(n);bi()}(!o||8192&e&&i!==(i=Me(t[13],"length","")))&&Jr(r,"data-count",i)},i(t){if(!o){for(let t=0;t<s.length;t+=1)wi(a[t]);o=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)xi(a[t]);o=!1},d(t){t&&Vr(e),t&&Vr(n),t&&Vr(r),Hr(a,t)}}}function Bm(t){let e,n,r,i,o;const s=new Sg({props:{property:t[21]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r="/properties/"+t[21].id)},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};8192&e&&(i.property=t[21]),s.$set(i),(!o||8192&e&&r!==(r="/properties/"+t[21].id))&&Jr(n,"href",r)},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function Um(t){let e,n,r,i;const o=[Gm,qm],s=[];function a(t,e){return t[14]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=Kr()},m(t,n){s[e].m(t,n),zr(t,r,n),i=!0},p(t,i){let u=e;e=a(t),e===u?s[e].p(t,i):(vi(),xi(s[u],1,1,()=>{s[u]=null}),bi(),n=s[e],n||(n=s[e]=o[e](t),n.c()),wi(n,1),n.m(r.parentNode,r))},i(t){i||(wi(n),i=!0)},o(t){xi(n),i=!1},d(t){s[e].d(t),t&&Vr(r)}}}function qm(t){let e;const n=new Em({props:{property:t[4],units:t[11]||[]}});return{c(){Ii(n.$$.fragment)},m(t,r){Si(n,t,r),e=!0},p(t,e){const r={};16&e&&(r.property=t[4]),2048&e&&(r.units=t[11]||[]),n.$set(r)},i(t){e||(wi(n.$$.fragment,t),e=!0)},o(t){xi(n.$$.fragment,t),e=!1},d(t){Ci(n,t)}}}function Gm(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d=t[14].display+"";const g=[Vm,zm],y=[];function m(t,e){return t[9]?1:0}return p=m(t),f=y[p]=g[p](t),{c(){e=Yr("nav"),n=Yr("header"),r=Yr("h1"),i=Yr("data"),o=Xr(d),u=Wr(),c=Yr("h1"),c.textContent="Your Passes",l=Wr(),f.c(),Jr(i,"class",s=t[14].type+" id "+[t[14].format,t[14].size].filter(e_).join(" ")),Jr(i,"value",a=t[14].id),Jr(e,"class","permits")},m(t,s){zr(t,e,s),Gr(e,n),Gr(n,r),Gr(r,i),Gr(i,o),Gr(e,u),Gr(e,c),Gr(e,l),y[p].m(e,null),h=!0},p(t,n){(!h||16384&n)&&d!==(d=t[14].display+"")&&Zr(o,d),(!h||16384&n&&s!==(s=t[14].type+" id "+[t[14].format,t[14].size].filter(e_).join(" ")))&&Jr(i,"class",s),(!h||16384&n&&a!==(a=t[14].id))&&Jr(i,"value",a);let r=p;p=m(t),p===r?y[p].p(t,n):(vi(),xi(y[r],1,1,()=>{y[r]=null}),bi(),f=y[p],f||(f=y[p]=g[p](t),f.c()),wi(f,1),f.m(e,null))},i(t){h||(wi(f),h=!0)},o(t){xi(f),h=!1},d(t){t&&Vr(e),y[p].d()}}}function zm(t){let e,n,r,i=t[9],o=[];for(let e=0;e<i.length;e+=1)o[e]=Hm(Sm(t,i,e));const s=t=>xi(o[t],1,1,()=>{o[t]=null});return{c(){e=Yr("ul");for(let t=0;t<o.length;t+=1)o[t].c();Jr(e,"class","permits"),Jr(e,"data-count",n=Me(t[9],"length",""))},m(t,n){zr(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,a){if(520&a){let n;for(i=t[9],n=0;n<i.length;n+=1){const r=Sm(t,i,n);o[n]?(o[n].p(r,a),wi(o[n],1)):(o[n]=Hm(r),o[n].c(),wi(o[n],1),o[n].m(e,null))}for(vi(),n=i.length;n<o.length;n+=1)s(n);bi()}(!r||512&a&&n!==(n=Me(t[9],"length","")))&&Jr(e,"data-count",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)wi(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)xi(o[t]);r=!1},d(t){t&&Vr(e),Hr(o,t)}}}function Vm(t){let e;return{c(){e=Yr("ul"),Jr(e,"class","permits")},m(t,n){zr(t,e,n)},p:Dr,i:Dr,o:Dr,d(t){t&&Vr(e)}}}function Hm(t){let e,n,r,i,o;const s=new Ug({props:{permit:t[16]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r=t[16]&&t[16].id?`/p/${t[16].id}`:null),ti(n,"selected",t[16]&&t[16].id&&t[16].id===t[3])},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};512&e&&(i.permit=t[16]),s.$set(i),(!o||512&e&&r!==(r=t[16]&&t[16].id?`/p/${t[16].id}`:null))&&Jr(n,"href",r),520&e&&ti(n,"selected",t[16]&&t[16].id&&t[16].id===t[3])},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function Ym(t){let e,n,r=Me(t[6],"issue.enabled"),i=r&&Xm(t);return{c(){e=Yr("nav"),i&&i.c(),Jr(e,"class","permits")},m(t,r){zr(t,e,r),i&&i.m(e,null),n=!0},p(t,n){64&n&&(r=Me(t[6],"issue.enabled")),r?i?(i.p(t,n),wi(i,1)):(i=Xm(t),i.c(),wi(i,1),i.m(e,null)):i&&(vi(),xi(i,1,1,()=>{i=null}),bi())},i(t){n||(wi(i),n=!0)},o(t){xi(i),n=!1},d(t){t&&Vr(e),i&&i.d()}}}function Xm(t){let e,n,r,i;const o=[Km,Wm],s=[];function a(t,e){return t[9]?1:0}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=Kr()},m(t,n){s[e].m(t,n),zr(t,r,n),i=!0},p(t,i){let u=e;e=a(t),e===u?s[e].p(t,i):(vi(),xi(s[u],1,1,()=>{s[u]=null}),bi(),n=s[e],n||(n=s[e]=o[e](t),n.c()),wi(n,1),n.m(r.parentNode,r))},i(t){i||(wi(n),i=!0)},o(t){xi(n),i=!1},d(t){s[e].d(t),t&&Vr(r)}}}function Wm(t){let e,n,r,i=t[9],o=[];for(let e=0;e<i.length;e+=1)o[e]=Qm(Im(t,i,e));const s=t=>xi(o[t],1,1,()=>{o[t]=null});return{c(){e=Yr("ul");for(let t=0;t<o.length;t+=1)o[t].c();Jr(e,"class","permits"),Jr(e,"data-count",n=Me(t[9],"length",""))},m(t,n){zr(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,a){if(520&a){let n;for(i=t[9],n=0;n<i.length;n+=1){const r=Im(t,i,n);o[n]?(o[n].p(r,a),wi(o[n],1)):(o[n]=Qm(r),o[n].c(),wi(o[n],1),o[n].m(e,null))}for(vi(),n=i.length;n<o.length;n+=1)s(n);bi()}(!r||512&a&&n!==(n=Me(t[9],"length","")))&&Jr(e,"data-count",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)wi(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)xi(o[t]);r=!1},d(t){t&&Vr(e),Hr(o,t)}}}function Km(t){let e;return{c(){e=Yr("ul"),Jr(e,"class","permits")},m(t,n){zr(t,e,n)},p:Dr,i:Dr,o:Dr,d(t){t&&Vr(e)}}}function Qm(t){let e,n,r,i,o;const s=new Ug({props:{permit:t[16]}});return{c(){e=Yr("li"),n=Yr("a"),Ii(s.$$.fragment),i=Wr(),Jr(n,"href",r=t[16]&&t[16].id?`/p/${t[16].id}`:null),ti(n,"selected",t[16]&&t[16].id&&t[16].id===t[3])},m(t,r){zr(t,e,r),Gr(e,n),Si(s,n,null),Gr(e,i),o=!0},p(t,e){const i={};512&e&&(i.permit=t[16]),s.$set(i),(!o||512&e&&r!==(r=t[16]&&t[16].id?`/p/${t[16].id}`:null))&&Jr(n,"href",r),520&e&&ti(n,"selected",t[16]&&t[16].id&&t[16].id===t[3])},i(t){o||(wi(s.$$.fragment,t),o=!0)},o(t){xi(s.$$.fragment,t),o=!1},d(t){t&&Vr(e),Ci(s)}}}function Jm(t){let e,n;return{c(){e=Yr("img"),Jr(e,"alt","logo"),e.src!==(n=t[4].logo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=200&dpr=2&fit=max")&&Jr(e,"src",n)},m(t,n){zr(t,e,n)},p(t,r){16&r&&e.src!==(n=t[4].logo.url.replace("https://upload.parkingboss.com/files/","https://amenitypass.imgix.net/")+"?auto=compress,format&w=200&dpr=2&fit=max")&&Jr(e,"src",n)},d(t){t&&Vr(e)}}}function Zm(t){let e,n,r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,_=t[1]&&Om(),v=t[4]&&Tm(t),b=t[1]&&Lm(t);const w=[Dm,Mm,Am,Rm,Pm],x=[];function E(t,e){return"permit"==t[0]?0:t[2]?1:"property"==t[0]?2:"newpermit"==t[0]?3:"index"==t[0]?4:-1}~(p=E(t))&&(f=x[p]=w[p](t));let I=t[4]&&"permits"==t[0]&&Um(t),S=t[4]&&t[2]&&Ym(t),C=t[4]&&t[4].logo&&Jm(t);return{c(){e=Yr("header"),n=Yr("nav"),r=Yr("ul"),_&&_.c(),i=Wr(),o=Yr("main"),s=Yr("header"),v&&v.c(),a=Wr(),u=Yr("nav"),c=Yr("ul"),b&&b.c(),l=Wr(),f&&f.c(),h=Wr(),I&&I.c(),d=Wr(),S&&S.c(),g=Wr(),y=Yr("footer"),C&&C.c()},m(t,f){zr(t,e,f),Gr(e,n),Gr(n,r),_&&_.m(r,null),zr(t,i,f),zr(t,o,f),Gr(o,s),v&&v.m(s,null),Gr(s,a),Gr(s,u),Gr(u,c),b&&b.m(c,null),Gr(o,l),~p&&x[p].m(o,null),Gr(o,h),I&&I.m(o,null),Gr(o,d),S&&S.m(o,null),Gr(o,g),Gr(o,y),C&&C.m(y,null),m=!0},p(t,[e]){t[1]?_||(_=Om(),_.c(),_.m(r,null)):_&&(_.d(1),_=null),t[4]?v?(v.p(t,e),wi(v,1)):(v=Tm(t),v.c(),wi(v,1),v.m(s,a)):v&&(vi(),xi(v,1,1,()=>{v=null}),bi()),t[1]?b?b.p(t,e):(b=Lm(t),b.c(),b.m(c,null)):b&&(b.d(1),b=null);let n=p;p=E(t),p===n?~p&&x[p].p(t,e):(f&&(vi(),xi(x[n],1,1,()=>{x[n]=null}),bi()),~p?(f=x[p],f||(f=x[p]=w[p](t),f.c()),wi(f,1),f.m(o,h)):f=null),t[4]&&"permits"==t[0]?I?(I.p(t,e),wi(I,1)):(I=Um(t),I.c(),wi(I,1),I.m(o,d)):I&&(vi(),xi(I,1,1,()=>{I=null}),bi()),t[4]&&t[2]?S?(S.p(t,e),wi(S,1)):(S=Ym(t),S.c(),wi(S,1),S.m(o,g)):S&&(vi(),xi(S,1,1,()=>{S=null}),bi()),t[4]&&t[4].logo?C?C.p(t,e):(C=Jm(t),C.c(),C.m(y,null)):C&&(C.d(1),C=null)},i(t){m||(wi(v),wi(f),wi(I),wi(S),m=!0)},o(t){xi(v),xi(f),xi(I),xi(S),m=!1},d(t){t&&Vr(e),_&&_.d(),t&&Vr(i),t&&Vr(o),v&&v.d(),b&&b.d(),~p&&x[p].d(),I&&I.d(),S&&S.d(),C&&C.d()}}}const t_=t=>!t.valid.expired&&!t.valid.cancelled,e_=t=>!!t;function n_(t,e,n){let r,i,o,s,a,u,c,l,p,f,h,d,g,y,m;qr(t,Wh,t=>n(0,r=t)),qr(t,Yh,t=>n(1,i=t)),qr(t,Hh,t=>n(2,o=t)),qr(t,Xh,t=>n(3,s=t)),qr(t,vd,t=>n(4,a=t)),qr(t,_d,t=>n(5,u=t)),qr(t,wd,t=>n(6,c=t)),qr(t,Vh,t=>n(7,l=t)),qr(t,Kh,t=>n(8,p=t)),qr(t,xd,t=>n(9,f=t)),qr(t,bd,t=>n(10,h=t)),qr(t,Id,t=>n(11,d=t)),qr(t,Ed,t=>n(12,g=t)),qr(t,od,t=>n(13,y=t)),qr(t,td,t=>n(14,m=t));return t.$$.update=()=>{1&t.$$.dirty&&document.documentElement[r?"setAttribute":"removeAttribute"]("data-view",r),2&t.$$.dirty&&document.documentElement[i?"setAttribute":"removeAttribute"]("data-property",i),4&t.$$.dirty&&document.documentElement[o?"setAttribute":"removeAttribute"]("data-policy",o),8&t.$$.dirty&&document.documentElement[s?"setAttribute":"removeAttribute"]("data-permit",s)},[r,i,o,s,a,u,c,l,p,f,h,d,g,y,m,t=>t&&!t.valid.expired&&!t.valid.cancelled&&(o===t.issued.policy||o===t.issued.issuer)]}const r_="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",i_={RFC3548:r_,RFC4648:r_,"RFC4648-HEX":"0123456789ABCDEFGHIJKLMNOPQRSTUV",Crockford:"0123456789ABCDEFGHJKMNPQRSTVWXYZ"};!function(t="Crockford"){const e=i_[t];if(!e)throw new Error("Unknown base32 variant: "+t);function n(t,e){const n=t.indexOf(e);if(-1===n)throw new Error("Invalid character found: "+e);return n}}("Crockford");function o_(t){return[...t instanceof URL?t.searchParams.entries():t instanceof URLSearchParams?t.entries():function(t){try{return new URL(t).searchParams}catch(e){return new URLSearchParams(t)}}(t).entries()].reduce((t,[e,n])=>(t[e]?"string"==typeof t[e]?t[e]=[t[e],n]:t[e].push(n):t[e]=n,t),{})}"undefined"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}()&&"undefined"!=typeof Uint8Array&&function(){try{new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),window.app=new class extends Ti{constructor(t){super(),Oi(this,t,n_,Zm,Br,{})}}({target:document.body,props:{}});function s_(t,e){Vh.update(e=>Er(e,t.params,t.query)),e()}function a_(t){}function u_(t){return function(e,n){e.params.view=t,n()}}T("*",(function(t,e){Vh.set({}),t.query=o_(t.querystring),e()})),T.exit("*",(function(t,e){e()})),T("/properties/:property/*",s_),T("/properties/:property",u_("property"),s_,a_),T("/p/:permit",u_("permit"),s_,a_),T("/permits/:permit",u_("permit"),s_,a_),T("/properties/:property/amenities/:policy/*",s_),T("/properties/:property/amenities/:policy/permits/new",u_("newpermit"),s_,a_),T("/properties/:property/amenities/:policy/:subview",u_("policy"),s_,a_),T("/properties/:property/amenities/:policy",u_("policy"),s_,a_),T("/properties/:property/:view",s_,a_),T("/permits",u_("permits"),s_,a_),T("/demo",u_("demo"),s_,a_),T("*",u_("index"),s_,a_),T.start()}(crypto);
//# sourceMappingURL=app-008cd1dec2e67c2ef4b77d1f77d0e7c7.js.map
